<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lean: QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lean
   &#160;<span id="projectnumber">$LEAN_TAG$</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides a base class for portfolio construction models  
 <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel__inherit__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afda732526e33b29f287e0d71b62a62b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#afda732526e33b29f287e0d71b62a62b2">PortfolioConstructionModel</a> (Func&lt; DateTime, DateTime?&gt; rebalancingFunc)</td></tr>
<tr class="memdesc:afda732526e33b29f287e0d71b62a62b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a new instance of <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html" title="Provides a base class for portfolio construction models">PortfolioConstructionModel</a>  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#afda732526e33b29f287e0d71b62a62b2">More...</a><br /></td></tr>
<tr class="separator:afda732526e33b29f287e0d71b62a62b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3fbcbab45c721913fd25cf43ccfc15c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#aa3fbcbab45c721913fd25cf43ccfc15c">PortfolioConstructionModel</a> (Func&lt; DateTime, DateTime &gt; rebalancingFunc=null)</td></tr>
<tr class="memdesc:aa3fbcbab45c721913fd25cf43ccfc15c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a new instance of <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html" title="Provides a base class for portfolio construction models">PortfolioConstructionModel</a>  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#aa3fbcbab45c721913fd25cf43ccfc15c">More...</a><br /></td></tr>
<tr class="separator:aa3fbcbab45c721913fd25cf43ccfc15c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b9e58e326811434356b8b918a38d89"><td class="memItemLeft" align="right" valign="top">virtual IEnumerable&lt; <a class="el" href="interfaceQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1IPortfolioTarget.html">IPortfolioTarget</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#aa8b9e58e326811434356b8b918a38d89">CreateTargets</a> (<a class="el" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html">QCAlgorithm</a> algorithm, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>[] insights)</td></tr>
<tr class="memdesc:aa8b9e58e326811434356b8b918a38d89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create portfolio targets from the specified insights  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#aa8b9e58e326811434356b8b918a38d89">More...</a><br /></td></tr>
<tr class="separator:aa8b9e58e326811434356b8b918a38d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac23bc5bbbbe1ee72007a3bb5db870755"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#ac23bc5bbbbe1ee72007a3bb5db870755">OnSecuritiesChanged</a> (<a class="el" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html">QCAlgorithm</a> algorithm, <a class="el" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1SecurityChanges.html">SecurityChanges</a> changes)</td></tr>
<tr class="memdesc:ac23bc5bbbbe1ee72007a3bb5db870755"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event fired each time the we add/remove securities from the data feed  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#ac23bc5bbbbe1ee72007a3bb5db870755">More...</a><br /></td></tr>
<tr class="separator:ac23bc5bbbbe1ee72007a3bb5db870755"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2c00ccedcc942193aad1f13470d4c990"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a2c00ccedcc942193aad1f13470d4c990">SetPythonWrapper</a> (<a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html">PortfolioConstructionModelPythonWrapper</a> pythonWrapper)</td></tr>
<tr class="memdesc:a2c00ccedcc942193aad1f13470d4c990"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to set the <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html" title="Provides an implementation of IPortfolioConstructionModel that wraps a PyObject object">PortfolioConstructionModelPythonWrapper</a> instance if any  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a2c00ccedcc942193aad1f13470d4c990">More...</a><br /></td></tr>
<tr class="separator:a2c00ccedcc942193aad1f13470d4c990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31dd8e94b6712caa957268183dbe9969"><td class="memItemLeft" align="right" valign="top">virtual List&lt; <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a31dd8e94b6712caa957268183dbe9969">GetTargetInsights</a> ()</td></tr>
<tr class="memdesc:a31dd8e94b6712caa957268183dbe9969"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the target insights to calculate a portfolio target percent for  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a31dd8e94b6712caa957268183dbe9969">More...</a><br /></td></tr>
<tr class="separator:a31dd8e94b6712caa957268183dbe9969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24305712b8d7a96fb97c23e367b78bcc"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a24305712b8d7a96fb97c23e367b78bcc">ShouldCreateTargetForInsight</a> (<a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a> insight)</td></tr>
<tr class="memdesc:a24305712b8d7a96fb97c23e367b78bcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method that will determine if the portfolio construction model should create a target for this insight  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a24305712b8d7a96fb97c23e367b78bcc">More...</a><br /></td></tr>
<tr class="separator:a24305712b8d7a96fb97c23e367b78bcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55568817ad5abc47f0e758cc3764c22c"><td class="memItemLeft" align="right" valign="top">virtual Dictionary&lt; <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a55568817ad5abc47f0e758cc3764c22c">DetermineTargetPercent</a> (List&lt; <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a> &gt; activeInsights)</td></tr>
<tr class="memdesc:a55568817ad5abc47f0e758cc3764c22c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will determine the target percent for each insight  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a55568817ad5abc47f0e758cc3764c22c">More...</a><br /></td></tr>
<tr class="separator:a55568817ad5abc47f0e758cc3764c22c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a304ec226955ce89ef7a32d24ece19f18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a304ec226955ce89ef7a32d24ece19f18">SetRebalancingFunc</a> (PyObject rebalance)</td></tr>
<tr class="memdesc:a304ec226955ce89ef7a32d24ece19f18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Python helper method to set the rebalancing function. This is required due to a python net limitation not being able to use the base type constructor, and also because when python algorithms use C# portfolio construction models, it can't convert python methods into func nor resolve the correct constructor for the date rules, timespan parameter. For performance we prefer python algorithms using the C# implementation  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a304ec226955ce89ef7a32d24ece19f18">More...</a><br /></td></tr>
<tr class="separator:a304ec226955ce89ef7a32d24ece19f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad9d1f45bdcde5dd2244816f154411e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a5ad9d1f45bdcde5dd2244816f154411e">IsRebalanceDue</a> (<a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>[] insights, DateTime algorithmUtc)</td></tr>
<tr class="memdesc:a5ad9d1f45bdcde5dd2244816f154411e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if the portfolio should be rebalanced base on the provided rebalancing func, if any security change have been taken place or if an insight has expired or a new insight arrived If the rebalancing function has not been provided will return true.  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a5ad9d1f45bdcde5dd2244816f154411e">More...</a><br /></td></tr>
<tr class="separator:a5ad9d1f45bdcde5dd2244816f154411e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a694a406f91f9ddd2190e6fa4cb8e60bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a694a406f91f9ddd2190e6fa4cb8e60bf">RefreshRebalance</a> (DateTime algorithmUtc)</td></tr>
<tr class="memdesc:a694a406f91f9ddd2190e6fa4cb8e60bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refresh the next rebalance time and clears the security changes flag  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a694a406f91f9ddd2190e6fa4cb8e60bf">More...</a><br /></td></tr>
<tr class="separator:a694a406f91f9ddd2190e6fa4cb8e60bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a29a0ac2fb589b9cf737b0fe6220d89c0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a29a0ac2fb589b9cf737b0fe6220d89c0">FilterInvalidInsightMagnitude</a> (<a class="el" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithm.html">IAlgorithm</a> algorithm, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>[] insights)</td></tr>
<tr class="memdesc:a29a0ac2fb589b9cf737b0fe6220d89c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper class that can be used by the different <a class="el" href="interfaceQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1IPortfolioConstructionModel.html" title="Algorithm framework model that">IPortfolioConstructionModel</a> implementations to filter Insight instances with an invalid Insight.Magnitude value based on the IAlgorithmSettings  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a29a0ac2fb589b9cf737b0fe6220d89c0">More...</a><br /></td></tr>
<tr class="separator:a29a0ac2fb589b9cf737b0fe6220d89c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:af50a87128469a2d5d03fe4ed9f0d37f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html">PortfolioConstructionModelPythonWrapper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#af50a87128469a2d5d03fe4ed9f0d37f4">PythonWrapper</a></td></tr>
<tr class="memdesc:af50a87128469a2d5d03fe4ed9f0d37f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is required due to a limitation in PythonNet to resolved overriden methods. When Python calls a C# method that calls a method that's overriden in python it won't run the python implementation unless the call is performed through python too.  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#af50a87128469a2d5d03fe4ed9f0d37f4">More...</a><br /></td></tr>
<tr class="separator:af50a87128469a2d5d03fe4ed9f0d37f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a4609336149bb2926f7b0487531354b01"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a4609336149bb2926f7b0487531354b01">RebalanceOnSecurityChanges</a> = true<code> [get, set]</code></td></tr>
<tr class="memdesc:a4609336149bb2926f7b0487531354b01"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if should rebalance portfolio on security changes. True by default  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a4609336149bb2926f7b0487531354b01">More...</a><br /></td></tr>
<tr class="separator:a4609336149bb2926f7b0487531354b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb67319648225535f36c3675a61ee917"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#acb67319648225535f36c3675a61ee917">RebalanceOnInsightChanges</a> = true<code> [get, set]</code></td></tr>
<tr class="memdesc:acb67319648225535f36c3675a61ee917"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if should rebalance portfolio on new insights or expiration of insights. True by default  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#acb67319648225535f36c3675a61ee917">More...</a><br /></td></tr>
<tr class="separator:acb67319648225535f36c3675a61ee917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4a4fcde5cb81a59478b9453e69f7849"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithm.html">IAlgorithm</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#ae4a4fcde5cb81a59478b9453e69f7849">Algorithm</a><code> [get]</code></td></tr>
<tr class="memdesc:ae4a4fcde5cb81a59478b9453e69f7849"><td class="mdescLeft">&#160;</td><td class="mdescRight">The algorithm instance  <a href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#ae4a4fcde5cb81a59478b9453e69f7849">More...</a><br /></td></tr>
<tr class="separator:ae4a4fcde5cb81a59478b9453e69f7849"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides a base class for portfolio construction models </p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00030">30</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afda732526e33b29f287e0d71b62a62b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afda732526e33b29f287e0d71b62a62b2">&#9670;&nbsp;</a></span>PortfolioConstructionModel() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.PortfolioConstructionModel </td>
          <td>(</td>
          <td class="paramtype">Func&lt; DateTime, DateTime?&gt;&#160;</td>
          <td class="paramname"><em>rebalancingFunc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a new instance of <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html" title="Provides a base class for portfolio construction models">PortfolioConstructionModel</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rebalancingFunc</td><td>For a given algorithm UTC DateTime returns the next expected rebalance time or null if unknown, in which case the function will be called again in the next loop. Returning current time will trigger rebalance. If null will be ignored</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00064">64</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>

</div>
</div>
<a id="aa3fbcbab45c721913fd25cf43ccfc15c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3fbcbab45c721913fd25cf43ccfc15c">&#9670;&nbsp;</a></span>PortfolioConstructionModel() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.PortfolioConstructionModel </td>
          <td>(</td>
          <td class="paramtype">Func&lt; DateTime, DateTime &gt;&#160;</td>
          <td class="paramname"><em>rebalancingFunc</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a new instance of <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html" title="Provides a base class for portfolio construction models">PortfolioConstructionModel</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rebalancingFunc</td><td>For a given algorithm UTC DateTime returns the next expected rebalance UTC time. Returning current time will trigger rebalance. If null will be ignored</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00074">74</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2c00ccedcc942193aad1f13470d4c990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c00ccedcc942193aad1f13470d4c990">&#9670;&nbsp;</a></span>SetPythonWrapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.SetPythonWrapper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html">PortfolioConstructionModelPythonWrapper</a>&#160;</td>
          <td class="paramname"><em>pythonWrapper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to set the <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html" title="Provides an implementation of IPortfolioConstructionModel that wraps a PyObject object">PortfolioConstructionModelPythonWrapper</a> instance if any </p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00082">82</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>

</div>
</div>
<a id="aa8b9e58e326811434356b8b918a38d89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8b9e58e326811434356b8b918a38d89">&#9670;&nbsp;</a></span>CreateTargets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual IEnumerable&lt;<a class="el" href="interfaceQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1IPortfolioTarget.html">IPortfolioTarget</a>&gt; QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.CreateTargets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html">QCAlgorithm</a>&#160;</td>
          <td class="paramname"><em>algorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>[]&#160;</td>
          <td class="paramname"><em>insights</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create portfolio targets from the specified insights </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">algorithm</td><td>The algorithm instance</td></tr>
    <tr><td class="paramname">insights</td><td>The insights to create portfolio targets from</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An enumerable of portfolio targets to be sent to the execution model</dd></dl>

<p>Implements <a class="el" href="interfaceQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1IPortfolioConstructionModel.html#a7733d60a7f12e243e8d0a2daf9d550bb">QuantConnect.Algorithm.Framework.Portfolio.IPortfolioConstructionModel</a>.</p>

<p>Reimplemented in <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html#a296a696759b3e6b8193d5d2253e1205e">QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModelPythonWrapper</a>, and <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1NullPortfolioConstructionModel.html#a9de50f67d54dd9da2bc67344c0b2ae02">QuantConnect.Algorithm.Framework.Portfolio.NullPortfolioConstructionModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00093">93</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_aa8b9e58e326811434356b8b918a38d89_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac23bc5bbbbe1ee72007a3bb5db870755"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac23bc5bbbbe1ee72007a3bb5db870755">&#9670;&nbsp;</a></span>OnSecuritiesChanged()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.OnSecuritiesChanged </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html">QCAlgorithm</a>&#160;</td>
          <td class="paramname"><em>algorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1SecurityChanges.html">SecurityChanges</a>&#160;</td>
          <td class="paramname"><em>changes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Event fired each time the we add/remove securities from the data feed </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">algorithm</td><td>The algorithm instance that experienced the change in securities</td></tr>
    <tr><td class="paramname">changes</td><td>The security additions and removals from the algorithm</td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interfaceQuantConnect_1_1Algorithm_1_1Framework_1_1INotifiedSecurityChanges.html#aba8ad3d9ecd94f82ed731171e108178b">QuantConnect.Algorithm.Framework.INotifiedSecurityChanges</a>.</p>

<p>Reimplemented in <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1BlackLittermanOptimizationPortfolioConstructionModel.html#a4910ebe8690da8c745ddb9eb7d885ce6">QuantConnect.Algorithm.Framework.Portfolio.BlackLittermanOptimizationPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1MeanVarianceOptimizationPortfolioConstructionModel.html#aaff77b2538a9a57352afec93bfbcd485">QuantConnect.Algorithm.Framework.Portfolio.MeanVarianceOptimizationPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1MeanReversionPortfolioConstructionModel.html#adad042e1b71dc1f6b501d1094079ec26">QuantConnect.Algorithm.Framework.Portfolio.MeanReversionPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1RiskParityPortfolioConstructionModel.html#a6fa0faaf1a72ea921a3fa1ccd144b372">QuantConnect.Algorithm.Framework.Portfolio.RiskParityPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1SectorWeightingPortfolioConstructionModel.html#a203aeab9ff97726df31d82edf28a6725">QuantConnect.Algorithm.Framework.Portfolio.SectorWeightingPortfolioConstructionModel</a>, and <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html#ab4602fb77b83095e9f44ec65c30c2a64">QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModelPythonWrapper</a>.</p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00150">150</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>

</div>
</div>
<a id="a31dd8e94b6712caa957268183dbe9969"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31dd8e94b6712caa957268183dbe9969">&#9670;&nbsp;</a></span>GetTargetInsights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual List&lt;<a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>&gt; QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.GetTargetInsights </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the target insights to calculate a portfolio target percent for </p>
<dl class="section return"><dt>Returns</dt><dd>An enumerable of the target insights</dd></dl>

<p>Reimplemented in <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1BlackLittermanOptimizationPortfolioConstructionModel.html#a3ccbbdc9c49bab59873310db659eaf0a">QuantConnect.Algorithm.Framework.Portfolio.BlackLittermanOptimizationPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html#a03656407407f7ca97689402a7aec5b1a">QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModelPythonWrapper</a>, and <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1AccumulativeInsightPortfolioConstructionModel.html#add6a6270b91319ead31f7bf27cc5b123">QuantConnect.Algorithm.Framework.Portfolio.AccumulativeInsightPortfolioConstructionModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00164">164</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_a31dd8e94b6712caa957268183dbe9969_cgraph.svg" width="638" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_a31dd8e94b6712caa957268183dbe9969_icgraph.svg" width="584" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a24305712b8d7a96fb97c23e367b78bcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24305712b8d7a96fb97c23e367b78bcc">&#9670;&nbsp;</a></span>ShouldCreateTargetForInsight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.ShouldCreateTargetForInsight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>&#160;</td>
          <td class="paramname"><em>insight</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method that will determine if the portfolio construction model should create a target for this insight </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">insight</td><td>The insight to create a target for</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the portfolio should create a target for the insight</dd></dl>

<p>Reimplemented in <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1BlackLittermanOptimizationPortfolioConstructionModel.html#a6278ae1d7029f84a106f7a977c0a53aa">QuantConnect.Algorithm.Framework.Portfolio.BlackLittermanOptimizationPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1MeanVarianceOptimizationPortfolioConstructionModel.html#a03fe77e9e8e939b5bae19a213af52917">QuantConnect.Algorithm.Framework.Portfolio.MeanVarianceOptimizationPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html#a526a95e008bcf4ea55e33dae87b9433b">QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModelPythonWrapper</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1InsightWeightingPortfolioConstructionModel.html#ae70bb4f19af5e0cb0de1afbb14cae36a">QuantConnect.Algorithm.Framework.Portfolio.InsightWeightingPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1ConfidenceWeightedPortfolioConstructionModel.html#afe68563e4784c45a91d5acea04eb8fc3">QuantConnect.Algorithm.Framework.Portfolio.ConfidenceWeightedPortfolioConstructionModel</a>, and <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1SectorWeightingPortfolioConstructionModel.html#a4e598cba25faf0052225941da3bec1d1">QuantConnect.Algorithm.Framework.Portfolio.SectorWeightingPortfolioConstructionModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00185">185</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_a24305712b8d7a96fb97c23e367b78bcc_icgraph.svg" width="100%" height="410"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a55568817ad5abc47f0e758cc3764c22c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55568817ad5abc47f0e758cc3764c22c">&#9670;&nbsp;</a></span>DetermineTargetPercent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual Dictionary&lt;<a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>, double&gt; QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.DetermineTargetPercent </td>
          <td>(</td>
          <td class="paramtype">List&lt; <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a> &gt;&#160;</td>
          <td class="paramname"><em>activeInsights</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will determine the target percent for each insight </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">activeInsights</td><td>The active insights to generate a target for</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A target percent for each insight</dd></dl>

<p>Reimplemented in <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1BlackLittermanOptimizationPortfolioConstructionModel.html#aa8d71c74551abd947408140b4e6493bc">QuantConnect.Algorithm.Framework.Portfolio.BlackLittermanOptimizationPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1MeanVarianceOptimizationPortfolioConstructionModel.html#aed1561c84b5c50ca39f98d9bdec6d21e">QuantConnect.Algorithm.Framework.Portfolio.MeanVarianceOptimizationPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1RiskParityPortfolioConstructionModel.html#aa9dc09d1d75cf042502a696cc1751858">QuantConnect.Algorithm.Framework.Portfolio.RiskParityPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html#abfe0e4b728674e92e3fdc5375129d721">QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModelPythonWrapper</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1MeanReversionPortfolioConstructionModel.html#a0bfa3b78256270ed278d018e85efbe35">QuantConnect.Algorithm.Framework.Portfolio.MeanReversionPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1AccumulativeInsightPortfolioConstructionModel.html#ad1f522cd31fb6ac46a1cc25ea088126b">QuantConnect.Algorithm.Framework.Portfolio.AccumulativeInsightPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1InsightWeightingPortfolioConstructionModel.html#a3ca90cfe4663905414b4246fc7583ee6">QuantConnect.Algorithm.Framework.Portfolio.InsightWeightingPortfolioConstructionModel</a>, <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1SectorWeightingPortfolioConstructionModel.html#ac0bff7a38dcf712d2cd0649551b65fa3">QuantConnect.Algorithm.Framework.Portfolio.SectorWeightingPortfolioConstructionModel</a>, and <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1EqualWeightingPortfolioConstructionModel.html#a27a6459fc8203536e4930a432068395b">QuantConnect.Algorithm.Framework.Portfolio.EqualWeightingPortfolioConstructionModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00195">195</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_a55568817ad5abc47f0e758cc3764c22c_icgraph.svg" width="584" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a304ec226955ce89ef7a32d24ece19f18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a304ec226955ce89ef7a32d24ece19f18">&#9670;&nbsp;</a></span>SetRebalancingFunc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.SetRebalancingFunc </td>
          <td>(</td>
          <td class="paramtype">PyObject&#160;</td>
          <td class="paramname"><em>rebalance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Python helper method to set the rebalancing function. This is required due to a python net limitation not being able to use the base type constructor, and also because when python algorithms use C# portfolio construction models, it can't convert python methods into func nor resolve the correct constructor for the date rules, timespan parameter. For performance we prefer python algorithms using the C# implementation </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rebalance</td><td>Rebalancing func or if a date rule, timedelta will be converted into func. For a given algorithm UTC DateTime the func returns the next expected rebalance time or null if unknown, in which case the function will be called again in the next loop. Returning current time will trigger rebalance. If null will be ignored</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00211">211</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_a304ec226955ce89ef7a32d24ece19f18_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a5ad9d1f45bdcde5dd2244816f154411e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ad9d1f45bdcde5dd2244816f154411e">&#9670;&nbsp;</a></span>IsRebalanceDue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.IsRebalanceDue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>[]&#160;</td>
          <td class="paramname"><em>insights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>algorithmUtc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines if the portfolio should be rebalanced base on the provided rebalancing func, if any security change have been taken place or if an insight has expired or a new insight arrived If the rebalancing function has not been provided will return true. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">insights</td><td>The insights to create portfolio targets from</td></tr>
    <tr><td class="paramname">algorithmUtc</td><td>The current algorithm UTC time</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if should rebalance</dd></dl>

<p>Reimplemented in <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html#a1296a2b023b32d38c545170b84bcec5c">QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModelPythonWrapper</a>.</p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00248">248</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_a5ad9d1f45bdcde5dd2244816f154411e_cgraph.svg" width="584" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_a5ad9d1f45bdcde5dd2244816f154411e_icgraph.svg" width="584" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a694a406f91f9ddd2190e6fa4cb8e60bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a694a406f91f9ddd2190e6fa4cb8e60bf">&#9670;&nbsp;</a></span>RefreshRebalance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.RefreshRebalance </td>
          <td>(</td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>algorithmUtc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Refresh the next rebalance time and clears the security changes flag </p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00294">294</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_a694a406f91f9ddd2190e6fa4cb8e60bf_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a29a0ac2fb589b9cf737b0fe6220d89c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29a0ac2fb589b9cf737b0fe6220d89c0">&#9670;&nbsp;</a></span>FilterInvalidInsightMagnitude()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a> [] QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.FilterInvalidInsightMagnitude </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithm.html">IAlgorithm</a>&#160;</td>
          <td class="paramname"><em>algorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html">Insight</a>[]&#160;</td>
          <td class="paramname"><em>insights</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper class that can be used by the different <a class="el" href="interfaceQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1IPortfolioConstructionModel.html" title="Algorithm framework model that">IPortfolioConstructionModel</a> implementations to filter Insight instances with an invalid Insight.Magnitude value based on the IAlgorithmSettings </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">algorithm</td><td>The algorithm instance</td></tr>
    <tr><td class="paramname">insights</td><td>The insight collection to filter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a new array of insights removing invalid ones</dd></dl>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00311">311</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel_a29a0ac2fb589b9cf737b0fe6220d89c0_icgraph.svg" width="100%" height="422"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af50a87128469a2d5d03fe4ed9f0d37f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af50a87128469a2d5d03fe4ed9f0d37f4">&#9670;&nbsp;</a></span>PythonWrapper</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModelPythonWrapper.html">PortfolioConstructionModelPythonWrapper</a> QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.PythonWrapper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is required due to a limitation in PythonNet to resolved overriden methods. When Python calls a C# method that calls a method that's overriden in python it won't run the python implementation unless the call is performed through python too. </p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00056">56</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="a4609336149bb2926f7b0487531354b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4609336149bb2926f7b0487531354b01">&#9670;&nbsp;</a></span>RebalanceOnSecurityChanges</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.RebalanceOnSecurityChanges = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if should rebalance portfolio on security changes. True by default </p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00039">39</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>

</div>
</div>
<a id="acb67319648225535f36c3675a61ee917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb67319648225535f36c3675a61ee917">&#9670;&nbsp;</a></span>RebalanceOnInsightChanges</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.RebalanceOnInsightChanges = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if should rebalance portfolio on new insights or expiration of insights. True by default </p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00044">44</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>

</div>
</div>
<a id="ae4a4fcde5cb81a59478b9453e69f7849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4a4fcde5cb81a59478b9453e69f7849">&#9670;&nbsp;</a></span>Algorithm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithm.html">IAlgorithm</a> QuantConnect.Algorithm.Framework.Portfolio.PortfolioConstructionModel.Algorithm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The algorithm instance </p>

<p class="definition">Definition at line <a class="el" href="PortfolioConstructionModel_8cs_source.html#l00049">49</a> of file <a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Algorithm/Portfolio/<a class="el" href="PortfolioConstructionModel_8cs_source.html">PortfolioConstructionModel.cs</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceQuantConnect.html">QuantConnect</a></li><li class="navelem"><a class="el" href="namespaceQuantConnect_1_1Algorithm.html">Algorithm</a></li><li class="navelem"><a class="el" href="namespaceQuantConnect_1_1Algorithm_1_1Framework.html">Framework</a></li><li class="navelem"><a class="el" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio.html">Portfolio</a></li><li class="navelem"><a class="el" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html">PortfolioConstructionModel</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
