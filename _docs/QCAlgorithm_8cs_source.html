<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lean: Algorithm/QCAlgorithm.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lean
   &#160;<span id="projectnumber">$LEAN_TAG$</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('QCAlgorithm_8cs_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">QCAlgorithm.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * QUANTCONNECT.COM - Democratizing Finance, Empowering Individuals.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Lean Algorithmic Trading Engine v2.0. Copyright 2014 QuantConnect Corporation.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * limitations under the License.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">using</span> System.Linq;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using</span> System.Linq.Expressions;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using</span> System.Globalization;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using</span> NodaTime;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using</span> NodaTime.TimeZones;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Benchmarks.html">Benchmarks</a>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Brokerages.html">Brokerages</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Data.html">Data</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Data.html">Data</a>.<a class="code" href="namespaceQuantConnect_1_1Data_1_1UniverseSelection.html">UniverseSelection</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Interfaces.html">Interfaces</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Notifications.html">Notifications</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Orders.html">Orders</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Parameters.html">Parameters</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Scheduling.html">Scheduling</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Securities.html">Securities</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Securities.html">Securities</a>.<a class="code" href="namespaceQuantConnect_1_1Securities_1_1Cfd.html">Cfd</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Securities.html">Securities</a>.<a class="code" href="namespaceQuantConnect_1_1Securities_1_1Equity.html">Equity</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Securities.html">Securities</a>.<a class="code" href="namespaceQuantConnect_1_1Securities_1_1Forex.html">Forex</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Securities.html">Securities</a>.<a class="code" href="namespaceQuantConnect_1_1Securities_1_1Option.html">Option</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Statistics.html">Statistics</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Util.html">Util</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">using</span> System.Collections.Concurrent;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Securities.html">Securities</a>.<a class="code" href="namespaceQuantConnect_1_1Securities_1_1Future.html">Future</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Securities.html">Securities</a>.<a class="code" href="namespaceQuantConnect_1_1Securities_1_1Crypto.html">Crypto</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm.html">Algorithm</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework.html">Framework</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas.html">Alphas</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm.html">Algorithm</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework.html">Framework</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Execution.html">Execution</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm.html">Algorithm</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework.html">Framework</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio.html">Portfolio</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm.html">Algorithm</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework.html">Framework</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Risk.html">Risk</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm.html">Algorithm</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework.html">Framework</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Selection.html">Selection</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm.html">Algorithm</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Selection.html">Selection</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Storage.html">Storage</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">using</span> Index = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Securities.html">Securities</a>.<a class="code" href="namespaceQuantConnect_1_1Securities_1_1Index.html">Index</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Index_1_1Index.html" title="INDEX Security Object Implementation for INDEX Assets">Index</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Securities.html">Securities</a>.<a class="code" href="namespaceQuantConnect_1_1Securities_1_1CryptoFuture.html">CryptoFuture</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm.html">Algorithm</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework.html">Framework</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas.html">Alphas</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Analysis.html">Analysis</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm.html">Algorithm</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework.html">Framework</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio.html">Portfolio</a>.<a class="code" href="namespaceQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1SignalExports.html">SignalExports</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="namespaceQuantConnect_1_1Data.html">Data</a>.<a class="code" href="namespaceQuantConnect_1_1Data_1_1Fundamental.html">Fundamental</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceQuantConnect_1_1Algorithm.html">QuantConnect.Algorithm</a></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">    /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">    /// QC Algorithm Base Class - Handle the basic requirements of a trading algorithm,</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">    /// allowing user to focus on event methods. The QCAlgorithm class implements Portfolio,</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">    /// Securities, Transactions and Data Subscription Management.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">    /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html">   62</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">partial class </span><a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html" title="QC Algorithm Base Class - Handle the basic requirements of a trading algorithm, allowing user to focu...">QCAlgorithm</a> : MarshalByRefObject, <a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithm.html" title="Interface for QuantConnect algorithm implementations. All algorithms must implement these basic membe...">IAlgorithm</a></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">        #region Documentation Attribute Categories</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> AddingData = <span class="stringliteral">&quot;Adding Data&quot;</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> AlgorithmFramework = <span class="stringliteral">&quot;Algorithm Framework&quot;</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> Charting = <span class="stringliteral">&quot;Charting&quot;</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> ConsolidatingData = <span class="stringliteral">&quot;Consolidating Data&quot;</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> HandlingData = <span class="stringliteral">&quot;Handling Data&quot;</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> HistoricalData = <span class="stringliteral">&quot;Historical Data&quot;</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> Indicators = <span class="stringliteral">&quot;Indicators&quot;</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> LiveTrading = <span class="stringliteral">&quot;Live Trading&quot;</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> Logging = <span class="stringliteral">&quot;Logging&quot;</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> MachineLearning = <span class="stringliteral">&quot;Machine Learning&quot;</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> Modeling = <span class="stringliteral">&quot;Modeling&quot;</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> ParameterAndOptimization = <span class="stringliteral">&quot;Parameter and Optimization&quot;</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> ScheduledEvents = <span class="stringliteral">&quot;Scheduled Events&quot;</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> SecuritiesAndPortfolio = <span class="stringliteral">&quot;Securities and Portfolio&quot;</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> TradingAndOrders = <span class="stringliteral">&quot;Trading and Orders&quot;</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> Universes = <span class="stringliteral">&quot;Universes&quot;</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> StatisticsTag = <span class="stringliteral">&quot;Statistics&quot;</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">        /// Maximum length of the name or tags of a backtest</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2b94870bcafa443cd2057077e0468bd8">   87</a></span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2b94870bcafa443cd2057077e0468bd8" title="Maximum length of the name or tags of a backtest">MaxNameAndTagsLength</a> = 200;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">        /// Maximum number of tags allowed for a backtest</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a153cf9c58f7342ac3ad2f27220040ace">   92</a></span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a153cf9c58f7342ac3ad2f27220040ace" title="Maximum number of tags allowed for a backtest">MaxTagsCount</a> = 100;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="classQuantConnect_1_1TimeKeeper.html" title="Provides a means of centralizing time for various time zones.">TimeKeeper</a> _timeKeeper;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keyword">private</span> <a class="code" href="classQuantConnect_1_1LocalTimeKeeper.html" title="Represents the current local time. This object is created via the TimeKeeper to manage conversions to...">LocalTimeKeeper</a> _localTimeKeeper;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">string</span> _name;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keyword">private</span> HashSet&lt;string&gt; _tags;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _tagsLimitReachedLogSent;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _tagsCollectionTruncatedLogSent;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keyword">private</span> DateTime _start;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keyword">private</span> DateTime _startDate;   <span class="comment">//Default start and end dates.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keyword">private</span> DateTime _endDate;     <span class="comment">//Default end to yesterday</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _locked;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _liveMode;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keyword">private</span> <a class="code" href="namespaceQuantConnect.html#a11f3427843701b79418a4a1bc919215e" title="Represents the deployment modes of an algorithm">AlgorithmMode</a> _algorithmMode;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keyword">private</span> <a class="code" href="namespaceQuantConnect.html#abc29bce5b5b69662b3b9f7b6664707f4" title="Represents the types deployment targets for algorithms">DeploymentTarget</a> _deploymentTarget;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">string</span> _algorithmId = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keyword">private</span> ConcurrentQueue&lt;string&gt; _debugMessages = <span class="keyword">new</span> ConcurrentQueue&lt;string&gt;();</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keyword">private</span> ConcurrentQueue&lt;string&gt; _logMessages = <span class="keyword">new</span> ConcurrentQueue&lt;string&gt;();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keyword">private</span> ConcurrentQueue&lt;string&gt; _errorMessages = <span class="keyword">new</span> ConcurrentQueue&lt;string&gt;();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keyword">private</span> <a class="code" href="interfaceQuantConnect_1_1Statistics_1_1IStatisticsService.html" title="This interface exposes methods for accessing algorithm statistics results at runtime.">IStatisticsService</a> _statisticsService;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keyword">private</span> <a class="code" href="interfaceQuantConnect_1_1Brokerages_1_1IBrokerageModel.html" title="Models brokerage transactions, fees, and order">IBrokerageModel</a> _brokerageModel;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="comment">//Error tracking to avoid message flooding:</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">string</span> _previousDebugMessage = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">string</span> _previousErrorMessage = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">        /// Gets the market hours database in use by this algorithm</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a68e4b9754cf691b49942bb3aa35be835">  122</a></span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> <a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html" title="Provides access to exchange hours and raw data times zones in various markets">MarketHoursDatabase</a> <a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html" title="Provides access to exchange hours and raw data times zones in various markets">MarketHoursDatabase</a> { <span class="keyword">get</span>; }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">        /// Gets the symbol properties database in use by this algorithm</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a547f0b7586e4ef3ad0f389f5d4abea5a">  127</a></span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> <a class="code" href="classQuantConnect_1_1Securities_1_1SymbolPropertiesDatabase.html" title="Provides access to specific properties for various symbols">SymbolPropertiesDatabase</a> <a class="code" href="classQuantConnect_1_1Securities_1_1SymbolPropertiesDatabase.html" title="Provides access to specific properties for various symbols">SymbolPropertiesDatabase</a> { <span class="keyword">get</span>; }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="comment">// used for calling through to void OnData(Slice) if no override specified</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _checkedForOnDataSlice;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keyword">private</span> Action&lt;Slice&gt; _onDataSlice;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="comment">// flips to true when the user</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _userSetSecurityInitializer;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="comment">// warmup resolution variables</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keyword">private</span> TimeSpan? _warmupTimeSpan;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span>? _warmupBarCount;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keyword">private</span> Dictionary&lt;string, string&gt; _parameters = <span class="keyword">new</span> Dictionary&lt;string, string&gt;();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keyword">private</span> <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html" title="Resolves standardized security definitions such as FIGI, CUSIP, ISIN, SEDOL into a properly mapped Le...">SecurityDefinitionSymbolResolver</a> _securityDefinitionSymbolResolver;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="classQuantConnect_1_1Data_1_1HistoryRequestFactory.html" title="Helper class used to create new HistoryRequest">HistoryRequestFactory</a> _historyRequestFactory;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keyword">private</span> <a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IApi.html" title="API for QuantConnect.com">IApi</a> _api;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">        /// QCAlgorithm Base Class Constructor - Initialize the underlying QCAlgorithm components.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">        /// QCAlgorithm manages the transactions, portfolio, charting and security subscriptions for the users algorithms.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a373d444cdc75004141f693cca0b10b1e">  150</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a373d444cdc75004141f693cca0b10b1e" title="QCAlgorithm Base Class Constructor - Initialize the underlying QCAlgorithm components....">QCAlgorithm</a>()</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9761fd68f9df7af645038e76c043a3fa" title="Public name for the algorithm as automatically generated by the IDE. Intended for helping distinguish...">Name</a> = GetType().Name;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0356e6ef8313a1cf5392246fa363b89" title="A list of tags associated with the algorithm or the backtest, useful for categorization">Tags</a> = <span class="keyword">new</span>();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2312f56a1d08945600f36b323738102b" title="Gets or sets the current status of the algorithm">Status</a> = <a class="code" href="namespaceQuantConnect.html#abbad02007d97da37e50e4b8cb8b52151" title="States of a live deployment.">AlgorithmStatus</a>.Running;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="comment">// AlgorithmManager will flip this when we&#39;re caught up with realtime</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9ae19647e6057693ee2a7702fd337e66" title="Gets whether or not this algorithm is still warming up">IsWarmingUp</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="comment">//Initialise the Algorithm Helper Classes:</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="comment">//- Note - ideally these wouldn&#39;t be here, but because of the DLL we need to make the classes shared across</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="comment">//  the Worker &amp; Algorithm, limiting ability to do anything else.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="comment">//Initialise Start Date:</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            _startDate = <span class="keyword">new</span> DateTime(1998, 01, 01);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="comment">// intialize our time keeper with only new york</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            _timeKeeper = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5d17601705f21252f20cb2d17d54be90" title="Gets the time keeper instance">TimeKeeper</a>(_startDate, <span class="keyword">new</span>[] { <a class="code" href="classQuantConnect_1_1TimeZones.html" title="Provides access to common time zones">TimeZones</a>.<a class="code" href="classQuantConnect_1_1TimeZones.html#aa530de3201390d37c1796bcbd3f3af7a" title="Gets the time zone for New York City, USA. This is a daylight savings time zone.">NewYork</a> });</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="comment">// set our local time zone</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            _localTimeKeeper = _timeKeeper.GetLocalTimeKeeper(<a class="code" href="classQuantConnect_1_1TimeZones.html" title="Provides access to common time zones">TimeZones</a>.<a class="code" href="classQuantConnect_1_1TimeZones.html#aa530de3201390d37c1796bcbd3f3af7a" title="Gets the time zone for New York City, USA. This is a daylight savings time zone.">NewYork</a>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="comment">//Initialise End Date:</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a943d15c5639b738612e96a146fde7fce" title="Set the end date for a backtest run">SetEndDate</a>(DateTime.UtcNow.ConvertFromUtc(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a>));</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="comment">// Set default algorithm mode as backtesting</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            _algorithmMode = <a class="code" href="namespaceQuantConnect.html#a11f3427843701b79418a4a1bc919215e" title="Represents the deployment modes of an algorithm">AlgorithmMode</a>.Backtesting;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="comment">// Set default deployment target as local</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            _deploymentTarget = <a class="code" href="namespaceQuantConnect.html#abc29bce5b5b69662b3b9f7b6664707f4" title="Represents the types deployment targets for algorithms">DeploymentTarget</a>.LocalPlatform;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            _securityDefinitionSymbolResolver = <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html" title="Resolves standardized security definitions such as FIGI, CUSIP, ISIN, SEDOL into a properly mapped Le...">SecurityDefinitionSymbolResolver</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#a98d74eef756c84fafb678470fb2a53c3" title="Gets the single instance of the symbol resolver">GetInstance</a>();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f" title="Gets the user settings for the algorithm">Settings</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1AlgorithmSettings.html" title="This class includes user settings for the algorithm which can be changed in the IAlgorithm....">AlgorithmSettings</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a058cd53b06eec2bff8d019a5b43a596a" title="Gets the default order properties">DefaultOrderProperties</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Orders_1_1OrderProperties.html" title="Contains additional properties and settings for an order">OrderProperties</a>();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="comment">//Initialise Data Manager</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa8610d2c99a49bc3bae925d52be78642" title="Generic Data Manager - Required for compiling all data feeds in order, and passing them into algorith...">SubscriptionManager</a>(_timeKeeper);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html" title="Enumerable security management class for grouping security objects into an array and providing any co...">SecurityManager</a>(_timeKeeper);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abd31d323023526ca3e7cae0dfd620134" title="Transaction Manager - Process transaction fills and order management.">Transactions</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityTransactionManager.html" title="Algorithm Transactions Manager - Recording Transactions">SecurityTransactionManager</a>(<span class="keyword">this</span>, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a442dd9df68f2b04aaaa9058e12c3fd1b" title="Portfolio object provieds easy access to the underlying security-holding properties; summed together ...">Portfolio</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityPortfolioManager.html" title="Portfolio manager class groups popular properties and makes them accessible through one interface....">SecurityPortfolioManager</a>(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abd31d323023526ca3e7cae0dfd620134" title="Transaction Manager - Process transaction fills and order management.">Transactions</a>, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f" title="Gets the user settings for the algorithm">Settings</a>, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a058cd53b06eec2bff8d019a5b43a596a" title="Gets the default order properties">DefaultOrderProperties</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a748fd4786e578652e6610cef67fe669a" title="SignalExport - Allows sending export signals to different 3rd party API&#39;s. For example,...">SignalExport</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1SignalExports_1_1SignalExportManager.html" title="Class manager to send portfolio targets to different 3rd party API&#39;s For example, it allows Collectiv...">SignalExportManager</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Brokerages_1_1DefaultBrokerageModel.html" title="Provides a default implementation of IBrokerageModel that allows all orders and uses the default tran...">DefaultBrokerageModel</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af39cc67f174e37f86383d92d44bb6a79" title="Gets the risk free interest rate model used to get the interest rates">RiskFreeInterestRateModel</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Data_1_1InterestRateProvider.html" title="Fed US Primary Credit Rate at given date">InterestRateProvider</a>();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6612d33e0a052713f72fd5da1c57b423" title="Notification Manager for Sending Live Runtime Notifications to users about important events.">Notify</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Notifications_1_1NotificationManager.html" title="Local/desktop implementation of messaging system for Lean Engine.">NotificationManager</a>(<span class="keyword">false</span>); <span class="comment">// Notification manager defaults to disabled.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="comment">//Initialise to unlocked:</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            _locked = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="comment">// get exchange hours loaded from the market-hours-database.csv in /Data/market-hours</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html" title="Provides access to exchange hours and raw data times zones in various markets">MarketHoursDatabase</a> = <a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html" title="Provides access to exchange hours and raw data times zones in various markets">MarketHoursDatabase</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html#aa01232d91c17c556b18ea8f1f7fabcd0" title="Gets the instance of the MarketHoursDatabase class produced by reading in the market hours data found...">FromDataFolder</a>();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <a class="code" href="classQuantConnect_1_1Securities_1_1SymbolPropertiesDatabase.html" title="Provides access to specific properties for various symbols">SymbolPropertiesDatabase</a> = <a class="code" href="classQuantConnect_1_1Securities_1_1SymbolPropertiesDatabase.html" title="Provides access to specific properties for various symbols">SymbolPropertiesDatabase</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SymbolPropertiesDatabase.html#aee26fb588793fd311c44eb8b2909cc33" title="Gets the instance of the SymbolPropertiesDatabase class produced by reading in the symbol properties ...">FromDataFolder</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="comment">// universe selection</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html" title="Manages the algorithm&#39;s collection of universes">UniverseManager</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a50f248bb024a2e886ea6c5a069a8c9b9" title="Gets universe manager which holds universes keyed by their symbol">UniverseManager</a>();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1Universe.html" title="Provides a base class for all universes to derive from.">Universe</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1UniverseDefinitions.html" title="Provides helpers for defining universes in algorithms">UniverseDefinitions</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afd9e30918bab39cac5a9a8ee79423cd7" title="Gets the universe settings to be used when adding securities via universe selection">UniverseSettings</a>(<a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>.Minute, <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, TimeSpan.FromDays(1));</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="comment">// initialize our scheduler, this acts as a liason to the real time handler</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa774ad0258a836858dd2e9f590b692aa" title="Gets schedule manager for adding/removing scheduled events">Schedule</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Scheduling_1_1ScheduleManager.html" title="Provides access to the real time handler&#39;s event scheduling feature">ScheduleManager</a>(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="comment">// initialize the trade builder</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3896f06fcdbb98b982fb39c963b8a939" title="Set the ITradeBuilder implementation to generate trades from executions and market price updates">SetTradeBuilder</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaa818cb713904ee40cf793797556c11a" title="Gets the Trade Builder to generate trades from executions">TradeBuilder</a>(<a class="code" href="namespaceQuantConnect_1_1Statistics.html#a2fe139f0be6a3175cdcb8bf601b5ebc9" title="The method used to group order fills into trades">FillGroupingMethod</a>.FillToFill, <a class="code" href="namespaceQuantConnect_1_1Statistics.html#aefe339a785ba658a644591989cb8541a" title="The method used to match offsetting order fills">FillMatchingMethod</a>.FIFO));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityInitializer.html" title="Provides static access to the Null security initializer">SecurityInitializer</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Securities_1_1BrokerageModelSecurityInitializer.html" title="Provides an implementation of ISecurityInitializer that initializes a security by settings the Securi...">BrokerageModelSecurityInitializer</a>(<a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a>, <a class="code" href="classQuantConnect_1_1Securities_1_1SecuritySeeder.html" title="Provides access to a null implementation for ISecuritySeeder">SecuritySeeder</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecuritySeeder.html#ae250e7a5a20d97e9aabde012ae935128" title="Gets an instance of ISecuritySeeder that is a no-op">Null</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1CandlestickPatterns.html" title="Provides helpers for using candlestick patterns">CandlestickPatterns</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4c961767aa6199b37c647fbb5f47efb0" title="Gets an instance to access the candlestick pattern helper methods">CandlestickPatterns</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="comment">// initialize trading calendar</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <a class="code" href="classQuantConnect_1_1TradingCalendar.html" title="Class represents trading calendar, populated with variety of events relevant to currently trading ins...">TradingCalendar</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4f2c5c0eae87504177a40b300e9340b6" title="Gets trading calendar populated with trading events">TradingCalendar</a>(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>, <a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html" title="Provides access to exchange hours and raw data times zones in various markets">MarketHoursDatabase</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad17a39eff331e0a209158e5a60aa8230" title="Gets the option chain provider, used to get the list of option contracts for an underlying symbol">OptionChainProvider</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1EmptyOptionChainProvider.html" title="An implementation of IOptionChainProvider that always returns an empty list of contracts">EmptyOptionChainProvider</a>();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2f6352969554c2a126a29b0a89517875" title="Gets the future chain provider, used to get the list of future contracts for an underlying symbol">FutureChainProvider</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Future_1_1EmptyFutureChainProvider.html" title="An implementation of IFutureChainProvider that always returns an empty list of contracts">EmptyFutureChainProvider</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            _historyRequestFactory = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Data_1_1HistoryRequestFactory.html" title="Helper class used to create new HistoryRequest">HistoryRequestFactory</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="comment">// set model defaults, universe selection set via PostInitialize</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6540dc5c1433dbe68358339ea41cfbcb" title="Sets the alpha model">SetAlpha</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1NullAlphaModel.html" title="Provides a null implementation of an alpha model">NullAlphaModel</a>());</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a388e494398c0a685cca0c73dc8fe0986" title="Sets the portfolio construction model">SetPortfolioConstruction</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1NullPortfolioConstructionModel.html" title="Provides an implementation of IPortfolioConstructionModel that does nothing">NullPortfolioConstructionModel</a>());</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac22a1e42e0e1f2f9815525d020294e79" title="Sets the execution model">SetExecution</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Execution_1_1ImmediateExecutionModel.html" title="Provides an implementation of IExecutionModel that immediately submits market orders to achieve the d...">ImmediateExecutionModel</a>());</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae04a91364c08f558df2974342cc3f99e" title="Sets the risk management model">SetRiskManagement</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Risk_1_1NullRiskManagementModel.html" title="Provides an implementation of IRiskManagementModel that does nothing">NullRiskManagementModel</a>());</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad353b51a9430d72fbe2f4c81ed1ecf95" title="Sets the universe selection model">SetUniverseSelection</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Selection_1_1NullUniverseSelectionModel.html" title="Provides a null implementation of IUniverseSelectionModel">NullUniverseSelectionModel</a>());</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6b4ca1439d3d03431598e801e2d45514" title="Gets the insight manager">Insights</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Analysis_1_1InsightManager.html" title="Encapsulates the storage of insights.">InsightManager</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">        /// Event fired when the algorithm generates insights</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AlgorithmFramework)]</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae515a97eedc1f50cd7db367b9aeac706">  238</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">event</span> AlgorithmEvent&lt;GeneratedInsightsCollection&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae515a97eedc1f50cd7db367b9aeac706" title="Event fired when the algorithm generates insights">InsightsGenerated</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">        /// Security collection is an array of the security objects such as Equities and FOREX. Securities data</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">        /// manages the properties of tradeable assets such as price, open and close time and holdings information.</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html" title="Enumerable security management class for grouping security objects into an array and providing any co...">SecurityManager</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a></div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3">  246</a></span>&#160;        {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keyword">set</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">        /// Read-only dictionary containing all active securities. An active security is</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">        /// a security that is currently selected by the universe or has holdings or open orders.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a32d06089f9cbafaa0279c68fe23009e5">  256</a></span>&#160;        <span class="keyword">public</span> IReadOnlyDictionary&lt;Symbol, Security&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a32d06089f9cbafaa0279c68fe23009e5" title="Read-only dictionary containing all active securities. An active security is a security that is curre...">ActiveSecurities</a> =&gt; <a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html" title="Manages the algorithm&#39;s collection of universes">UniverseManager</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html#a6f1481d706e34c88f5377f7a8b17b718" title="Read-only dictionary containing all active securities. An active security is a security that is curre...">ActiveSecurities</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">        /// Portfolio object provieds easy access to the underlying security-holding properties; summed together in a way to make them useful.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">        /// This saves the user time by providing common portfolio requests in a single</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityPortfolioManager.html" title="Portfolio manager class groups popular properties and makes them accessible through one interface....">SecurityPortfolioManager</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a442dd9df68f2b04aaaa9058e12c3fd1b" title="Portfolio object provieds easy access to the underlying security-holding properties; summed together ...">Portfolio</a></div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a442dd9df68f2b04aaaa9058e12c3fd1b">  264</a></span>&#160;        {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keyword">set</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">        /// Gets the account currency</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a74d2fff9cb296f6ac0ca584294a0a3f9">  273</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a74d2fff9cb296f6ac0ca584294a0a3f9" title="Gets the account currency">AccountCurrency</a> =&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a442dd9df68f2b04aaaa9058e12c3fd1b" title="Portfolio object provieds easy access to the underlying security-holding properties; summed together ...">Portfolio</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityPortfolioManager.html#a55b9064f1409763e64d164941a045b11" title="Gets the cash book that keeps track of all currency holdings (only settled cash)">CashBook</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1CashBook.html#a40248f22ef50f95eef548b64f6970823" title="Gets the base currency used">AccountCurrency</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">        /// Gets the time keeper instance</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5d17601705f21252f20cb2d17d54be90">  278</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ITimeKeeper.html" title="Interface implemented by TimeKeeper">ITimeKeeper</a> <a class="code" href="classQuantConnect_1_1TimeKeeper.html" title="Provides a means of centralizing time for various time zones.">TimeKeeper</a> =&gt; _timeKeeper;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">        /// Generic Data Manager - Required for compiling all data feeds in order, and passing them into algorithm event methods.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">        /// The subscription manager contains a list of the data feed&#39;s we&#39;re subscribed to and properties of each data feed.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a> <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a></div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa8610d2c99a49bc3bae925d52be78642">  286</a></span>&#160;        {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keyword">set</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">        /// SignalExport - Allows sending export signals to different 3rd party API&#39;s. For example, it allows to send signals</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">        /// to Collective2, CrunchDAO and Numerai API&#39;s</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1SignalExports_1_1SignalExportManager.html" title="Class manager to send portfolio targets to different 3rd party API&#39;s For example, it allows Collectiv...">SignalExportManager</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a748fd4786e578652e6610cef67fe669a" title="SignalExport - Allows sending export signals to different 3rd party API&#39;s. For example,...">SignalExport</a></div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a748fd4786e578652e6610cef67fe669a">  297</a></span>&#160;        {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">        /// The project id associated with this algorithm if any</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a02681bfa90c7a8ac8e68c87f5f427638" title="The project id associated with this algorithm if any">ProjectId</a></div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a02681bfa90c7a8ac8e68c87f5f427638">  305</a></span>&#160;        {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keyword">set</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">        /// Gets the brokerage model - used to model interactions with specific brokerages.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Brokerages_1_1IBrokerageModel.html" title="Models brokerage transactions, fees, and order">IBrokerageModel</a> <a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a></div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a09cc99181f99e49f00134f452e4cf309">  315</a></span>&#160;        {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <span class="keywordflow">return</span> _brokerageModel;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                _brokerageModel = value;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    <a class="code" href="namespaceQuantConnect_1_1Brokerages.html#af1d558797abc5053058f84d04daf7620" title="Specifices what transaction model and submit/execution rules to use">BrokerageName</a> = Brokerages.BrokerageModel.GetBrokerageName(_brokerageModel);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordflow">catch</span> (ArgumentOutOfRangeException)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    <span class="comment">// The brokerage model might be a custom one which has not a corresponding BrokerageName</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    <a class="code" href="namespaceQuantConnect_1_1Brokerages.html#af1d558797abc5053058f84d04daf7620" title="Specifices what transaction model and submit/execution rules to use">BrokerageName</a> = <a class="code" href="namespaceQuantConnect_1_1Brokerages.html#af1d558797abc5053058f84d04daf7620" title="Specifices what transaction model and submit/execution rules to use">BrokerageName</a>.Default;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">        /// Gets the brokerage name.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keyword">public</span> <a class="code" href="namespaceQuantConnect_1_1Brokerages.html#af1d558797abc5053058f84d04daf7620" title="Specifices what transaction model and submit/execution rules to use">BrokerageName</a> <a class="code" href="namespaceQuantConnect_1_1Brokerages.html#af1d558797abc5053058f84d04daf7620" title="Specifices what transaction model and submit/execution rules to use">BrokerageName</a></div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad8f30eb6866ad513e50f32d2ef985295">  340</a></span>&#160;        {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">        /// Gets the brokerage message handler used to decide what to do</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">        /// with each message sent from the brokerage</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Brokerages_1_1IBrokerageMessageHandler.html" title="Provides an plugin point to allow algorithms to directly handle the messages that come from their bro...">IBrokerageMessageHandler</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6dc685727ebf1cd6bed074e3ce6e47fc" title="Gets the brokerage message handler used to decide what to do with each message sent from the brokerag...">BrokerageMessageHandler</a></div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6dc685727ebf1cd6bed074e3ce6e47fc">  351</a></span>&#160;        {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keyword">set</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">        /// Gets the risk free interest rate model used to get the interest rates</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Data_1_1IRiskFreeInterestRateModel.html" title="Represents a model that provides risk free interest rate data">IRiskFreeInterestRateModel</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af39cc67f174e37f86383d92d44bb6a79" title="Gets the risk free interest rate model used to get the interest rates">RiskFreeInterestRateModel</a></div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af39cc67f174e37f86383d92d44bb6a79">  361</a></span>&#160;        {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">        /// Notification Manager for Sending Live Runtime Notifications to users about important events.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(LiveTrading)]</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Notifications_1_1NotificationManager.html" title="Local/desktop implementation of messaging system for Lean Engine.">NotificationManager</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6612d33e0a052713f72fd5da1c57b423" title="Notification Manager for Sending Live Runtime Notifications to users about important events.">Notify</a></div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6612d33e0a052713f72fd5da1c57b423">  371</a></span>&#160;        {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keyword">set</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">        /// Gets schedule manager for adding/removing scheduled events</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ScheduledEvents)]</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Scheduling_1_1ScheduleManager.html" title="Provides access to the real time handler&#39;s event scheduling feature">ScheduleManager</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa774ad0258a836858dd2e9f590b692aa" title="Gets schedule manager for adding/removing scheduled events">Schedule</a></div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa774ad0258a836858dd2e9f590b692aa">  381</a></span>&#160;        {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">        /// Gets or sets the current status of the algorithm</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keyword">public</span> <a class="code" href="namespaceQuantConnect.html#abbad02007d97da37e50e4b8cb8b52151" title="States of a live deployment.">AlgorithmStatus</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2312f56a1d08945600f36b323738102b" title="Gets or sets the current status of the algorithm">Status</a></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2312f56a1d08945600f36b323738102b">  391</a></span>&#160;        {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keyword">set</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">        /// Gets an instance that is to be used to initialize newly created securities.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Securities_1_1ISecurityInitializer.html" title="Represents a type capable of initializing a new security">ISecurityInitializer</a> <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityInitializer.html" title="Provides static access to the Null security initializer">SecurityInitializer</a></div>
<div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6a1d8a2a42a806543cf215d10da0d761">  401</a></span>&#160;        {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">        /// Gets the Trade Builder to generate trades from executions</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ITradeBuilder.html" title="Generates trades from executions and market price updates">ITradeBuilder</a> <a class="code" href="classQuantConnect_1_1Statistics_1_1TradeBuilder.html" title="The TradeBuilder class generates trades from executions and market price updates">TradeBuilder</a></div>
<div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaa818cb713904ee40cf793797556c11a">  411</a></span>&#160;        {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">        /// Gets an instance to access the candlestick pattern helper methods</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Indicators)]</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1CandlestickPatterns.html" title="Provides helpers for using candlestick patterns">CandlestickPatterns</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1CandlestickPatterns.html" title="Provides helpers for using candlestick patterns">CandlestickPatterns</a></div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4c961767aa6199b37c647fbb5f47efb0">  421</a></span>&#160;        {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">        /// Gets the date rules helper object to make specifying dates for events easier</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ScheduledEvents)]</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Scheduling_1_1DateRules.html" title="Helper class used to provide better syntax when defining date rules">DateRules</a> <a class="code" href="classQuantConnect_1_1Scheduling_1_1DateRules.html" title="Helper class used to provide better syntax when defining date rules">DateRules</a></div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a108748cbcd2b30bba9f88b870832088d">  431</a></span>&#160;        {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa774ad0258a836858dd2e9f590b692aa" title="Gets schedule manager for adding/removing scheduled events">Schedule</a>.<a class="code" href="classQuantConnect_1_1Scheduling_1_1ScheduleManager.html#a841e243aeeffc9b96cb7e633c197f2ac" title="Gets the date rules helper object to make specifying dates for events easier">DateRules</a>; }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">        /// Gets the time rules helper object to make specifying times for events easier</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ScheduledEvents)]</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Scheduling_1_1TimeRules.html" title="Helper class used to provide better syntax when defining time rules">TimeRules</a> <a class="code" href="classQuantConnect_1_1Scheduling_1_1TimeRules.html" title="Helper class used to provide better syntax when defining time rules">TimeRules</a></div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5cd63a497c89a96ba6a391fc2c2e4930">  440</a></span>&#160;        {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa774ad0258a836858dd2e9f590b692aa" title="Gets schedule manager for adding/removing scheduled events">Schedule</a>.<a class="code" href="classQuantConnect_1_1Scheduling_1_1ScheduleManager.html#ae790c15a41a88289e6e1b192d6eda096" title="Gets the time rules helper object to make specifying times for events easier">TimeRules</a>; }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">        /// Gets trading calendar populated with trading events</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ScheduledEvents)]</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1TradingCalendar.html" title="Class represents trading calendar, populated with variety of events relevant to currently trading ins...">TradingCalendar</a> <a class="code" href="classQuantConnect_1_1TradingCalendar.html" title="Class represents trading calendar, populated with variety of events relevant to currently trading ins...">TradingCalendar</a></div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4f2c5c0eae87504177a40b300e9340b6">  449</a></span>&#160;        {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">        /// Gets the user settings for the algorithm</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithmSettings.html" title="User settings for the algorithm which can be changed in the IAlgorithm.Initialize method">IAlgorithmSettings</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f" title="Gets the user settings for the algorithm">Settings</a></div>
<div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f">  459</a></span>&#160;        {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">        /// Gets the option chain provider, used to get the list of option contracts for an underlying symbol</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad17a39eff331e0a209158e5a60aa8230">  468</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IOptionChainProvider.html" title="Provides the full option chain for a given underlying.">IOptionChainProvider</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad17a39eff331e0a209158e5a60aa8230" title="Gets the option chain provider, used to get the list of option contracts for an underlying symbol">OptionChainProvider</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">        /// Gets the future chain provider, used to get the list of future contracts for an underlying symbol</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2f6352969554c2a126a29b0a89517875">  474</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IFutureChainProvider.html" title="Provides the full future chain for a given underlying.">IFutureChainProvider</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2f6352969554c2a126a29b0a89517875" title="Gets the future chain provider, used to get the list of future contracts for an underlying symbol">FutureChainProvider</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">        /// Gets the default order properties</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a058cd53b06eec2bff8d019a5b43a596a">  480</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IOrderProperties.html" title="Contains additional properties and settings for an order">IOrderProperties</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a058cd53b06eec2bff8d019a5b43a596a" title="Gets the default order properties">DefaultOrderProperties</a> { <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">        /// Public name for the algorithm as automatically generated by the IDE. Intended for helping distinguish logs by noting</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">        /// the algorithm-id.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;AlgorithmId&quot;/&gt;</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9761fd68f9df7af645038e76c043a3fa" title="Public name for the algorithm as automatically generated by the IDE. Intended for helping distinguish...">Name</a></div>
<div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9761fd68f9df7af645038e76c043a3fa">  489</a></span>&#160;        {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <span class="keywordflow">return</span> _name;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="keyword">set</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                <span class="keywordflow">if</span> (_locked)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Cannot set algorithm name after it is initialized.&quot;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(value))</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    _name = value.Truncate(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2b94870bcafa443cd2057077e0468bd8" title="Maximum length of the name or tags of a backtest">MaxNameAndTagsLength</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">        /// A list of tags associated with the algorithm or the backtest, useful for categorization</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keyword">public</span> HashSet&lt;string&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0356e6ef8313a1cf5392246fa363b89" title="A list of tags associated with the algorithm or the backtest, useful for categorization">Tags</a></div>
<div class="line"><a name="l00513"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0356e6ef8313a1cf5392246fa363b89">  513</a></span>&#160;        {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="keywordflow">return</span> _tags;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keyword">set</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="keywordflow">if</span> (value == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                var tags = value.Where(x =&gt; !<span class="keywordtype">string</span>.IsNullOrEmpty(x?.Trim())).ToList();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="keywordflow">if</span> (tags.Count &gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a153cf9c58f7342ac3ad2f27220040ace" title="Maximum number of tags allowed for a backtest">MaxTagsCount</a> &amp;&amp; !_tagsCollectionTruncatedLogSent)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                    <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a67b117790972c1715ab8b85742d4bfb7" title="Added another method for logging if user guessed.">Log</a>($<span class="stringliteral">&quot;Warning: The tags collection cannot contain more than {MaxTagsCount} items. It will be truncated.&quot;</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                    _tagsCollectionTruncatedLogSent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                _tags = tags.Take(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a153cf9c58f7342ac3ad2f27220040ace" title="Maximum number of tags allowed for a backtest">MaxTagsCount</a>).ToHashSet(tag =&gt; tag.Truncate(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2b94870bcafa443cd2057077e0468bd8" title="Maximum length of the name or tags of a backtest">MaxNameAndTagsLength</a>));</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                <span class="keywordflow">if</span> (_locked)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                    <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a50e04c814f8c199d22dd57474a1b157b" title="Event fired when the tag collection is updated">TagsUpdated</a>?.Invoke(<span class="keyword">this</span>, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0356e6ef8313a1cf5392246fa363b89" title="A list of tags associated with the algorithm or the backtest, useful for categorization">Tags</a>);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">        /// Event fired algorithm&#39;s name is changed</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa7d17582f69f8290fb3409be36f06ac9">  545</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">event</span> AlgorithmEvent&lt;string&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa7d17582f69f8290fb3409be36f06ac9" title="Event fired algorithm&#39;s name is changed">NameUpdated</a>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">        /// Event fired when the tag collection is updated</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a50e04c814f8c199d22dd57474a1b157b">  551</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">event</span> AlgorithmEvent&lt;HashSet&lt;string&gt;&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a50e04c814f8c199d22dd57474a1b157b" title="Event fired when the tag collection is updated">TagsUpdated</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">        /// Read-only value for current time frontier of the algorithm in terms of the &lt;see cref=&quot;TimeZone&quot;/&gt;</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">        /// &lt;remarks&gt;During backtesting this is primarily sourced from the data feed. During live trading the time is updated from the system clock.&lt;/remarks&gt;</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keyword">public</span> DateTime <a class="code" href="classQuantConnect_1_1Time.html" title="Time helper class collection for working with trading dates">Time</a></div>
<div class="line"><a name="l00559"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6caab29102333276e730049b524ef15b">  559</a></span>&#160;        {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _localTimeKeeper.<a class="code" href="classQuantConnect_1_1LocalTimeKeeper.html#a34c9d57064cc7914f8db3afb7934091a" title="Gets the current time in terms of the TimeZone">LocalTime</a>; }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">        /// Current date/time in UTC.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keyword">public</span> DateTime <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6b56996a2ee6921682811ddf293914a3" title="Current date/time in UTC.">UtcTime</a></div>
<div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6b56996a2ee6921682811ddf293914a3">  568</a></span>&#160;        {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _timeKeeper.UtcTime; }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">        /// Gets the time zone used for the &lt;see cref=&quot;Time&quot;/&gt; property. The default value</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">        /// is &lt;see cref=&quot;TimeZones.NewYork&quot;/&gt;</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keyword">public</span> DateTimeZone <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a></div>
<div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030">  578</a></span>&#160;        {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _localTimeKeeper.<a class="code" href="classQuantConnect_1_1LocalTimeKeeper.html#addd1b7f7ac4ba354c7c3524f34d7b8e5" title="Gets the time zone of this LocalTimeKeeper">TimeZone</a>; }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">        /// Value of the user set start-date from the backtest.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">        /// &lt;remarks&gt;This property is set with SetStartDate() and defaults to the earliest QuantConnect data available - Jan 1st 1998. It is ignored during live trading &lt;/remarks&gt;</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;SetStartDate(DateTime)&quot;/&gt;</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a15bc5f5333321a439cf388ad60e0b652">  588</a></span>&#160;        <span class="keyword">public</span> DateTime <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a15bc5f5333321a439cf388ad60e0b652" title="Value of the user set start-date from the backtest.">StartDate</a> =&gt; _startDate;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">        /// Value of the user set start-date from the backtest. Controls the period of the backtest.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">        /// &lt;remarks&gt; This property is set with SetEndDate() and defaults to today. It is ignored during live trading.&lt;/remarks&gt;</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;SetEndDate(DateTime)&quot;/&gt;</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keyword">public</span> DateTime <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ab0169adf4bf5ffb982a70d6bf6d10a66" title="Value of the user set start-date from the backtest. Controls the period of the backtest.">EndDate</a></div>
<div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ab0169adf4bf5ffb982a70d6bf6d10a66">  597</a></span>&#160;        {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="keywordflow">return</span> _endDate;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">        /// Algorithm Id for this backtest or live algorithm.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">        /// &lt;remarks&gt;A unique identifier for &lt;/remarks&gt;</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac58a9dfc50b8eca418316ebd6049f53b" title="Algorithm Id for this backtest or live algorithm.">AlgorithmId</a></div>
<div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac58a9dfc50b8eca418316ebd6049f53b">  610</a></span>&#160;        {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <span class="keywordflow">return</span> _algorithmId;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">        /// Boolean property indicating the algorithm is currently running in live mode.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">        /// &lt;remarks&gt;Intended for use where certain behaviors will be enabled while the algorithm is trading live: such as notification emails, or displaying runtime statistics.&lt;/remarks&gt;</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(LiveTrading)]</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5589ce6040feaa092de0d8a8da8e6ee5" title="Boolean property indicating the algorithm is currently running in live mode.">LiveMode</a></div>
<div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5589ce6040feaa092de0d8a8da8e6ee5">  623</a></span>&#160;        {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                <span class="keywordflow">return</span> _liveMode;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">        /// Algorithm running mode.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="namespaceQuantConnect.html#a11f3427843701b79418a4a1bc919215e" title="Represents the deployment modes of an algorithm">AlgorithmMode</a> <a class="code" href="namespaceQuantConnect.html#a11f3427843701b79418a4a1bc919215e" title="Represents the deployment modes of an algorithm">AlgorithmMode</a></div>
<div class="line"><a name="l00634"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2febb4892ea2cecfd077b212842fd737">  634</a></span>&#160;        {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                <span class="keywordflow">return</span> _algorithmMode;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">        /// Deployment target, either local or cloud.</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="namespaceQuantConnect.html#abc29bce5b5b69662b3b9f7b6664707f4" title="Represents the types deployment targets for algorithms">DeploymentTarget</a> <a class="code" href="namespaceQuantConnect.html#abc29bce5b5b69662b3b9f7b6664707f4" title="Represents the types deployment targets for algorithms">DeploymentTarget</a></div>
<div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ab41b9b25f8ac49eb0d6d76cee5c0fa43">  645</a></span>&#160;        {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <span class="keywordflow">return</span> _deploymentTarget;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">        /// Storage for debugging messages before the event handler has passed control back to the Lean Engine.</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(string)&quot;/&gt;</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keyword">public</span> ConcurrentQueue&lt;string&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aac4edb4d026c64b8dcfb72be1ea4b9ce" title="Storage for debugging messages before the event handler has passed control back to the Lean Engine.">DebugMessages</a></div>
<div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aac4edb4d026c64b8dcfb72be1ea4b9ce">  658</a></span>&#160;        {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <span class="keywordflow">return</span> _debugMessages;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <span class="keyword">set</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                _debugMessages = value;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">        /// Storage for log messages before the event handlers have passed control back to the Lean Engine.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(string)&quot;/&gt;</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keyword">public</span> ConcurrentQueue&lt;string&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a29049d098d3f6524b6fc38128f1e82b2" title="Storage for log messages before the event handlers have passed control back to the Lean Engine.">LogMessages</a></div>
<div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a29049d098d3f6524b6fc38128f1e82b2">  675</a></span>&#160;        {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <span class="keywordflow">return</span> _logMessages;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <span class="keyword">set</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                _logMessages = value;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">        /// Gets the run time error from the algorithm, or null if none was encountered.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l00690"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a1e0d31ef0435a2c591415416dac8f3a2">  690</a></span>&#160;        <span class="keyword">public</span> Exception <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a1e0d31ef0435a2c591415416dac8f3a2" title="Gets the run time error from the algorithm, or null if none was encountered.">RunTimeError</a> { <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">        /// List of error messages generated by the user&#39;s code calling the &quot;Error&quot; function.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">        /// &lt;remarks&gt;This method is best used within a try-catch bracket to handle any runtime errors from a user algorithm.&lt;/remarks&gt;</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">        /// &lt;see cref=&quot;Error(string)&quot;/&gt;</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keyword">public</span> ConcurrentQueue&lt;string&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a15d2797b995bc9428fd8c0b0c4c46a5f" title="List of error messages generated by the user&#39;s code calling the &quot;Error&quot; function.">ErrorMessages</a></div>
<div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a15d2797b995bc9428fd8c0b0c4c46a5f">  699</a></span>&#160;        {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                <span class="keywordflow">return</span> _errorMessages;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keyword">set</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                _errorMessages = value;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">        /// Returns the current Slice object</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adae1942237ef0b4a4221024648c80a1b">  714</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Data_1_1Slice.html" title="Provides a data structure for all of an algorithm&#39;s data at a single time step">Slice</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adae1942237ef0b4a4221024648c80a1b" title="Returns the current Slice object">CurrentSlice</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">        /// Gets the object store, used for persistence</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(MachineLearning)]</div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aac77f8136f4f81065027b841e301f921">  721</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Storage_1_1ObjectStore.html" title="Helper class for easier access to IObjectStore methods">ObjectStore</a> <a class="code" href="classQuantConnect_1_1Storage_1_1ObjectStore.html" title="Helper class for easier access to IObjectStore methods">ObjectStore</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">        /// The current statistics for the running algorithm.</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(StatisticsTag)]</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Statistics_1_1StatisticsResults.html" title="The StatisticsResults class represents total and rolling statistics for an algorithm">StatisticsResults</a> <a class="code" href="classQuantConnect_1_1Statistics_1_1Statistics.html" title="Calculate all the statistics required from the backtest, based on the equity curve and the profit los...">Statistics</a></div>
<div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a98e526ce5e818aaaf04944b124e357f1">  728</a></span>&#160;        {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                <span class="keywordflow">return</span> _statisticsService?.<a class="code" href="interfaceQuantConnect_1_1Statistics_1_1IStatisticsService.html#a8564fe76f72439794b6c0b785c8e4f0a" title="Calculates and gets the current statistics for the algorithm">StatisticsResults</a>() ?? <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Statistics_1_1StatisticsResults.html" title="The StatisticsResults class represents total and rolling statistics for an algorithm">StatisticsResults</a>();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">        /// Initialise the data and resolution required, as well as the cash and start-end dates for your algorithm. All algorithms must initialized.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;SetStartDate(DateTime)&quot;/&gt;</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;SetEndDate(DateTime)&quot;/&gt;</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;SetCash(decimal)&quot;/&gt;</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AlgorithmFramework)]</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9b5dc3e2a5fa525e75b528e5ce81b274">  743</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9b5dc3e2a5fa525e75b528e5ce81b274" title="Initialise the data and resolution required, as well as the cash and start-end dates for your algorit...">Initialize</a>()</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            <span class="comment">//Setup Required Data</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> NotImplementedException(<span class="stringliteral">&quot;Please override the Initialize() method&quot;</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">        /// Called by setup handlers after Initialize and allows the algorithm a chance to organize</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">        /// the data gather in the Initialize method</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AlgorithmFramework)]</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad8a5d8d6d6fd62a8a3962f0649567804">  755</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad8a5d8d6d6fd62a8a3962f0649567804" title="Called by setup handlers after Initialize and allows the algorithm a chance to organize the data gath...">PostInitialize</a>()</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <span class="keywordflow">if</span> (_endDate &lt; _startDate)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Please select an algorithm end date greater than start date.&quot;</span>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            var portfolioConstructionModel = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa3f9c4491805a0c6c5002562448ab198" title="Gets or sets the portfolio construction model">PortfolioConstruction</a> as <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html" title="Provides a base class for portfolio construction models">PortfolioConstructionModel</a>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="keywordflow">if</span> (portfolioConstructionModel != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <span class="comment">// only override default values if user set the algorithm setting</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f" title="Gets the user settings for the algorithm">Settings</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithmSettings.html#ae17cc9956af285e77eaaf354af283f02" title="True if should rebalance portfolio on security changes. True by default">RebalancePortfolioOnSecurityChanges</a>.HasValue)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                    portfolioConstructionModel.<a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Portfolio_1_1PortfolioConstructionModel.html#a4609336149bb2926f7b0487531354b01" title="True if should rebalance portfolio on security changes. True by default">RebalanceOnSecurityChanges</a></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                        = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f" title="Gets the user settings for the algorithm">Settings</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithmSettings.html#ae17cc9956af285e77eaaf354af283f02" title="True if should rebalance portfolio on security changes. True by default">RebalancePortfolioOnSecurityChanges</a>.Value;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f" title="Gets the user settings for the algorithm">Settings</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithmSettings.html#ab511ef603ca212998eb4e4845d015c7a" title="True if should rebalance portfolio on new insights or expiration of insights. True by default">RebalancePortfolioOnInsightChanges</a>.HasValue)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                    portfolioConstructionModel.RebalanceOnInsightChanges</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                        = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f" title="Gets the user settings for the algorithm">Settings</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithmSettings.html#ab511ef603ca212998eb4e4845d015c7a" title="True if should rebalance portfolio on new insights or expiration of insights. True by default">RebalancePortfolioOnInsightChanges</a>.Value;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f" title="Gets the user settings for the algorithm">Settings</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithmSettings.html#ab511ef603ca212998eb4e4845d015c7a" title="True if should rebalance portfolio on new insights or expiration of insights. True by default">RebalancePortfolioOnInsightChanges</a>.HasValue</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                    || <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a499c1abc3c9d67c770b5265db5eddb8f" title="Gets the user settings for the algorithm">Settings</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IAlgorithmSettings.html#ae17cc9956af285e77eaaf354af283f02" title="True if should rebalance portfolio on security changes. True by default">RebalancePortfolioOnSecurityChanges</a>.HasValue)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                    <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>(<span class="stringliteral">&quot;Warning: rebalance portfolio settings are set but not supported by the current IPortfolioConstructionModel type: &quot;</span> +</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                          $<span class="stringliteral">&quot;{PortfolioConstruction.GetType()}&quot;</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a975ad7e9fe2cf71b44d700d56305d0d4" title="Called by setup handlers after Initialize and allows the algorithm a chance to organize the data gath...">FrameworkPostInitialize</a>();</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="comment">// if the benchmark hasn&#39;t been set yet, load in the default from the brokerage model</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a29116bba518b05e74733916d3bfc0e09" title="Benchmark">Benchmark</a> == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a29116bba518b05e74733916d3bfc0e09" title="Benchmark">Benchmark</a> = <a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a>.GetBenchmark(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <span class="comment">// Check benchmark timezone against algorithm timezone to warn for misaligned statistics</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a29116bba518b05e74733916d3bfc0e09" title="Benchmark">Benchmark</a> is <a class="code" href="classQuantConnect_1_1Benchmarks_1_1SecurityBenchmark.html" title="Creates a benchmark defined by the closing price of a Security instance">SecurityBenchmark</a> securityBenchmark)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                <span class="comment">// Only warn on algorithms subscribed to daily resolution as its statistics will suffer the most</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                var subscription = <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#ad47f403e3554916a1f02ea565da62d19" title="Returns an IEnumerable of Subscriptions">Subscriptions</a>.OrderByDescending(x =&gt; x.Resolution).FirstOrDefault();</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                var benchmarkTimeZone = <a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html" title="Provides access to exchange hours and raw data times zones in various markets">MarketHoursDatabase</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html#a92534128098fef25ab73e8d2faf58793" title="Performs a lookup using the specified information and returns the data&#39;s time zone if found,...">GetDataTimeZone</a>(securityBenchmark.Security.Symbol.ID.Market,</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                    securityBenchmark.Security.Symbol, securityBenchmark.Security.Type);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <span class="keywordflow">if</span> ((subscription?.<a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a> == <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>.Daily || <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html#a3d395f0e035c26ad7db88ef25249b26c" title="The resolution to be used">Resolution</a> == <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>.Daily) &amp;&amp; benchmarkTimeZone != <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a>)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                    <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a67b117790972c1715ab8b85742d4bfb7" title="Added another method for logging if user guessed.">Log</a>($<span class="stringliteral">&quot;QCAlgorithm.PostInitialize(): Warning: Using a security benchmark of a different timezone ({benchmarkTimeZone})&quot;</span> +</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                        $<span class="stringliteral">&quot; than the algorithm TimeZone ({TimeZone}) may lead to skewed and incorrect statistics. Use a higher resolution than daily to minimize.&quot;</span>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            <span class="keywordflow">if</span> (TryGetWarmupHistoryStartTime(out var result))</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2db914b00bbdc25368ee154f931fc0" title="Update the internal algorithm time frontier.">SetDateTime</a>(result.ConvertToUtc(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a>));</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a241dc95c0b1bc8926c4fde785c30c29d" title="Sets IAlgorithm.IsWarmingUp to false to indicate this algorithm has finished its warm up">SetFinishedWarmingUp</a>();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            <span class="comment">// perform end of time step checks, such as enforcing underlying securities are in raw data mode</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a726d08cd0cd7a6f1b7ce9a912d7d89b1" title="Invoked at the end of every time step. This allows the algorithm to process events before advancing t...">OnEndOfTimeStep</a>();</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">        /// Called when the algorithm has completed initialization and warm up.</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a313bcad167fedbf979a1a7ad4ef30ea2">  826</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a313bcad167fedbf979a1a7ad4ef30ea2" title="Called when the algorithm has completed initialization and warm up.">OnWarmupFinished</a>()</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">        /// Gets the parameter with the specified name. If a parameter with the specified name does not exist,</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">        /// the given default value is returned if any, else null</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">        /// &lt;param name=&quot;name&quot;&gt;The name of the parameter to get&lt;/param&gt;</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">        /// &lt;param name=&quot;defaultValue&quot;&gt;The default value to return&lt;/param&gt;</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">        /// &lt;returns&gt;The value of the specified parameter, or defaultValue if not found or null if there&#39;s no default value&lt;/returns&gt;</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ParameterAndOptimization)]</div>
<div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae566eb5c452810e1d1ecafc89761b586">  838</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae566eb5c452810e1d1ecafc89761b586" title="Gets the parameter with the specified name. If a parameter with the specified name does not exist,...">GetParameter</a>(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> defaultValue = <span class="keyword">null</span>)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <span class="keywordflow">return</span> _parameters.TryGetValue(name, out var value) ? value : defaultValue;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">        /// Gets the parameter with the specified name parsed as an integer. If a parameter with the specified name does not exist,</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">        /// or the conversion is not possible, the given default value is returned</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">        /// &lt;param name=&quot;name&quot;&gt;The name of the parameter to get&lt;/param&gt;</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">        /// &lt;param name=&quot;defaultValue&quot;&gt;The default value to return&lt;/param&gt;</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">        /// &lt;returns&gt;The value of the specified parameter, or defaultValue if not found or null if there&#39;s no default value&lt;/returns&gt;</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ParameterAndOptimization)]</div>
<div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0a53f893c94909a7d9ff95b0e0686fdc">  851</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0a53f893c94909a7d9ff95b0e0686fdc" title="Gets the parameter with the specified name parsed as an integer. If a parameter with the specified na...">GetParameter</a>(<span class="keywordtype">string</span> name, <span class="keywordtype">int</span> defaultValue)</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keywordflow">return</span> _parameters.TryGetValue(name, out var strValue) &amp;&amp; <span class="keywordtype">int</span>.TryParse(strValue, out var value) ? value : defaultValue;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">        /// Gets the parameter with the specified name parsed as a double. If a parameter with the specified name does not exist,</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">        /// or the conversion is not possible, the given default value is returned</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">        /// &lt;param name=&quot;name&quot;&gt;The name of the parameter to get&lt;/param&gt;</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">        /// &lt;param name=&quot;defaultValue&quot;&gt;The default value to return&lt;/param&gt;</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">        /// &lt;returns&gt;The value of the specified parameter, or defaultValue if not found or null if there&#39;s no default value&lt;/returns&gt;</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ParameterAndOptimization)]</div>
<div class="line"><a name="l00864"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a86521e9abb956051b474a83447661271">  864</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">double</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a86521e9abb956051b474a83447661271" title="Gets the parameter with the specified name parsed as a double. If a parameter with the specified name...">GetParameter</a>(<span class="keywordtype">string</span> name, <span class="keywordtype">double</span> defaultValue)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <span class="keywordflow">return</span> _parameters.TryGetValue(name, out var strValue) &amp;&amp;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                <span class="keywordtype">double</span>.TryParse(strValue, NumberStyles.Any, CultureInfo.InvariantCulture, out var value) ? value : defaultValue;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">        /// Gets the parameter with the specified name parsed as a decimal. If a parameter with the specified name does not exist,</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">        /// or the conversion is not possible, the given default value is returned</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">        /// &lt;param name=&quot;name&quot;&gt;The name of the parameter to get&lt;/param&gt;</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">        /// &lt;param name=&quot;defaultValue&quot;&gt;The default value to return&lt;/param&gt;</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">        /// &lt;returns&gt;The value of the specified parameter, or defaultValue if not found or null if there&#39;s no default value&lt;/returns&gt;</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ParameterAndOptimization)]</div>
<div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad7e3651765449ffea8c0e6658b7cb6a2">  878</a></span>&#160;        <span class="keyword">public</span> decimal <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad7e3651765449ffea8c0e6658b7cb6a2" title="Gets the parameter with the specified name parsed as a decimal. If a parameter with the specified nam...">GetParameter</a>(<span class="keywordtype">string</span> name, decimal defaultValue)</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <span class="keywordflow">return</span> _parameters.TryGetValue(name, out var strValue) &amp;&amp;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                decimal.TryParse(strValue, NumberStyles.Any, CultureInfo.InvariantCulture, out var value) ? value : defaultValue;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">        /// Gets a read-only dictionary with all current parameters</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ParameterAndOptimization)]</div>
<div class="line"><a name="l00888"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9dd24a53da63ccd8fdcbe6b5d9ea8716">  888</a></span>&#160;        <span class="keyword">public</span> IReadOnlyDictionary&lt;string, string&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9dd24a53da63ccd8fdcbe6b5d9ea8716" title="Gets a read-only dictionary with all current parameters">GetParameters</a>()</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            <span class="keywordflow">return</span> _parameters.ToReadOnlyDictionary();</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">        /// Sets the parameters from the dictionary</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">        /// &lt;param name=&quot;parameters&quot;&gt;Dictionary containing the parameter names to values&lt;/param&gt;</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ParameterAndOptimization)]</div>
<div class="line"><a name="l00898"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a362b787753575a04c394fbfcb88b0a0f">  898</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a362b787753575a04c394fbfcb88b0a0f" title="Sets the parameters from the dictionary">SetParameters</a>(Dictionary&lt;string, string&gt; parameters)</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="comment">// save off a copy and try to apply the parameters</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            _parameters = parameters.ToDictionary();</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                <a class="code" href="classQuantConnect_1_1Parameters_1_1ParameterAttribute.html" title="Specifies a field or property is a parameter that can be set from an AlgorithmNodePacket....">ParameterAttribute</a>.<a class="code" href="classQuantConnect_1_1Parameters_1_1ParameterAttribute.html#a9ef494761b21bf65705abdfac5ee0a7c" title="Uses reflections to inspect the instance for any parameter attributes. If a value is found in the par...">ApplyAttributes</a>(parameters, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">catch</span> (Exception err)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7bdcfe7bf87e4688620dfc0cbac212aa" title="Send a string error message to the Console.">Error</a>(<span class="stringliteral">&quot;Error applying parameter values: &quot;</span> + err.Message);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">        /// Set the available data feeds in the &lt;see cref=&quot;SecurityManager&quot;/&gt;</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">        /// &lt;param name=&quot;availableDataTypes&quot;&gt;The different &lt;see cref=&quot;TickType&quot;/&gt; each &lt;see cref=&quot;Security&quot;/&gt; supports&lt;/param&gt;</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l00917"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3ab6afcbd06e109a12f2fcc216c40126">  917</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3ab6afcbd06e109a12f2fcc216c40126" title="Set the available data feeds in the SecurityManager">SetAvailableDataTypes</a>(Dictionary&lt;<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>, List&lt;TickType&gt;&gt; availableDataTypes)</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            <span class="keywordflow">if</span> (availableDataTypes == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            <span class="keywordflow">foreach</span> (var dataFeed <span class="keywordflow">in</span> availableDataTypes)</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a77f8ffca1b3547138dba0ec2f7a8b0f9" title="The different TickType each SecurityType supports">AvailableDataTypes</a>[dataFeed.Key] = dataFeed.Value;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">        /// Sets the security initializer, used to initialize/configure securities after creation.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">        /// The initializer will be applied to all universes and manually added securities.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">        /// &lt;param name=&quot;securityInitializer&quot;&gt;The security initializer&lt;/param&gt;</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l00937"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae09c72c306776c472827d3e8d87c1bf4">  937</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae09c72c306776c472827d3e8d87c1bf4" title="Sets the security initializer, used to initialize/configure securities after creation....">SetSecurityInitializer</a>(<a class="code" href="interfaceQuantConnect_1_1Securities_1_1ISecurityInitializer.html" title="Represents a type capable of initializing a new security">ISecurityInitializer</a> securityInitializer)</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <span class="keywordflow">if</span> (_locked)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;SetSecurityInitializer() cannot be called after algorithm initialization. &quot;</span> +</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                                    <span class="stringliteral">&quot;When you use the SetSecurityInitializer() method it will apply to all universes and manually added securities.&quot;</span>);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            }</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keywordflow">if</span> (_userSetSecurityInitializer)</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>(<span class="stringliteral">&quot;Warning: SetSecurityInitializer() has already been called, existing security initializers in all universes will be overwritten.&quot;</span>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <span class="comment">// this flag will prevent calls to SetBrokerageModel from overwriting this initializer</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            _userSetSecurityInitializer = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityInitializer.html" title="Provides static access to the Null security initializer">SecurityInitializer</a> = securityInitializer;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">        /// Sets the security initializer function, used to initialize/configure securities after creation.</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">        /// The initializer will be applied to all universes and manually added securities.</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">        /// &lt;param name=&quot;securityInitializer&quot;&gt;The security initializer function&lt;/param&gt;</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"></span>        [Obsolete(<span class="stringliteral">&quot;This method is deprecated. Please use this overload: SetSecurityInitializer(Action&lt;Security&gt; securityInitializer)&quot;</span>)]</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ada5a53e444e33ae697b5dfe2d5fafc39">  963</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ada5a53e444e33ae697b5dfe2d5fafc39" title="Sets the security initializer function, used to initialize/configure securities after creation....">SetSecurityInitializer</a>(Action&lt;Security, bool&gt; securityInitializer)</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae09c72c306776c472827d3e8d87c1bf4" title="Sets the security initializer, used to initialize/configure securities after creation....">SetSecurityInitializer</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Securities_1_1FuncSecurityInitializer.html" title="Provides a functional implementation of ISecurityInitializer">FuncSecurityInitializer</a>(security =&gt; securityInitializer(security, <span class="keyword">false</span>)));</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">        /// Sets the security initializer function, used to initialize/configure securities after creation.</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">        /// The initializer will be applied to all universes and manually added securities.</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">        /// &lt;param name=&quot;securityInitializer&quot;&gt;The security initializer function&lt;/param&gt;</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a82e979d0c3696de8cdd519cd3834717a">  975</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a82e979d0c3696de8cdd519cd3834717a" title="Sets the security initializer function, used to initialize/configure securities after creation....">SetSecurityInitializer</a>(Action&lt;Security&gt; securityInitializer)</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae09c72c306776c472827d3e8d87c1bf4" title="Sets the security initializer, used to initialize/configure securities after creation....">SetSecurityInitializer</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Securities_1_1FuncSecurityInitializer.html" title="Provides a functional implementation of ISecurityInitializer">FuncSecurityInitializer</a>(securityInitializer));</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">        /// Sets the option chain provider, used to get the list of option contracts for an underlying symbol</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">        /// &lt;param name=&quot;optionChainProvider&quot;&gt;The option chain provider&lt;/param&gt;</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l00985"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a41c821f02c105c326f8f96b654f98e2c">  985</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a41c821f02c105c326f8f96b654f98e2c" title="Sets the option chain provider, used to get the list of option contracts for an underlying symbol">SetOptionChainProvider</a>(<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IOptionChainProvider.html" title="Provides the full option chain for a given underlying.">IOptionChainProvider</a> optionChainProvider)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad17a39eff331e0a209158e5a60aa8230" title="Gets the option chain provider, used to get the list of option contracts for an underlying symbol">OptionChainProvider</a> = optionChainProvider;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">        /// Sets the future chain provider, used to get the list of future contracts for an underlying symbol</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">        /// &lt;param name=&quot;futureChainProvider&quot;&gt;The future chain provider&lt;/param&gt;</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l00995"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abf6f4d9d6c3cdd581b95c5fcfc2ac250">  995</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abf6f4d9d6c3cdd581b95c5fcfc2ac250" title="Sets the future chain provider, used to get the list of future contracts for an underlying symbol">SetFutureChainProvider</a>(<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IFutureChainProvider.html" title="Provides the full future chain for a given underlying.">IFutureChainProvider</a> futureChainProvider)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2f6352969554c2a126a29b0a89517875" title="Gets the future chain provider, used to get the list of future contracts for an underlying symbol">FutureChainProvider</a> = futureChainProvider;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">        /// Event - v3.0 DATA EVENT HANDLER: (Pattern) Basic template for user to override for receiving all subscription data in a single event</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">        /// &lt;code&gt;</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">        /// TradeBars bars = slice.Bars;</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">        /// Ticks ticks = slice.Ticks;</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">        /// TradeBar spy = slice[&quot;SPY&quot;];</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment">        /// List{Tick} aaplTicks = slice[&quot;AAPL&quot;]</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">        /// Quandl oil = slice[&quot;OIL&quot;]</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">        /// dynamic anySymbol = slice[symbol];</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">        /// DataDictionary{Quandl} allQuandlData = slice.Get{Quand}</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">        /// Quandl oil = slice.Get{Quandl}(&quot;OIL&quot;)</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">        /// &lt;/code&gt;</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">        /// &lt;param name=&quot;slice&quot;&gt;The current slice of data keyed by symbol string&lt;/param&gt;</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5c061402f5e7fa7ff52209404017c8c3"> 1015</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5c061402f5e7fa7ff52209404017c8c3" title="Event - v3.0 DATA EVENT HANDLER: (Pattern) Basic template for user to override for receiving all subs...">OnData</a>(<a class="code" href="classQuantConnect_1_1Data_1_1Slice.html" title="Provides a data structure for all of an algorithm&#39;s data at a single time step">Slice</a> slice)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <span class="comment">// as a default implementation, let&#39;s look for and call OnData(Slice) just in case a user forgot to use the override keyword</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <span class="keywordflow">if</span> (!_checkedForOnDataSlice)</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                _checkedForOnDataSlice = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                var method = GetType().GetMethods()</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                    .Where(x =&gt; x.Name == <span class="stringliteral">&quot;OnData&quot;</span>)</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                    .Where(x =&gt; x.DeclaringType != typeof(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html" title="QC Algorithm Base Class - Handle the basic requirements of a trading algorithm, allowing user to focu...">QCAlgorithm</a>))</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                    .Where(x =&gt; x.GetParameters().Length == 1)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                    .FirstOrDefault(x =&gt; x.GetParameters()[0].ParameterType == typeof(<a class="code" href="classQuantConnect_1_1Data_1_1Slice.html" title="Provides a data structure for all of an algorithm&#39;s data at a single time step">Slice</a>));</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                <span class="keywordflow">if</span> (method == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                var <span class="keyword">self</span> = Expression.Constant(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                var parameter = Expression.Parameter(typeof(<a class="code" href="classQuantConnect_1_1Data_1_1Slice.html" title="Provides a data structure for all of an algorithm&#39;s data at a single time step">Slice</a>), <span class="stringliteral">&quot;data&quot;</span>);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                var call = Expression.Call(<span class="keyword">self</span>, method, parameter);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                var lambda = Expression.Lambda&lt;Action&lt;Slice&gt;&gt;(call, parameter);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                _onDataSlice = lambda.Compile();</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            <span class="comment">// if we have it, then invoke it</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="keywordflow">if</span> (_onDataSlice != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                _onDataSlice(slice);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">        /// Event fired each time the we add/remove securities from the data feed</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">        /// &lt;param name=&quot;changes&quot;&gt;Security additions/removals for this time step&lt;/param&gt;</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Universes)]</div>
<div class="line"><a name="l01052"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5b786af272817073de116bd9e389661f"> 1052</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5b786af272817073de116bd9e389661f" title="Event fired each time the we add/remove securities from the data feed">OnSecuritiesChanged</a>(<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1SecurityChanges.html" title="Defines the additions and subtractions to the algorithm&#39;s security subscriptions">SecurityChanges</a> changes)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="comment">// &lt;summary&gt;</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="comment">// Event - v2.0 TRADEBAR EVENT HANDLER: (Pattern) Basic template for user to override when requesting tradebar data.</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="comment">// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="comment">// &lt;param name=&quot;data&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="comment">//public void OnData(TradeBars data)</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <span class="comment">//{</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="comment">// &lt;summary&gt;</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="comment">// Event - v2.0 QUOTEBAR EVENT HANDLER: (Pattern) Basic template for user to override when requesting quotebar data.</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="comment">// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="comment">// &lt;param name=&quot;data&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="comment">//public void OnData(QuoteBars data)</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="comment">//{</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="comment">// &lt;summary&gt;</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="comment">// Event - v2.0 TICK EVENT HANDLER: (Pattern) Basic template for user to override when requesting tick data.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="comment">// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="comment">// &lt;param name=&quot;data&quot;&gt;List of Tick Data&lt;/param&gt;</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="comment">//public void OnData(Ticks data)</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="comment">//{</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="comment">// &lt;summary&gt;</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="comment">// Event - v2.0 OPTIONCHAIN EVENT HANDLER: (Pattern) Basic template for user to override when requesting option data.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="comment">// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="comment">// &lt;param name=&quot;data&quot;&gt;List of Tick Data&lt;/param&gt;</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="comment">//public void OnData(OptionChains data)</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="comment">//{</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="comment">// &lt;summary&gt;</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="comment">// Event - v2.0 SPLIT EVENT HANDLER: (Pattern) Basic template for user to override when inspecting split data.</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        <span class="comment">// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="comment">// &lt;param name=&quot;data&quot;&gt;IDictionary of Split Data Keyed by Symbol String&lt;/param&gt;</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="comment">//public void OnData(Splits data)</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="comment">//{</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="comment">// &lt;summary&gt;</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="comment">// Event - v2.0 DIVIDEND EVENT HANDLER: (Pattern) Basic template for user to override when inspecting dividend data</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="comment">// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="comment">// &lt;param name=&quot;data&quot;&gt;IDictionary of Dividend Data Keyed by Symbol String&lt;/param&gt;</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="comment">//public void OnData(Dividends data)</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <span class="comment">//{</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="comment">// &lt;summary&gt;</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="comment">// Event - v2.0 DELISTING EVENT HANDLER: (Pattern) Basic template for user to override when inspecting delisting data</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="comment">// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="comment">// &lt;param name=&quot;data&quot;&gt;IDictionary of Delisting Data Keyed by Symbol String&lt;/param&gt;</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="comment">//public void OnData(Delistings data)</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="comment">// &lt;summary&gt;</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="comment">// Event - v2.0 SYMBOL CHANGED EVENT HANDLER: (Pattern) Basic template for user to override when inspecting symbol changed data</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="comment">// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <span class="comment">// &lt;param name=&quot;data&quot;&gt;IDictionary of SymbolChangedEvent Data Keyed by Symbol String&lt;/param&gt;</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="comment">//public void OnData(SymbolChangedEvents data)</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">        /// Margin call event handler. This method is called right before the margin call orders are placed in the market.</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">        /// &lt;param name=&quot;requests&quot;&gt;The orders to be executed to bring this algorithm within margin limits&lt;/param&gt;</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01128"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac5b3810ae4e06b4a3ed3476c1df72726"> 1128</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac5b3810ae4e06b4a3ed3476c1df72726" title="Margin call event handler. This method is called right before the margin call orders are placed in th...">OnMarginCall</a>(List&lt;SubmitOrderRequest&gt; requests)</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">        /// Margin call warning event handler. This method is called when Portfolio.MarginRemaining is under 5% of your Portfolio.TotalPortfolioValue</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01137"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5aa9c293a95d3c3c8c7bbd51a1ffd4ee"> 1137</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5aa9c293a95d3c3c8c7bbd51a1ffd4ee" title="Margin call warning event handler. This method is called when Portfolio.MarginRemaining is under 5% o...">OnMarginCallWarning</a>()</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">        /// End of a trading day event handler. This method is called at the end of the algorithm day (or multiple times if trading multiple assets).</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">        /// &lt;remarks&gt;Method is called 10 minutes before closing to allow user to close out position.&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">        /// &lt;remarks&gt;Deprecated because different assets have different market close times,</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">        /// and because Python does not support two methods with the same name&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment"></span>        [Obsolete(<span class="stringliteral">&quot;This method is deprecated and will be removed after August 2021. Please use this overload: OnEndOfDay(Symbol symbol)&quot;</span>)]</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01149"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaada95e624ee0c9158e63ee5d9a25c9c"> 1149</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaada95e624ee0c9158e63ee5d9a25c9c" title="End of a trading day event handler. This method is called at the end of the algorithm day (or multipl...">OnEndOfDay</a>()</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        {</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        }</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">        /// End of a trading day event handler. This method is called at the end of the algorithm day (or multiple times if trading multiple assets).</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">        /// &lt;remarks&gt;</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">        /// This method is left for backwards compatibility and is invoked via &lt;see cref=&quot;OnEndOfDay(Symbol)&quot;/&gt;, if that method is</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">        /// override then this method will not be called without a called to base.OnEndOfDay(string)</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">        /// &lt;/remarks&gt;</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;Asset symbol for this end of day event. Forex and equities have different closing hours.&lt;/param&gt;</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01163"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0d42e17e6ea001387db1a6aa7a280248"> 1163</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0d42e17e6ea001387db1a6aa7a280248" title="End of a trading day event handler. This method is called at the end of the algorithm day (or multipl...">OnEndOfDay</a>(<span class="keywordtype">string</span> symbol)</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">        /// End of a trading day event handler. This method is called at the end of the algorithm day (or multiple times if trading multiple assets).</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;Asset symbol for this end of day event. Forex and equities have different closing hours.&lt;/param&gt;</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01172"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a162e101f2df8722dbb5788b504ec562a"> 1172</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a162e101f2df8722dbb5788b504ec562a" title="End of a trading day event handler. This method is called at the end of the algorithm day (or multipl...">OnEndOfDay</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaada95e624ee0c9158e63ee5d9a25c9c" title="End of a trading day event handler. This method is called at the end of the algorithm day (or multipl...">OnEndOfDay</a>(symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a3c54bbbf67e90444df99f3d80ed1c3a2" title="Returns a string that represents the current object.">ToString</a>());</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">        /// End of algorithm run event handler. This method is called at the end of a backtest or live trading operation. Intended for closing out logs.</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01181"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afaef19b8159f55f69d52e2c7408c6af1"> 1181</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afaef19b8159f55f69d52e2c7408c6af1" title="End of algorithm run event handler. This method is called at the end of a backtest or live trading op...">OnEndOfAlgorithm</a>()</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">        /// Order fill event handler. On an order fill update the resulting information is passed to this method.</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">        /// &lt;param name=&quot;orderEvent&quot;&gt;Order event details containing details of the events&lt;/param&gt;</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">        /// &lt;remarks&gt;This method can be called asynchronously and so should only be used by seasoned C# experts. Ensure you use proper locks on thread-unsafe objects&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01192"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8aa202c3d3b5f55eec589acc389e4b76"> 1192</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8aa202c3d3b5f55eec589acc389e4b76" title="Order fill event handler. On an order fill update the resulting information is passed to this method.">OnOrderEvent</a>(<a class="code" href="classQuantConnect_1_1Orders_1_1OrderEvent.html" title="Order Event - Messaging class signifying a change in an order state and record the change in the user...">OrderEvent</a> orderEvent)</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        }</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">        /// Option assignment event handler. On an option assignment event for short legs the resulting information is passed to this method.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">        /// &lt;param name=&quot;assignmentEvent&quot;&gt;Option exercise event details containing details of the assignment&lt;/param&gt;</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">        /// &lt;remarks&gt;This method can be called asynchronously and so should only be used by seasoned C# experts. Ensure you use proper locks on thread-unsafe objects&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01203"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a05435227ff905acadeb598aad31685cc"> 1203</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a05435227ff905acadeb598aad31685cc" title="Option assignment event handler. On an option assignment event for short legs the resulting informati...">OnAssignmentOrderEvent</a>(<a class="code" href="classQuantConnect_1_1Orders_1_1OrderEvent.html" title="Order Event - Messaging class signifying a change in an order state and record the change in the user...">OrderEvent</a> assignmentEvent)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; </div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">        /// Brokerage message event handler. This method is called for all types of brokerage messages.</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(LiveTrading)]</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01214"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aee3b3f896c0f9c17077e05a8391040ab"> 1214</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aee3b3f896c0f9c17077e05a8391040ab" title="Brokerage message event handler. This method is called for all types of brokerage messages.">OnBrokerageMessage</a>(<a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageMessageEvent.html" title="Represents a message received from a brokerage">BrokerageMessageEvent</a> messageEvent)</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">        /// Brokerage disconnected event handler. This method is called when the brokerage connection is lost.</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(LiveTrading)]</div>
<div class="line"><a name="l01223"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a671895dc3fe3e2ee3e17ac83d2495ad7"> 1223</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a671895dc3fe3e2ee3e17ac83d2495ad7" title="Brokerage disconnected event handler. This method is called when the brokerage connection is lost.">OnBrokerageDisconnect</a>()</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment">        /// Brokerage reconnected event handler. This method is called when the brokerage connection is restored after a disconnection.</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(LiveTrading)]</div>
<div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac23643b525ab9ca15378d1b13d26890d"> 1232</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac23643b525ab9ca15378d1b13d26890d" title="Brokerage reconnected event handler. This method is called when the brokerage connection is restored ...">OnBrokerageReconnect</a>()</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">        /// Update the internal algorithm time frontier.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment">        /// &lt;remarks&gt;For internal use only to advance time.&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">        /// &lt;param name=&quot;frontier&quot;&gt;Current utc datetime.&lt;/param&gt;</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01243"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2db914b00bbdc25368ee154f931fc0"> 1243</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2db914b00bbdc25368ee154f931fc0" title="Update the internal algorithm time frontier.">SetDateTime</a>(DateTime frontier)</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            _timeKeeper.SetUtcDateTime(frontier);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            <span class="keywordflow">if</span> (_locked &amp;&amp; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9ae19647e6057693ee2a7702fd337e66" title="Gets whether or not this algorithm is still warming up">IsWarmingUp</a> &amp;&amp; <a class="code" href="classQuantConnect_1_1Time.html" title="Time helper class collection for working with trading dates">Time</a> &gt;= _start)</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a241dc95c0b1bc8926c4fde785c30c29d" title="Sets IAlgorithm.IsWarmingUp to false to indicate this algorithm has finished its warm up">SetFinishedWarmingUp</a>();</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">        /// Sets the time zone of the &lt;see cref=&quot;Time&quot;/&gt; property in the algorithm</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment">        /// &lt;param name=&quot;timeZone&quot;&gt;The desired time zone&lt;/param&gt;</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01257"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3f7a673bae06da1eef369f3e770d2887"> 1257</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3f7a673bae06da1eef369f3e770d2887" title="Sets the time zone of the Time property in the algorithm">SetTimeZone</a>(<span class="keywordtype">string</span> timeZone)</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            DateTimeZone tz;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                tz = DateTimeZoneProviders.Tzdb[timeZone];</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <span class="keywordflow">catch</span> (DateTimeZoneNotFoundException)</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException($<span class="stringliteral">&quot;TimeZone with id &#39;{timeZone}&#39; was not found. For a complete list of time zones please visit: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones&quot;</span>);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3f7a673bae06da1eef369f3e770d2887" title="Sets the time zone of the Time property in the algorithm">SetTimeZone</a>(tz);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        }</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">        /// Sets the time zone of the &lt;see cref=&quot;Time&quot;/&gt; property in the algorithm</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">        /// &lt;param name=&quot;timeZone&quot;&gt;The desired time zone&lt;/param&gt;</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01277"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a492ff4abe13cfbf92114a136186cad24"> 1277</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a492ff4abe13cfbf92114a136186cad24" title="Sets the time zone of the Time property in the algorithm">SetTimeZone</a>(DateTimeZone timeZone)</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="keywordflow">if</span> (_locked)</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Algorithm.SetTimeZone(): Cannot change time zone after algorithm running.&quot;</span>);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            <span class="keywordflow">if</span> (timeZone == <span class="keyword">null</span>) <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(timeZone));</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            _timeKeeper.AddTimeZone(timeZone);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            _localTimeKeeper = _timeKeeper.GetLocalTimeKeeper(timeZone);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="comment">// the time rules need to know the default time zone as well</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            <a class="code" href="classQuantConnect_1_1Scheduling_1_1TimeRules.html" title="Helper class used to provide better syntax when defining time rules">TimeRules</a>.<a class="code" href="classQuantConnect_1_1Scheduling_1_1TimeRules.html#aec30ff668957b32dc7b551fb01befae6" title="Sets the default time zone">SetDefaultTimeZone</a>(timeZone);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            <a class="code" href="classQuantConnect_1_1Scheduling_1_1DateRules.html" title="Helper class used to provide better syntax when defining date rules">DateRules</a>.<a class="code" href="classQuantConnect_1_1Scheduling_1_1DateRules.html#aa88f558eed9d14bc944104b56ac5183b" title="Sets the default time zone">SetDefaultTimeZone</a>(timeZone);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            <span class="comment">// In BackTest mode we reset the Algorithm time to reflect the new timezone</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            <span class="comment">// startDate is set by the user so we expect it to be for their timezone already</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;            <span class="comment">// so there is no need to update it.</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5589ce6040feaa092de0d8a8da8e6ee5" title="Boolean property indicating the algorithm is currently running in live mode.">LiveMode</a>)</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                _start = _startDate;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2db914b00bbdc25368ee154f931fc0" title="Update the internal algorithm time frontier.">SetDateTime</a>(_startDate.ConvertToUtc(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a>));</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            <span class="comment">// In live mode we need to adjust startDate to reflect the new timezone</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            <span class="comment">// startDate is set by Lean to the default timezone (New York), so we must update it here</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                SetLiveModeStartDate();</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        }</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">        /// Sets the brokerage to emulate in backtesting or paper trading.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">        /// This can be used for brokerages that have been implemented in LEAN</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment">        /// &lt;param name=&quot;brokerage&quot;&gt;The brokerage to emulate&lt;/param&gt;</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment">        /// &lt;param name=&quot;accountType&quot;&gt;The account type (Cash or Margin)&lt;/param&gt;</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l01315"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a79a78cd3e1909759aa56c1af63b0b63f"> 1315</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a79a78cd3e1909759aa56c1af63b0b63f" title="Sets the brokerage to emulate in backtesting or paper trading. This can be used for brokerages that h...">SetBrokerageModel</a>(<a class="code" href="namespaceQuantConnect_1_1Brokerages.html#af1d558797abc5053058f84d04daf7620" title="Specifices what transaction model and submit/execution rules to use">BrokerageName</a> brokerage, <a class="code" href="namespaceQuantConnect.html#a83e33c1831661eb22146bdb091a98557" title="Account type: margin or cash">AccountType</a> accountType = <a class="code" href="namespaceQuantConnect.html#a83e33c1831661eb22146bdb091a98557" title="Account type: margin or cash">AccountType</a>.Margin)</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a79a78cd3e1909759aa56c1af63b0b63f" title="Sets the brokerage to emulate in backtesting or paper trading. This can be used for brokerages that h...">SetBrokerageModel</a>(Brokerages.BrokerageModel.Create(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abd31d323023526ca3e7cae0dfd620134" title="Transaction Manager - Process transaction fills and order management.">Transactions</a>, brokerage, accountType));</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment">        /// Sets the brokerage to emulate in backtesting or paper trading.</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">        /// This can be used to set a custom brokerage model.</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">        /// &lt;param name=&quot;model&quot;&gt;The brokerage model to use&lt;/param&gt;</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l01326"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a27d85ae7e6d3cc08bc805564866c4e04"> 1326</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a27d85ae7e6d3cc08bc805564866c4e04" title="Sets the brokerage to emulate in backtesting or paper trading. This can be used to set a custom broke...">SetBrokerageModel</a>(<a class="code" href="interfaceQuantConnect_1_1Brokerages_1_1IBrokerageModel.html" title="Models brokerage transactions, fees, and order">IBrokerageModel</a> model)</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            <a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a> = model;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            <span class="keywordflow">if</span> (!_userSetSecurityInitializer)</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                <span class="comment">// purposefully use the direct setter vs Set method so we don&#39;t flip the switch :/</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityInitializer.html" title="Provides static access to the Null security initializer">SecurityInitializer</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Securities_1_1BrokerageModelSecurityInitializer.html" title="Provides an implementation of ISecurityInitializer that initializes a security by settings the Securi...">BrokerageModelSecurityInitializer</a>(model, <a class="code" href="classQuantConnect_1_1Securities_1_1SecuritySeeder.html" title="Provides access to a null implementation for ISecuritySeeder">SecuritySeeder</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecuritySeeder.html#ae250e7a5a20d97e9aabde012ae935128" title="Gets an instance of ISecuritySeeder that is a no-op">Null</a>);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                <span class="comment">// update models on securities added earlier (before SetBrokerageModel is called)</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                <span class="keywordflow">foreach</span> (var kvp <span class="keywordflow">in</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>)</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                    var security = kvp.Value;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                    <span class="comment">// save the existing leverage specified in AddSecurity,</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                    <span class="comment">// if Leverage needs to be set in a SecurityInitializer,</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                    <span class="comment">// SetSecurityInitializer must be called before SetBrokerageModel</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                    var leverage = security.Leverage;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                    <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityInitializer.html" title="Provides static access to the Null security initializer">SecurityInitializer</a>.Initialize(security);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                    <span class="comment">// restore the saved leverage</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                    security.SetLeverage(leverage);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                }</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">        /// Sets the implementation used to handle messages from the brokerage.</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">        /// The default implementation will forward messages to debug or error</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">        /// and when a &lt;see cref=&quot;BrokerageMessageType.Error&quot;/&gt; occurs, the algorithm</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">        /// is stopped.</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">        /// &lt;param name=&quot;handler&quot;&gt;The message handler to use&lt;/param&gt;</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l01361"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa468b6ae0bee35374eb25aaa6219e3f9"> 1361</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa468b6ae0bee35374eb25aaa6219e3f9" title="Sets the implementation used to handle messages from the brokerage. The default implementation will f...">SetBrokerageMessageHandler</a>(<a class="code" href="interfaceQuantConnect_1_1Brokerages_1_1IBrokerageMessageHandler.html" title="Provides an plugin point to allow algorithms to directly handle the messages that come from their bro...">IBrokerageMessageHandler</a> handler)</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6dc685727ebf1cd6bed074e3ce6e47fc" title="Gets the brokerage message handler used to decide what to do with each message sent from the brokerag...">BrokerageMessageHandler</a> = handler ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(handler));</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">        /// Sets the risk free interest rate model to be used in the algorithm</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">        /// &lt;param name=&quot;model&quot;&gt;The risk free interest rate model to use&lt;/param&gt;</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Modeling)]</div>
<div class="line"><a name="l01371"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a63696d2c123bf9527bfc7d1d4b21b64c"> 1371</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a63696d2c123bf9527bfc7d1d4b21b64c" title="Sets the risk free interest rate model to be used in the algorithm">SetRiskFreeInterestRateModel</a>(<a class="code" href="interfaceQuantConnect_1_1Data_1_1IRiskFreeInterestRateModel.html" title="Represents a model that provides risk free interest rate data">IRiskFreeInterestRateModel</a> model)</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        {</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af39cc67f174e37f86383d92d44bb6a79" title="Gets the risk free interest rate model used to get the interest rates">RiskFreeInterestRateModel</a> = model ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(model));</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        }</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">        /// Sets the benchmark used for computing statistics of the algorithm to the specified symbol</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;symbol to use as the benchmark&lt;/param&gt;</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">        /// &lt;param name=&quot;securityType&quot;&gt;Is the symbol an equity, forex, base, etc. Default SecurityType.Equity&lt;/param&gt;</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">        /// &lt;remarks&gt;</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">        /// Must use symbol that is available to the trade engine in your data store(not strictly enforced)</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">        /// &lt;/remarks&gt;</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment"></span>        [Obsolete(<span class="stringliteral">&quot;Symbol implicit operator to string is provided for algorithm use only.&quot;</span>)]</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Indicators)]</div>
<div class="line"><a name="l01388"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a25bdfa22d01e042f92b3e421675dba39"> 1388</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a25bdfa22d01e042f92b3e421675dba39" title="Sets the benchmark used for computing statistics of the algorithm to the specified symbol">SetBenchmark</a>(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a> securityType, <span class="keywordtype">string</span> symbol)</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            <span class="keywordflow">if</span> (_locked)</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Algorithm.SetBenchmark(): Cannot change Benchmark after algorithm initialized.&quot;</span>);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;            }</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160; </div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            <span class="keywordtype">string</span> market;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a>.DefaultMarkets.TryGetValue(securityType, out market))</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;            {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                market = <a class="code" href="classQuantConnect_1_1Market.html" title="Markets Collection: Soon to be expanded to a collection of items specifying the market hour,...">Market</a>.<a class="code" href="classQuantConnect_1_1Market.html#ab62a170b2945e72bfb67cb582a3d3fec" title="USA Market">USA</a>;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160; </div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            var benchmarkSymbol = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#a350b9a625cf7bad95da82894be3cd0a8" title="Provides a convenience method for creating a Symbol for most security types. This method currently do...">Create</a>(symbol, securityType, market);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a25bdfa22d01e042f92b3e421675dba39" title="Sets the benchmark used for computing statistics of the algorithm to the specified symbol">SetBenchmark</a>(benchmarkSymbol);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        }</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">        /// Sets the benchmark used for computing statistics of the algorithm to the specified ticker, defaulting to SecurityType.Equity</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">        /// if the ticker doesn&#39;t exist in the algorithm</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;Ticker to use as the benchmark&lt;/param&gt;</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">        /// &lt;remarks&gt;</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">        /// Overload to accept ticker without passing SecurityType. If ticker is in portfolio it will use that SecurityType, otherwise will default to SecurityType.Equity</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">        /// &lt;/remarks&gt;</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Indicators)]</div>
<div class="line"><a name="l01416"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4ca29e2c5ad24fcd326ebbb78b67e7e6"> 1416</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4ca29e2c5ad24fcd326ebbb78b67e7e6" title="Sets the benchmark used for computing statistics of the algorithm to the specified ticker,...">SetBenchmark</a>(<span class="keywordtype">string</span> ticker)</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            <span class="comment">// Check the cache for the symbol</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1SymbolCache.html" title="Provides a string-&gt;Symbol mapping to allow for user defined strings to be lifted into a Symbol This i...">SymbolCache</a>.<a class="code" href="classQuantConnect_1_1SymbolCache.html#a131a5bb015b9a603328d0eddfe90c610" title="Gets the Symbol object that is mapped to the specified string ticker symbol">TryGetSymbol</a>(ticker, out symbol))</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                <span class="comment">// Check our securities for a symbol matched with this ticker</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                symbol = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>.FirstOrDefault(x =&gt; x.Key.Value == ticker).Key;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                <span class="comment">// If we didn&#39;t find a symbol matching our ticker, create one.</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                <span class="keywordflow">if</span> (symbol == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                    <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>($<span class="stringliteral">&quot;Warning: SetBenchmark({ticker}): no existing symbol found, benchmark security will be added with {SecurityType.Equity} type.&quot;</span>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                    symbol = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#a350b9a625cf7bad95da82894be3cd0a8" title="Provides a convenience method for creating a Symbol for most security types. This method currently do...">Create</a>(ticker, <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Equity, <a class="code" href="classQuantConnect_1_1Market.html" title="Markets Collection: Soon to be expanded to a collection of items specifying the market hour,...">Market</a>.<a class="code" href="classQuantConnect_1_1Market.html#ab62a170b2945e72bfb67cb582a3d3fec" title="USA Market">USA</a>);</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <span class="comment">// Send our symbol through</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a25bdfa22d01e042f92b3e421675dba39" title="Sets the benchmark used for computing statistics of the algorithm to the specified symbol">SetBenchmark</a>(symbol);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        }</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">        /// Sets the benchmark used for computing statistics of the algorithm to the specified symbol</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;symbol to use as the benchmark&lt;/param&gt;</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Indicators)]</div>
<div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ab6ee2c4e0a8649563da1bb28d3f65736"> 1445</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ab6ee2c4e0a8649563da1bb28d3f65736" title="Sets the benchmark used for computing statistics of the algorithm to the specified symbol">SetBenchmark</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            <span class="keywordflow">if</span> (_locked)</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Algorithm.SetBenchmark(): Cannot change Benchmark after algorithm initialized.&quot;</span>);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            }</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <span class="comment">// Create our security benchmark</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a29116bba518b05e74733916d3bfc0e09" title="Benchmark">Benchmark</a> = <a class="code" href="classQuantConnect_1_1Benchmarks_1_1SecurityBenchmark.html" title="Creates a benchmark defined by the closing price of a Security instance">SecurityBenchmark</a>.<a class="code" href="classQuantConnect_1_1Benchmarks_1_1SecurityBenchmark.html#a40c97e12584a0fc70ffb48f9aead3287" title="Helper function that will create a security with the given SecurityManager for a specific symbol and ...">CreateInstance</a>(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>, symbol);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">        /// Sets the specified function as the benchmark, this function provides the value of</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">        /// the benchmark at each date/time requested</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">        /// &lt;param name=&quot;benchmark&quot;&gt;The benchmark producing function&lt;/param&gt;</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Indicators)]</div>
<div class="line"><a name="l01464"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a189b3f6e88b36e397f2cd564762dd945"> 1464</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a189b3f6e88b36e397f2cd564762dd945" title="Sets the specified function as the benchmark, this function provides the value of the benchmark at ea...">SetBenchmark</a>(Func&lt;DateTime, decimal&gt; benchmark)</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;            <span class="keywordflow">if</span> (_locked)</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;            {</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Algorithm.SetBenchmark(): Cannot change Benchmark after algorithm initialized.&quot;</span>);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a29116bba518b05e74733916d3bfc0e09" title="Benchmark">Benchmark</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Benchmarks_1_1FuncBenchmark.html" title="Creates a benchmark defined by a function">FuncBenchmark</a>(benchmark);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        }</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">        /// Benchmark</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">        /// &lt;remarks&gt;Use Benchmark to override default symbol based benchmark, and create your own benchmark. For example a custom moving average benchmark &lt;/remarks&gt;</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">        ///</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Indicators)]</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="keyword">public</span> <a class="code" href="interfaceQuantConnect_1_1Benchmarks_1_1IBenchmark.html" title="Specifies how to compute a benchmark for an algorithm">IBenchmark</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a29116bba518b05e74733916d3bfc0e09" title="Benchmark">Benchmark</a></div>
<div class="line"><a name="l01483"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a29116bba518b05e74733916d3bfc0e09"> 1483</a></span>&#160;        {</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            <span class="keyword">private</span> <span class="keyword">set</span>;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        }</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment">        /// Sets name to the currently running backtest</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment">        /// &lt;param name=&quot;name&quot;&gt;The name for the backtest&lt;/param&gt;</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ace57940560c4efa5d236aee0bbb944b3"> 1492</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ace57940560c4efa5d236aee0bbb944b3" title="Sets name to the currently running backtest">SetName</a>(<span class="keywordtype">string</span> name)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        {</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9761fd68f9df7af645038e76c043a3fa" title="Public name for the algorithm as automatically generated by the IDE. Intended for helping distinguish...">Name</a> = name;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        }</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">        /// Adds a tag to the algorithm</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment">        /// &lt;param name=&quot;tag&quot;&gt;The tag to add&lt;/param&gt;</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5054cde40f653d0220079a7fcd88ae70"> 1501</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5054cde40f653d0220079a7fcd88ae70" title="Adds a tag to the algorithm">AddTag</a>(<span class="keywordtype">string</span> tag)</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;            <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(tag?.Trim()))</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0356e6ef8313a1cf5392246fa363b89" title="A list of tags associated with the algorithm or the backtest, useful for categorization">Tags</a>.Count &gt;= <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a153cf9c58f7342ac3ad2f27220040ace" title="Maximum number of tags allowed for a backtest">MaxTagsCount</a>)</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                    <span class="keywordflow">if</span> (!_tagsLimitReachedLogSent)</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                    {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                        <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a67b117790972c1715ab8b85742d4bfb7" title="Added another method for logging if user guessed.">Log</a>($<span class="stringliteral">&quot;Warning: AddTag({tag}): Unable to add tag. Tags are limited to a maximum of {MaxTagsCount}.&quot;</span>);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                        _tagsLimitReachedLogSent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                    }</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                <span class="comment">// We&#39;ll only notify the tad update after the algorithm has been initialized</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0356e6ef8313a1cf5392246fa363b89" title="A list of tags associated with the algorithm or the backtest, useful for categorization">Tags</a>.Add(tag.Truncate(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2b94870bcafa443cd2057077e0468bd8" title="Maximum length of the name or tags of a backtest">MaxNameAndTagsLength</a>)) &amp;&amp; _locked)</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                    <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a50e04c814f8c199d22dd57474a1b157b" title="Event fired when the tag collection is updated">TagsUpdated</a>?.Invoke(<span class="keyword">this</span>, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0356e6ef8313a1cf5392246fa363b89" title="A list of tags associated with the algorithm or the backtest, useful for categorization">Tags</a>);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="comment">        /// Sets the tags for the algorithm</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="comment">        /// &lt;param name=&quot;tags&quot;&gt;The tags&lt;/param&gt;</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0f2af62d0640bd8e02732f8fc6e1a0c9"> 1527</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0f2af62d0640bd8e02732f8fc6e1a0c9" title="Sets the tags for the algorithm">SetTags</a>(HashSet&lt;string&gt; tags)</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0356e6ef8313a1cf5392246fa363b89" title="A list of tags associated with the algorithm or the backtest, useful for categorization">Tags</a> = tags;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        }</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="comment">        /// Sets the account currency cash symbol this algorithm is to manage, as well as</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment">        /// the starting cash in this currency if given</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment">        /// &lt;remarks&gt;Has to be called during &lt;see cref=&quot;Initialize&quot;/&gt; before</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="comment">        /// calling &lt;see cref=&quot;SetCash(decimal)&quot;/&gt; or adding any &lt;see cref=&quot;Security&quot;/&gt;&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<span class="comment">        /// &lt;param name=&quot;accountCurrency&quot;&gt;The account currency cash symbol to set&lt;/param&gt;</span></div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;<span class="comment">        /// &lt;param name=&quot;startingCash&quot;&gt;The account currency starting cash to set&lt;/param&gt;</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01541"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af4b96ace7454948c54ea98e863b8b0e1"> 1541</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af4b96ace7454948c54ea98e863b8b0e1" title="Sets the account currency cash symbol this algorithm is to manage, as well as the starting cash in th...">SetAccountCurrency</a>(<span class="keywordtype">string</span> accountCurrency, decimal? startingCash = <span class="keyword">null</span>)</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;            <span class="keywordflow">if</span> (_locked)</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            {</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Algorithm.SetAccountCurrency(): &quot;</span> +</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                    <span class="stringliteral">&quot;Cannot change AccountCurrency after algorithm initialized.&quot;</span>);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            }</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            <span class="keywordflow">if</span> (startingCash == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>($<span class="stringliteral">&quot;Changing account currency from {AccountCurrency} to {accountCurrency}...&quot;</span>);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>($<span class="stringliteral">&quot;Changing account currency from {AccountCurrency} to {accountCurrency}, with a starting cash of {startingCash}...&quot;</span>);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;            }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160; </div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a442dd9df68f2b04aaaa9058e12c3fd1b" title="Portfolio object provieds easy access to the underlying security-holding properties; summed together ...">Portfolio</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityPortfolioManager.html#ace04c1c80ebeef4a75f6fc0bdb7aa215" title="Sets the account currency cash symbol this algorithm is to manage, as well as the starting cash in th...">SetAccountCurrency</a>(accountCurrency, startingCash);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="comment">        /// Set initial cash for the strategy while backtesting. During live mode this value is ignored</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="comment">        /// and replaced with the actual cash of your brokerage account.</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment">        /// &lt;param name=&quot;startingCash&quot;&gt;Starting cash for the strategy backtest&lt;/param&gt;</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment">        /// &lt;remarks&gt;Alias of SetCash(decimal)&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01568"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaafe91e352e82764602f1d70478a2324"> 1568</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaafe91e352e82764602f1d70478a2324" title="Set initial cash for the strategy while backtesting. During live mode this value is ignored and repla...">SetCash</a>(<span class="keywordtype">double</span> startingCash)</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaafe91e352e82764602f1d70478a2324" title="Set initial cash for the strategy while backtesting. During live mode this value is ignored and repla...">SetCash</a>((decimal)startingCash);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        }</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment">        /// Set initial cash for the strategy while backtesting. During live mode this value is ignored</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment">        /// and replaced with the actual cash of your brokerage account.</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="comment">        /// &lt;param name=&quot;startingCash&quot;&gt;Starting cash for the strategy backtest&lt;/param&gt;</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">        /// &lt;remarks&gt;Alias of SetCash(decimal)&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01580"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a1039503067cf3bae03ed0c21dcb16bf8"> 1580</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a1039503067cf3bae03ed0c21dcb16bf8" title="Set initial cash for the strategy while backtesting. During live mode this value is ignored and repla...">SetCash</a>(<span class="keywordtype">int</span> startingCash)</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaafe91e352e82764602f1d70478a2324" title="Set initial cash for the strategy while backtesting. During live mode this value is ignored and repla...">SetCash</a>((decimal)startingCash);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        }</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment">        /// Set initial cash for the strategy while backtesting. During live mode this value is ignored</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment">        /// and replaced with the actual cash of your brokerage account.</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">        /// &lt;param name=&quot;startingCash&quot;&gt;Starting cash for the strategy backtest&lt;/param&gt;</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01591"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a218bcecf6f8f8c6e676890cb962817cf"> 1591</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a218bcecf6f8f8c6e676890cb962817cf" title="Set initial cash for the strategy while backtesting. During live mode this value is ignored and repla...">SetCash</a>(decimal startingCash)</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            <span class="keywordflow">if</span> (!_locked)</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a442dd9df68f2b04aaaa9058e12c3fd1b" title="Portfolio object provieds easy access to the underlying security-holding properties; summed together ...">Portfolio</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityPortfolioManager.html#acac8f78a9d4193124aa4b735832fa1f6" title="Set the account currency cash this algorithm is to manage.">SetCash</a>(startingCash);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            }</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Algorithm.SetCash(): Cannot change cash available after algorithm initialized.&quot;</span>);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            }</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment">        /// Set the cash for the specified symbol</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The cash symbol to set&lt;/param&gt;</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">        /// &lt;param name=&quot;startingCash&quot;&gt;Decimal cash value of portfolio&lt;/param&gt;</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment">        /// &lt;param name=&quot;conversionRate&quot;&gt;The current conversion rate for the&lt;/param&gt;</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l01610"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a21a9c3f6feb30fdf1d76b1720e6d539e"> 1610</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a21a9c3f6feb30fdf1d76b1720e6d539e" title="Set the cash for the specified symbol">SetCash</a>(<span class="keywordtype">string</span> symbol, decimal startingCash, decimal conversionRate = 0)</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        {</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            <span class="keywordflow">if</span> (!_locked)</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a442dd9df68f2b04aaaa9058e12c3fd1b" title="Portfolio object provieds easy access to the underlying security-holding properties; summed together ...">Portfolio</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityPortfolioManager.html#acac8f78a9d4193124aa4b735832fa1f6" title="Set the account currency cash this algorithm is to manage.">SetCash</a>(symbol, startingCash, conversionRate);</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;            {</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Algorithm.SetCash(): Cannot change cash available after algorithm initialized.&quot;</span>);</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        }</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="comment">        /// Set the start date for backtest.</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<span class="comment">        /// &lt;param name=&quot;day&quot;&gt;Int starting date 1-30&lt;/param&gt;</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="comment">        /// &lt;param name=&quot;month&quot;&gt;Int month starting date&lt;/param&gt;</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="comment">        /// &lt;param name=&quot;year&quot;&gt;Int year starting date&lt;/param&gt;</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="comment">        /// &lt;remarks&gt;Wrapper for SetStartDate(DateTime).</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment">        /// Must be less than end date.</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">        /// Ignored in live trading mode.&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;SetStartDate(DateTime)&quot;/&gt;</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01633"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6a75c840c3180f42f4888649d51cb092"> 1633</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6a75c840c3180f42f4888649d51cb092" title="Set the start date for backtest.">SetStartDate</a>(<span class="keywordtype">int</span> year, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> day)</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        {</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;            {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                var start = <span class="keyword">new</span> DateTime(year, month, day);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                <span class="comment">// We really just want the date of the start, so it&#39;s 12am of the requested day (first moment of the day)</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                start = start.Date;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160; </div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6a75c840c3180f42f4888649d51cb092" title="Set the start date for backtest.">SetStartDate</a>(start);</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;            }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;            <span class="keywordflow">catch</span> (Exception err)</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException($<span class="stringliteral">&quot;Date Invalid: {err.Message}&quot;</span>);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;            }</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        }</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment">        /// Set the end date for a backtest run</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">        /// &lt;param name=&quot;day&quot;&gt;Int end date 1-30&lt;/param&gt;</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment">        /// &lt;param name=&quot;month&quot;&gt;Int month end date&lt;/param&gt;</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment">        /// &lt;param name=&quot;year&quot;&gt;Int year end date&lt;/param&gt;</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">        /// &lt;remarks&gt;Wrapper for SetEndDate(datetime).&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;SetEndDate(DateTime)&quot;/&gt;</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01659"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a943d15c5639b738612e96a146fde7fce"> 1659</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a943d15c5639b738612e96a146fde7fce" title="Set the end date for a backtest run">SetEndDate</a>(<span class="keywordtype">int</span> year, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> day)</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                var end = <span class="keyword">new</span> DateTime(year, month, day);</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160; </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                <span class="comment">// we want the end date to be just before the next day (last moment of the day)</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                end = end.Date.AddDays(1).Subtract(TimeSpan.FromTicks(1));</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a943d15c5639b738612e96a146fde7fce" title="Set the end date for a backtest run">SetEndDate</a>(end);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            }</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <span class="keywordflow">catch</span> (Exception err)</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException($<span class="stringliteral">&quot;Date Invalid: {err.Message}&quot;</span>);</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        }</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment">        /// Set the algorithm id (backtestId or live deployId for the algorithm).</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;<span class="comment">        /// &lt;param name=&quot;algorithmId&quot;&gt;String Algorithm Id&lt;/param&gt;</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="comment">        /// &lt;remarks&gt;Intended for internal QC Lean Engine use only as a setter for AlgorithmId&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01682"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8350e7fc4eed53d8e9618179a1218827"> 1682</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8350e7fc4eed53d8e9618179a1218827" title="Set the algorithm id (backtestId or live deployId for the algorithm).">SetAlgorithmId</a>(<span class="keywordtype">string</span> algorithmId)</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        {</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;            _algorithmId = algorithmId;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        }</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="comment">        /// Set the start date for the backtest</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="comment">        /// &lt;param name=&quot;start&quot;&gt;Datetime Start date for backtest&lt;/param&gt;</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;<span class="comment">        /// &lt;remarks&gt;Must be less than end date and within data available&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;SetStartDate(int, int, int)&quot;/&gt;</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01694"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae4b8b4bde7ccfe8e2ece5acbfefd183a"> 1694</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae4b8b4bde7ccfe8e2ece5acbfefd183a" title="Set the start date for the backtest">SetStartDate</a>(DateTime start)</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        {</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            <span class="comment">// no need to set this value in live mode, will be set using the current time.</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            <span class="keywordflow">if</span> (_liveMode) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            <span class="comment">//Round down</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            start = start.RoundDown(TimeSpan.FromDays(1));</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            <span class="comment">//Validate the start date:</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            <span class="comment">//1. Check range;</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            <span class="keywordflow">if</span> (start &lt; (<span class="keyword">new</span> DateTime(1900, 01, 01)))</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentOutOfRangeException(nameof(start), <span class="stringliteral">&quot;Please select a start date after January 1st, 1900.&quot;</span>);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            }</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            <span class="comment">//2. Check future date</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;            var todayInAlgorithmTimeZone = DateTime.UtcNow.ConvertFromUtc(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a>).Date;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            <span class="keywordflow">if</span> (start &gt; todayInAlgorithmTimeZone)</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentOutOfRangeException(nameof(start), <span class="stringliteral">&quot;Please select start date less than today&quot;</span>);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160; </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            <span class="comment">//3. Check not locked already:</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            <span class="keywordflow">if</span> (!_locked)</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            {</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                _start = _startDate = start;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2db914b00bbdc25368ee154f931fc0" title="Update the internal algorithm time frontier.">SetDateTime</a>(_startDate.ConvertToUtc(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a>));</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Algorithm.SetStartDate(): Cannot change start date after algorithm initialized.&quot;</span>);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            }</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="comment">        /// Set the end date for a backtest.</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">        /// &lt;param name=&quot;end&quot;&gt;Datetime value for end date&lt;/param&gt;</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment">        /// &lt;remarks&gt;Must be greater than the start date&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;SetEndDate(int, int, int)&quot;/&gt;</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l01735"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac63214e3f8709aa6d819a9600cea9d11"> 1735</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac63214e3f8709aa6d819a9600cea9d11" title="Set the end date for a backtest.">SetEndDate</a>(DateTime end)</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        {</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            <span class="comment">// no need to set this value in live mode, will be set using the current time.</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            <span class="keywordflow">if</span> (_liveMode) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; </div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            <span class="comment">//1. Check not locked already:</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            <span class="keywordflow">if</span> (_locked)</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Algorithm.SetEndDate(): Cannot change end date after algorithm initialized.&quot;</span>);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;            <span class="comment">//Validate:</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;            <span class="comment">//2. Check Range:</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;            var yesterdayInAlgorithmTimeZone = DateTime.UtcNow.ConvertFromUtc(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a>).Date.AddDays(-1);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;            <span class="keywordflow">if</span> (end &gt; yesterdayInAlgorithmTimeZone)</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            {</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                end = yesterdayInAlgorithmTimeZone;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;            }</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;            <span class="comment">//3. Make this at the very end of the requested date</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;            _endDate = end.RoundDown(TimeSpan.FromDays(1)).AddDays(1).AddTicks(-1);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        }</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="comment">        /// Lock the algorithm initialization to avoid user modifiying cash and data stream subscriptions</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="comment">        /// &lt;remarks&gt;Intended for Internal QC Lean Engine use only to prevent accidental manipulation of important properties&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AlgorithmFramework)]</div>
<div class="line"><a name="l01763"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a55c8c2c5e089ce872c9b0e89c3fe720e"> 1763</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a55c8c2c5e089ce872c9b0e89c3fe720e" title="Lock the algorithm initialization to avoid user modifiying cash and data stream subscriptions">SetLocked</a>()</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            _locked = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160; </div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            <span class="comment">// The algorithm is initialized, we can now send the initial name and tags updates</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa7d17582f69f8290fb3409be36f06ac9" title="Event fired algorithm&#39;s name is changed">NameUpdated</a>?.Invoke(<span class="keyword">this</span>, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9761fd68f9df7af645038e76c043a3fa" title="Public name for the algorithm as automatically generated by the IDE. Intended for helping distinguish...">Name</a>);</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a50e04c814f8c199d22dd57474a1b157b" title="Event fired when the tag collection is updated">TagsUpdated</a>?.Invoke(<span class="keyword">this</span>, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0356e6ef8313a1cf5392246fa363b89" title="A list of tags associated with the algorithm or the backtest, useful for categorization">Tags</a>);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        }</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;<span class="comment">        /// Gets whether or not this algorithm has been locked and fully initialized</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AlgorithmFramework)]</div>
<div class="line"><a name="l01776"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa5fee0bc11726b725bffb840d3e3a029"> 1776</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa5fee0bc11726b725bffb840d3e3a029" title="Gets whether or not this algorithm has been locked and fully initialized">GetLocked</a>()</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        {</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            <span class="keywordflow">return</span> _locked;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">        /// Set live mode state of the algorithm run: Public setter for the algorithm property LiveMode.</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(LiveTrading)]</div>
<div class="line"><a name="l01785"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9901b7d411298d0b1b7ccc480477d99c"> 1785</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9901b7d411298d0b1b7ccc480477d99c" title="Set live mode state of the algorithm run: Public setter for the algorithm property LiveMode.">SetLiveMode</a>(<span class="keywordtype">bool</span> live)</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            <span class="keywordflow">if</span> (!_locked)</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            {</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                _liveMode = live;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6612d33e0a052713f72fd5da1c57b423" title="Notification Manager for Sending Live Runtime Notifications to users about important events.">Notify</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Notifications_1_1NotificationManager.html" title="Local/desktop implementation of messaging system for Lean Engine.">NotificationManager</a>(live);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                <a class="code" href="classQuantConnect_1_1Statistics_1_1TradeBuilder.html" title="The TradeBuilder class generates trades from executions and market price updates">TradeBuilder</a>.<a class="code" href="classQuantConnect_1_1Statistics_1_1TradeBuilder.html#a36ad17c727161c8fb7a25109941e9a48" title="Sets the live mode flag">SetLiveMode</a>(live);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html#a3d297da1225d475edbc6279b26445244" title="Set live mode state of the algorithm">SetLiveMode</a>(live);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abd31d323023526ca3e7cae0dfd620134" title="Transaction Manager - Process transaction fills and order management.">Transactions</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityTransactionManager.html#ac1c99dfa4cecc8b1299a722e951bbfdf" title="Set live mode state of the algorithm">SetLiveMode</a>(live);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                <span class="keywordflow">if</span> (live)</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                    SetLiveModeStartDate();</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                    _algorithmMode = <a class="code" href="namespaceQuantConnect.html#a11f3427843701b79418a4a1bc919215e" title="Represents the deployment modes of an algorithm">AlgorithmMode</a>.Live;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            }</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        }</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">        /// Sets the algorithm running mode</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment">        /// &lt;param name=&quot;algorithmMode&quot;&gt;Algorithm mode&lt;/param&gt;</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae26809cf17dd004b076d8cc563862770"> 1806</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae26809cf17dd004b076d8cc563862770" title="Sets the algorithm running mode">SetAlgorithmMode</a>(<a class="code" href="namespaceQuantConnect.html#a11f3427843701b79418a4a1bc919215e" title="Represents the deployment modes of an algorithm">AlgorithmMode</a> algorithmMode)</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        {</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            <span class="keywordflow">if</span> (!_locked)</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            {</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                _algorithmMode = algorithmMode;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9901b7d411298d0b1b7ccc480477d99c" title="Set live mode state of the algorithm run: Public setter for the algorithm property LiveMode.">SetLiveMode</a>(_algorithmMode == <a class="code" href="namespaceQuantConnect.html#a11f3427843701b79418a4a1bc919215e" title="Represents the deployment modes of an algorithm">AlgorithmMode</a>.Live);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;            }</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        }</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment">        /// Sets the algorithm deployment target</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="comment">        /// &lt;param name=&quot;deploymentTarget&quot;&gt;Deployment target&lt;/param&gt;</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9d7d63e4bdbc986d50ae5f2595da01a2"> 1819</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9d7d63e4bdbc986d50ae5f2595da01a2" title="Sets the algorithm deployment target">SetDeploymentTarget</a>(<a class="code" href="namespaceQuantConnect.html#abc29bce5b5b69662b3b9f7b6664707f4" title="Represents the types deployment targets for algorithms">DeploymentTarget</a> deploymentTarget)</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;            <span class="keywordflow">if</span> (!_locked)</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                _deploymentTarget = deploymentTarget;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        }</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">        /// Set the &lt;see cref=&quot;ITradeBuilder&quot;/&gt; implementation to generate trades from executions and market price updates</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l01831"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3896f06fcdbb98b982fb39c963b8a939"> 1831</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3896f06fcdbb98b982fb39c963b8a939" title="Set the ITradeBuilder implementation to generate trades from executions and market price updates">SetTradeBuilder</a>(<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ITradeBuilder.html" title="Generates trades from executions and market price updates">ITradeBuilder</a> tradeBuilder)</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            <a class="code" href="classQuantConnect_1_1Statistics_1_1TradeBuilder.html" title="The TradeBuilder class generates trades from executions and market price updates">TradeBuilder</a> = tradeBuilder;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;            <a class="code" href="classQuantConnect_1_1Statistics_1_1TradeBuilder.html" title="The TradeBuilder class generates trades from executions and market price updates">TradeBuilder</a>.<a class="code" href="classQuantConnect_1_1Statistics_1_1TradeBuilder.html#a36ad17c727161c8fb7a25109941e9a48" title="Sets the live mode flag">SetLiveMode</a>(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5589ce6040feaa092de0d8a8da8e6ee5" title="Boolean property indicating the algorithm is currently running in live mode.">LiveMode</a>);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            <a class="code" href="classQuantConnect_1_1Statistics_1_1TradeBuilder.html" title="The TradeBuilder class generates trades from executions and market price updates">TradeBuilder</a>.<a class="code" href="classQuantConnect_1_1Statistics_1_1TradeBuilder.html#a21a25b898b58f28dc0386e49d4f15ec3" title="Sets the security manager instance">SetSecurityManager</a>(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        }</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">        /// Add specified data to our data subscriptions. QuantConnect will funnel this data to the handle data routine.</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="comment">        /// &lt;param name=&quot;securityType&quot;&gt;MarketType Type: Equity, Commodity, Future, FOREX or Crypto&lt;/param&gt;</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The security ticker&lt;/param&gt;</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the Data Required&lt;/param&gt;</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;When no data available on a tradebar, return the last data that was generated&lt;/param&gt;</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment">        /// &lt;param name=&quot;extendedMarketHours&quot;&gt;Use extended market hours data&lt;/param&gt;</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataMappingMode&quot;&gt;The contract mapping mode to use for the security&lt;/param&gt;</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataNormalizationMode&quot;&gt;The price scaling mode to use for the security&lt;/param&gt;</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l01849"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a101da8582e6819d82780f37a3b3162e0"> 1849</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a101da8582e6819d82780f37a3b3162e0" title="Add specified data to our data subscriptions. QuantConnect will funnel this data to the handle data r...">AddSecurity</a>(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a> securityType, <span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, <span class="keywordtype">bool</span> extendedMarketHours = <span class="keyword">false</span>,</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            <a class="code" href="namespaceQuantConnect.html#ae572e4a81dfe6479f68ccb1a3bf5d693" title="Continuous contracts mapping modes">DataMappingMode</a>? dataMappingMode = <span class="keyword">null</span>, <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>? dataNormalizationMode = <span class="keyword">null</span>)</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        {</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a101da8582e6819d82780f37a3b3162e0" title="Add specified data to our data subscriptions. QuantConnect will funnel this data to the handle data r...">AddSecurity</a>(securityType, ticker, resolution, fillForward, <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>, extendedMarketHours, dataMappingMode, dataNormalizationMode);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        }</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment">        /// Add specified data to required list. QC will funnel this data to the handle data routine.</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment">        /// &lt;param name=&quot;securityType&quot;&gt;MarketType Type: Equity, Commodity, Future, FOREX or Crypto&lt;/param&gt;</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The security ticker&lt;/param&gt;</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the Data Required&lt;/param&gt;</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;When no data available on a tradebar, return the last data that was generated&lt;/param&gt;</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;Custom leverage per security&lt;/param&gt;</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;<span class="comment">        /// &lt;param name=&quot;extendedMarketHours&quot;&gt;Use extended market hours data&lt;/param&gt;</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataMappingMode&quot;&gt;The contract mapping mode to use for the security&lt;/param&gt;</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataNormalizationMode&quot;&gt;The price scaling mode to use for the security&lt;/param&gt;</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="comment">        /// &lt;remarks&gt; AddSecurity(SecurityType securityType, Symbol symbol, Resolution resolution, bool fillForward, decimal leverage, bool extendedMarketHours)&lt;/remarks&gt;</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l01868"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a1490ebbc5f26b610a97f18ebbd461843"> 1868</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a1490ebbc5f26b610a97f18ebbd461843" title="Add specified data to required list. QC will funnel this data to the handle data routine.">AddSecurity</a>(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a> securityType, <span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution, <span class="keywordtype">bool</span> fillForward, decimal leverage, <span class="keywordtype">bool</span> extendedMarketHours,</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;            <a class="code" href="namespaceQuantConnect.html#ae572e4a81dfe6479f68ccb1a3bf5d693" title="Continuous contracts mapping modes">DataMappingMode</a>? dataMappingMode = <span class="keyword">null</span>, <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>? dataNormalizationMode = <span class="keyword">null</span>)</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        {</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a101da8582e6819d82780f37a3b3162e0" title="Add specified data to our data subscriptions. QuantConnect will funnel this data to the handle data r...">AddSecurity</a>(securityType, ticker, resolution, <span class="keyword">null</span>, fillForward, leverage, extendedMarketHours, dataMappingMode, dataNormalizationMode);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        }</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="comment">        /// Set a required SecurityType-symbol and resolution for algorithm</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment">        /// &lt;param name=&quot;securityType&quot;&gt;MarketType Type: Equity, Commodity, Future, FOREX or Crypto&lt;/param&gt;</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The security ticker, e.g. AAPL&lt;/param&gt;</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the MarketType required: MarketData, Second or Minute&lt;/param&gt;</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The market the requested security belongs to, such as &#39;usa&#39; or &#39;fxcm&#39;&lt;/param&gt;</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice.&lt;/param&gt;</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;leverage for this security&lt;/param&gt;</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">        /// &lt;param name=&quot;extendedMarketHours&quot;&gt;Use extended market hours data&lt;/param&gt;</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataMappingMode&quot;&gt;The contract mapping mode to use for the security&lt;/param&gt;</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataNormalizationMode&quot;&gt;The price scaling mode to use for the security&lt;/param&gt;</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l01887"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af1f764316cffc3d289d335df1edef76e"> 1887</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af1f764316cffc3d289d335df1edef76e" title="Set a required SecurityType-symbol and resolution for algorithm">AddSecurity</a>(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a> securityType, <span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution, <span class="keywordtype">string</span> market, <span class="keywordtype">bool</span> fillForward, decimal leverage, <span class="keywordtype">bool</span> extendedMarketHours,</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            <a class="code" href="namespaceQuantConnect.html#ae572e4a81dfe6479f68ccb1a3bf5d693" title="Continuous contracts mapping modes">DataMappingMode</a>? dataMappingMode = <span class="keyword">null</span>, <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>? dataNormalizationMode = <span class="keyword">null</span>)</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            <span class="comment">// if AddSecurity method is called to add an option or a future, we delegate a call to respective methods</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            <span class="keywordflow">if</span> (securityType == <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Option)</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aed2d974226aa0e08da9abc1da610c45b" title="Creates and adds a new equity Option security to the algorithm">AddOption</a>(ticker, resolution, market, fillForward, leverage);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;            }</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160; </div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            <span class="keywordflow">if</span> (securityType == <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Future)</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            {</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae40bde218ca98e593a076fd671837bd4" title="Creates and adds a new Future security to the algorithm">AddFuture</a>(ticker, resolution, market, fillForward, leverage, extendedMarketHours, dataMappingMode, dataNormalizationMode);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            }</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            {</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                <span class="keywordflow">if</span> (market == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a>.DefaultMarkets.TryGetValue(securityType, out market))</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                    {</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> KeyNotFoundException($<span class="stringliteral">&quot;No default market set for security type: {securityType}&quot;</span>);</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                    }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160; </div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1SymbolCache.html" title="Provides a string-&gt;Symbol mapping to allow for user defined strings to be lifted into a Symbol This i...">SymbolCache</a>.<a class="code" href="classQuantConnect_1_1SymbolCache.html#a131a5bb015b9a603328d0eddfe90c610" title="Gets the Symbol object that is mapped to the specified string ticker symbol">TryGetSymbol</a>(ticker, out symbol) ||</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                    symbol.ID.Market != market ||</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                    symbol.SecurityType != securityType)</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                {</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                    symbol = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#a350b9a625cf7bad95da82894be3cd0a8" title="Provides a convenience method for creating a Symbol for most security types. This method currently do...">Create</a>(ticker, securityType, market);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;                }</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160; </div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a101da8582e6819d82780f37a3b3162e0" title="Add specified data to our data subscriptions. QuantConnect will funnel this data to the handle data r...">AddSecurity</a>(symbol, resolution, fillForward, leverage, extendedMarketHours, dataMappingMode, dataNormalizationMode);</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;            }</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            <span class="keywordflow">catch</span> (Exception err)</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            {</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7bdcfe7bf87e4688620dfc0cbac212aa" title="Send a string error message to the Console.">Error</a>(<span class="stringliteral">&quot;Algorithm.AddSecurity(): &quot;</span> + err);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            }</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        }</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="comment">        /// Set a required SecurityType-symbol and resolution for algorithm</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The security Symbol&lt;/param&gt;</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the MarketType required: MarketData, Second or Minute&lt;/param&gt;</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice.&lt;/param&gt;</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;leverage for this security&lt;/param&gt;</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment">        /// &lt;param name=&quot;extendedMarketHours&quot;&gt;Use extended market hours data&lt;/param&gt;</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataMappingMode&quot;&gt;The contract mapping mode to use for the security&lt;/param&gt;</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataNormalizationMode&quot;&gt;The price scaling mode to use for the security&lt;/param&gt;</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="comment">        /// &lt;param name=&quot;contractDepthOffset&quot;&gt;The continuous contract desired offset from the current front month.</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<span class="comment">        /// For example, 0 (default) will use the front month, 1 will use the back month contract&lt;/param&gt;</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;<span class="comment">        /// &lt;returns&gt;The new Security that was added to the algorithm&lt;/returns&gt;</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l01942"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afcdaf47586751fe6105f43d044b7cf70"> 1942</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afcdaf47586751fe6105f43d044b7cf70" title="Set a required SecurityType-symbol and resolution for algorithm">AddSecurity</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>, <span class="keywordtype">bool</span> extendedMarketHours = <span class="keyword">false</span>,</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;            <a class="code" href="namespaceQuantConnect.html#ae572e4a81dfe6479f68ccb1a3bf5d693" title="Continuous contracts mapping modes">DataMappingMode</a>? dataMappingMode = <span class="keyword">null</span>, <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>? dataNormalizationMode = <span class="keyword">null</span>, <span class="keywordtype">int</span> contractDepthOffset = 0)</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            <span class="comment">// allow users to specify negative numbers, we get the abs of it</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            var contractOffset = (uint)Math.Abs(contractDepthOffset);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;            <span class="keywordflow">if</span> (contractOffset &gt; <a class="code" href="classQuantConnect_1_1Securities_1_1Futures.html" title="Futures static class contains shortcut definitions of major futures contracts available for trading">Futures</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Futures.html#af4dfe06f9ef865b846e5048e62f115d5" title="The maximum supported contract offset depth">MaximumContractDepthOffset</a>)</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentOutOfRangeException(nameof(contractDepthOffset), $<span class="stringliteral">&quot;&#39;contractDepthOffset&#39; current maximum value is {Futures.MaximumContractDepthOffset}.&quot;</span> +</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                    $<span class="stringliteral">&quot; Front month (0) and only {Futures.MaximumContractDepthOffset} back month contracts are currently supported.&quot;</span>);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;            }</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160; </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            var isCanonical = symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a1f3c25223fd9a7b753a4f84ece6469ab" title="Method returns true, if symbol is a derivative canonical symbol">IsCanonical</a>();</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160; </div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            <span class="comment">// Short-circuit to AddOptionContract because it will add the underlying if required</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            <span class="keywordflow">if</span> (!isCanonical &amp;&amp; symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a4b811550395ad9af00dacee29bde4125" title="Gets the security type of the symbol">SecurityType</a>.IsOption())</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            {</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0f7ec3a574e47b4ac26448590c4ef685" title="Creates and adds a new single Option contract to the algorithm">AddOptionContract</a>(symbol, resolution, fillForward, leverage, extendedMarketHours);</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;            }</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160; </div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            var isFilteredSubscription = !isCanonical;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;            List&lt;SubscriptionDataConfig&gt; configs;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            <span class="comment">// we pass dataNormalizationMode to SubscriptionManager.SubscriptionDataConfigService.Add conditionally,</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <span class="comment">// so the default value for its argument is used when the it is null here.</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            <span class="keywordflow">if</span> (dataNormalizationMode.HasValue)</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                configs = <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a99db80445552627b0fecfab52d5b0106" title="Instance that implements ISubscriptionDataConfigService">SubscriptionDataConfigService</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ISubscriptionDataConfigService.html#a37d844a8ee78541da26b4732ed6a0a14" title="Creates and adds a list of SubscriptionDataConfig for a given symbol and configuration....">Add</a>(symbol,</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                    resolution,</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                    fillForward,</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                    extendedMarketHours,</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                    isFilteredSubscription,</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                    dataNormalizationMode: dataNormalizationMode.<a class="code" href="classQuantConnect_1_1Symbol.html#ad77256b8d686f7e2699e040e8e703b94" title="Gets the current symbol for this ticker">Value</a>,</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                    contractDepthOffset: (uint)contractDepthOffset);</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            }</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            {</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                configs = <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a99db80445552627b0fecfab52d5b0106" title="Instance that implements ISubscriptionDataConfigService">SubscriptionDataConfigService</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ISubscriptionDataConfigService.html#a37d844a8ee78541da26b4732ed6a0a14" title="Creates and adds a list of SubscriptionDataConfig for a given symbol and configuration....">Add</a>(symbol,</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                   resolution,</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                   fillForward,</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                   extendedMarketHours,</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                   isFilteredSubscription,</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                   contractDepthOffset: (uint)contractDepthOffset);</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;            }</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            var security = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html#a0aa9a5d066fcba5dfcc7ae10ac22b550" title="Creates a new security">CreateSecurity</a>(symbol, configs, leverage);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            <span class="keywordflow">if</span> (isCanonical)</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            {</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                security.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a20a54ac8cf420b0b2c23dd436858a969" title="Gets or sets whether or not this security should be considered tradable">IsTradable</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html#a5511dc98ccb9ce95207c5173f8afe1be" title="Add a new security with this symbol to the collection.">Add</a>(security);</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160; </div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                <span class="comment">// add this security to the user defined universe</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1Universe.html" title="Provides a base class for all universes to derive from.">Universe</a> universe;</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html" title="Manages the algorithm&#39;s collection of universes">UniverseManager</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html#ac77274cc6fd4c643ae9f40830c6ae125" title="Determines whether the T:System.Collections.Generic.IDictionary`2 contains an element with the specif...">ContainsKey</a>(symbol))</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                {</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                    var canonicalConfig = configs.First();</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                    var settings = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afd9e30918bab39cac5a9a8ee79423cd7" title="Gets the universe settings to be used when adding securities via universe selection">UniverseSettings</a>(canonicalConfig.Resolution, leverage, fillForward, extendedMarketHours, <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html#afffe491d9254b19df240493cec5b7d93" title="Defines the minimum amount of time a security must be in the universe before being removed.">MinimumTimeInUniverse</a>)</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                    {</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                        Asynchronous = <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html#a0fb2468fad684f855c2e632c3a658807" title="True if universe selection can run asynchronous">Asynchronous</a></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;                    };</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                    <span class="keywordflow">if</span> (symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a4b811550395ad9af00dacee29bde4125" title="Gets the security type of the symbol">SecurityType</a>.IsOption())</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                    {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                        universe = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1OptionChainUniverse.html" title="Defines a universe for a single option chain">OptionChainUniverse</a>((<a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a>)security, settings);</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                    }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                    {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                        <span class="comment">// add the expected configurations of the canonical symbol right away, will allow it to warmup and indicators register to them</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                        var dataTypes = <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a4191b1d6d6180db40dd51e5b78981d15" title="Get the data feed types for a given SecurityType Resolution">LookupSubscriptionConfigDataTypes</a>(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Future,</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                            GetResolution(symbol, resolution, <span class="keyword">null</span>), isCanonical: <span class="keyword">false</span>);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                        var continuousUniverseSettings = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afd9e30918bab39cac5a9a8ee79423cd7" title="Gets the universe settings to be used when adding securities via universe selection">UniverseSettings</a>(settings)</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                        {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                            ExtendedMarketHours = extendedMarketHours,</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                            <a class="code" href="namespaceQuantConnect.html#ae572e4a81dfe6479f68ccb1a3bf5d693" title="Continuous contracts mapping modes">DataMappingMode</a> = dataMappingMode ?? <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html#a6c3f6ebda36e305fb0c2c465749232fb" title="Defines how universe data is mapped together">DataMappingMode</a>,</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                            <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a> = dataNormalizationMode ?? <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a>.GetUniverseNormalizationModeOrDefault(symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a4b811550395ad9af00dacee29bde4125" title="Gets the security type of the symbol">SecurityType</a>),</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                            ContractDepthOffset = (int)contractOffset,</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                            SubscriptionDataTypes = dataTypes,</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                            Asynchronous = <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html#a0fb2468fad684f855c2e632c3a658807" title="True if universe selection can run asynchronous">Asynchronous</a></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                        };</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                        <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1ContinuousContractUniverse.html" title="Continuous contract universe selection that based on the requested mapping mode will select each symb...">ContinuousContractUniverse</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1ContinuousContractUniverse.html#a93d7d4b0b7b8d47824e2bd54ad5b0c5d" title="Helper method to add and get the required configurations associated with a continuous universe">AddConfigurations</a>(<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a99db80445552627b0fecfab52d5b0106" title="Instance that implements ISubscriptionDataConfigService">SubscriptionDataConfigService</a>, continuousUniverseSettings, security.Symbol);</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160; </div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                        <span class="comment">// let&#39;s add a MHDB entry for the continuous symbol using the associated security</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                        var continuousContractSymbol = <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1ContinuousContractUniverse.html" title="Continuous contract universe selection that based on the requested mapping mode will select each symb...">ContinuousContractUniverse</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1ContinuousContractUniverse.html#a8936fedb0ce5c206ac4bb0751c449552" title="Creates a continuous universe symbol">CreateSymbol</a>(security.Symbol);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                        <a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html" title="Provides access to exchange hours and raw data times zones in various markets">MarketHoursDatabase</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html#a2425acdf83abbd16218a008643c7edbe" title="Sets the entry for the specified market/symbol/security-type. This is intended to be used by custom d...">SetEntry</a>(continuousContractSymbol.ID.Market,</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                            continuousContractSymbol.ID.Symbol,</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                            continuousContractSymbol.ID.SecurityType,</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                            security.Exchange.Hours);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                        <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aeac560d821c1d05c6af8864ec7075a72" title="Creates a new universe and adds it to the algorithm. This is for coarse fundamental US Equity data an...">AddUniverse</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1ContinuousContractUniverse.html" title="Continuous contract universe selection that based on the requested mapping mode will select each symb...">ContinuousContractUniverse</a>(security, continuousUniverseSettings, <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5589ce6040feaa092de0d8a8da8e6ee5" title="Boolean property indicating the algorithm is currently running in live mode.">LiveMode</a>, <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionDataConfig.html" title="Subscription data required including the type of data.">SubscriptionDataConfig</a>(canonicalConfig, symbol: continuousContractSymbol)));</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                        universe = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1FuturesChainUniverse.html" title="Defines a universe for a single futures chain">FuturesChainUniverse</a>((<a class="code" href="classQuantConnect_1_1Securities_1_1Future_1_1Future.html" title="Futures Security Object Implementation for Futures Assets">Future</a>)security, settings);</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                    }</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160; </div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                    <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aeac560d821c1d05c6af8864ec7075a72" title="Creates a new universe and adds it to the algorithm. This is for coarse fundamental US Equity data an...">AddUniverse</a>(universe);</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                }</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                <span class="keywordflow">return</span> security;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;            }</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160; </div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            <span class="keywordflow">return</span> AddToUserDefinedUniverse(security, configs);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;        }</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;Equity&quot;/&gt; security to the algorithm</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The equity ticker symbol&lt;/param&gt;</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The equity&#39;s market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default value is null and looked up using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for this equity. Default is set by &lt;see cref=&quot;SecurityInitializer&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment">        /// &lt;param name=&quot;extendedMarketHours&quot;&gt;True to send data during pre and post market sessions. Default is &lt;value&gt;false&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataNormalizationMode&quot;&gt;The price scaling mode to use for the equity&lt;/param&gt;</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Equity&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02052"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aae4bbf25961344c2ad4ca7270966f90d"> 2052</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Equity_1_1Equity.html" title="Equity Security Type : Extension of the underlying Security class for equity specific behaviours.">Equity</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aae4bbf25961344c2ad4ca7270966f90d" title="Creates and adds a new Equity security to the algorithm">AddEquity</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>,</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;            decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>, <span class="keywordtype">bool</span> extendedMarketHours = <span class="keyword">false</span>, <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>? dataNormalizationMode = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;            <span class="keywordflow">return</span> AddSecurity&lt;Equity&gt;(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Equity, ticker, resolution, market, fillForward, leverage, extendedMarketHours, normalizationMode: dataNormalizationMode);</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="comment">        /// Creates and adds a new equity &lt;see cref=&quot;Option&quot;/&gt; security to the algorithm</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="comment">        /// &lt;param name=&quot;underlying&quot;&gt;The underlying equity ticker&lt;/param&gt;</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The equity&#39;s market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default is value null and looked up using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for this equity. Default is set by &lt;see cref=&quot;SecurityInitializer&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Option&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02068"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aed2d974226aa0e08da9abc1da610c45b"> 2068</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aed2d974226aa0e08da9abc1da610c45b" title="Creates and adds a new equity Option security to the algorithm">AddOption</a>(<span class="keywordtype">string</span> underlying, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>)</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;            <span class="keywordflow">if</span> (market == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;            {</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a>.DefaultMarkets.TryGetValue(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Option, out market))</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> KeyNotFoundException($<span class="stringliteral">&quot;No default market set for security type: {SecurityType.Option}&quot;</span>);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;            }</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160; </div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;            var underlyingSymbol = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#a350b9a625cf7bad95da82894be3cd0a8" title="Provides a convenience method for creating a Symbol for most security types. This method currently do...">Create</a>(underlying, <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Equity, market);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aed2d974226aa0e08da9abc1da610c45b" title="Creates and adds a new equity Option security to the algorithm">AddOption</a>(underlyingSymbol, resolution, market, fillForward, leverage);</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        }</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;Option&quot;/&gt; security to the algorithm.</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="comment">        /// This method can be used to add options with non-equity asset classes</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="comment">        /// to the algorithm (e.g. Future Options).</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="comment">        /// &lt;param name=&quot;underlying&quot;&gt;Underlying asset Symbol to use as the option&#39;s underlying&lt;/param&gt;</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The option&#39;s market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default value is null, but will be resolved using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, data will be provided to the algorithm every Second, Minute, Hour, or Day, while the asset is open and depending on the Resolution this option was configured to use.&lt;/param&gt;</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for the &lt;/param&gt;</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;<span class="comment">        /// &lt;returns&gt;The new option security instance&lt;/returns&gt;</span></div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="comment">        /// &lt;exception cref=&quot;KeyNotFoundException&quot;&gt;&lt;/exception&gt;</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02095"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0c4386ba9e993175de4d9abf0bb940a3"> 2095</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0c4386ba9e993175de4d9abf0bb940a3" title="Creates and adds a new Option security to the algorithm. This method can be used to add options with ...">AddOption</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> underlying, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>)</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        {</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aed2d974226aa0e08da9abc1da610c45b" title="Creates and adds a new equity Option security to the algorithm">AddOption</a>(underlying, <span class="keyword">null</span>, resolution, market, fillForward, leverage);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        }</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;Option&quot;/&gt; security to the algorithm.</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment">        /// This method can be used to add options with non-equity asset classes</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment">        /// to the algorithm (e.g. Future Options).</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;<span class="comment">        /// &lt;param name=&quot;underlying&quot;&gt;Underlying asset Symbol to use as the option&#39;s underlying&lt;/param&gt;</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="comment">        /// &lt;param name=&quot;targetOption&quot;&gt;The target option ticker. This is useful when the option ticker does not match the underlying, e.g. SPX index and the SPXW weekly option. If null is provided will use underlying&lt;/param&gt;</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The option&#39;s market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default value is null, but will be resolved using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, data will be provided to the algorithm every Second, Minute, Hour, or Day, while the asset is open and depending on the Resolution this option was configured to use.&lt;/param&gt;</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for the &lt;/param&gt;</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="comment">        /// &lt;returns&gt;The new option security instance&lt;/returns&gt;</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="comment">        /// &lt;exception cref=&quot;KeyNotFoundException&quot;&gt;&lt;/exception&gt;</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02114"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3cea39b93f311bd9a9bff3231f6399c8"> 2114</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3cea39b93f311bd9a9bff3231f6399c8" title="Creates and adds a new Option security to the algorithm. This method can be used to add options with ...">AddOption</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> underlying, <span class="keywordtype">string</span> targetOption, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>,</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            <span class="keywordtype">string</span> market = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>)</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        {</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            var optionType = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#ae4c4c626fa68f4bc1e67e5ee8d9870fc" title="Determines the SecurityType based on the underlying Symbol&#39;s SecurityType">GetOptionTypeFromUnderlying</a>(underlying);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160; </div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;            <span class="keywordflow">if</span> (market == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            {</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a>.DefaultMarkets.TryGetValue(optionType, out market))</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                {</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> KeyNotFoundException($<span class="stringliteral">&quot;No default market set for security type: {optionType}&quot;</span>);</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                }</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            }</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; </div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> canonicalSymbol;</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160; </div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            <span class="keywordtype">string</span> alias;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;            <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(targetOption))</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;            {</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                alias = $<span class="stringliteral">&quot;?{targetOption}&quot;</span>;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            }</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            {</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                alias = $<span class="stringliteral">&quot;?{underlying.Value}&quot;</span>;</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            }</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1SymbolCache.html" title="Provides a string-&gt;Symbol mapping to allow for user defined strings to be lifted into a Symbol This i...">SymbolCache</a>.<a class="code" href="classQuantConnect_1_1SymbolCache.html#a131a5bb015b9a603328d0eddfe90c610" title="Gets the Symbol object that is mapped to the specified string ticker symbol">TryGetSymbol</a>(alias, out canonicalSymbol) ||</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                canonicalSymbol.ID.Market != market ||</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                !canonicalSymbol.SecurityType.IsOption())</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;            {</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                canonicalSymbol = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#af65aa2b28fbdc943c979198070eb16a2" title="Simple method to create the canonical option symbol for any given underlying symbol">CreateCanonicalOption</a>(underlying, targetOption, market, alias);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;            }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160; </div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a>)<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a101da8582e6819d82780f37a3b3162e0" title="Add specified data to our data subscriptions. QuantConnect will funnel this data to the handle data r...">AddSecurity</a>(canonicalSymbol, resolution, fillForward, leverage);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;Future&quot;/&gt; security to the algorithm</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The future ticker&lt;/param&gt;</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The futures market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default is value null and looked up using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for this equity. Default is set by &lt;see cref=&quot;SecurityInitializer&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment">        /// &lt;param name=&quot;extendedMarketHours&quot;&gt;Use extended market hours data&lt;/param&gt;</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataMappingMode&quot;&gt;The contract mapping mode to use for the continuous future contract&lt;/param&gt;</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment">        /// &lt;param name=&quot;dataNormalizationMode&quot;&gt;The price scaling mode to use for the continuous future contract&lt;/param&gt;</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment">        /// &lt;param name=&quot;contractDepthOffset&quot;&gt;The continuous future contract desired offset from the current front month.</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment">        /// For example, 0 (default) will use the front month, 1 will use the back month contract&lt;/param&gt;</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Future&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02163"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae40bde218ca98e593a076fd671837bd4"> 2163</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Future_1_1Future.html" title="Futures Security Object Implementation for Futures Assets">Future</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae40bde218ca98e593a076fd671837bd4" title="Creates and adds a new Future security to the algorithm">AddFuture</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <span class="keyword">null</span>,</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;            <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>, <span class="keywordtype">bool</span> extendedMarketHours = <span class="keyword">false</span>,</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;            <a class="code" href="namespaceQuantConnect.html#ae572e4a81dfe6479f68ccb1a3bf5d693" title="Continuous contracts mapping modes">DataMappingMode</a>? dataMappingMode = <span class="keyword">null</span>, <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>? dataNormalizationMode = <span class="keyword">null</span>, <span class="keywordtype">int</span> contractDepthOffset = 0)</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;            <span class="keywordflow">if</span> (market == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;            {</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Securities_1_1SymbolPropertiesDatabase.html" title="Provides access to specific properties for various symbols">SymbolPropertiesDatabase</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SymbolPropertiesDatabase.html#a5a7baeddd03bfc7fb60cef8ab2e6834b" title="Tries to get the market for the provided symbol/security type">TryGetMarket</a>(ticker, <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Future, out market)</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                    &amp;&amp; !<a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a>.DefaultMarkets.TryGetValue(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Future, out market))</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> KeyNotFoundException($<span class="stringliteral">&quot;No default market set for security type: {SecurityType.Future}&quot;</span>);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                }</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            }</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160; </div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> canonicalSymbol;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;            var alias = <span class="stringliteral">&quot;/&quot;</span> + ticker;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1SymbolCache.html" title="Provides a string-&gt;Symbol mapping to allow for user defined strings to be lifted into a Symbol This i...">SymbolCache</a>.<a class="code" href="classQuantConnect_1_1SymbolCache.html#a131a5bb015b9a603328d0eddfe90c610" title="Gets the Symbol object that is mapped to the specified string ticker symbol">TryGetSymbol</a>(alias, out canonicalSymbol) ||</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                canonicalSymbol.ID.Market != market ||</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;                canonicalSymbol.SecurityType != <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Future)</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;            {</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                canonicalSymbol = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#a350b9a625cf7bad95da82894be3cd0a8" title="Provides a convenience method for creating a Symbol for most security types. This method currently do...">Create</a>(ticker, <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Future, market, alias);</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;            }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160; </div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="classQuantConnect_1_1Securities_1_1Future_1_1Future.html" title="Futures Security Object Implementation for Futures Assets">Future</a>)<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a101da8582e6819d82780f37a3b3162e0" title="Add specified data to our data subscriptions. QuantConnect will funnel this data to the handle data r...">AddSecurity</a>(canonicalSymbol, resolution, fillForward, leverage, extendedMarketHours, dataMappingMode: dataMappingMode,</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                dataNormalizationMode: dataNormalizationMode, contractDepthOffset: contractDepthOffset);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        }</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment">        /// Creates and adds a new single &lt;see cref=&quot;Future&quot;/&gt; contract to the algorithm</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The futures contract symbol&lt;/param&gt;</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for this equity. Default is set by &lt;see cref=&quot;SecurityInitializer&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="comment">        /// &lt;param name=&quot;extendedMarketHours&quot;&gt;Use extended market hours data&lt;/param&gt;</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Future&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02199"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a896e634226bc3132055e766b03890992"> 2199</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Future_1_1Future.html" title="Futures Security Object Implementation for Futures Assets">Future</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a896e634226bc3132055e766b03890992" title="Creates and adds a new single Future contract to the algorithm">AddFutureContract</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>,</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>, <span class="keywordtype">bool</span> extendedMarketHours = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="classQuantConnect_1_1Securities_1_1Future_1_1Future.html" title="Futures Security Object Implementation for Futures Assets">Future</a>)<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a101da8582e6819d82780f37a3b3162e0" title="Add specified data to our data subscriptions. QuantConnect will funnel this data to the handle data r...">AddSecurity</a>(symbol, resolution, fillForward, leverage, extendedMarketHours);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        }</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment">        /// Creates and adds a new Future Option contract to the algorithm.</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The &lt;see cref=&quot;Future&quot;/&gt; canonical symbol (i.e. Symbol returned from &lt;see cref=&quot;AddFuture&quot;/&gt;)&lt;/param&gt;</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="comment">        /// &lt;param name=&quot;optionFilter&quot;&gt;Filter to apply to option contracts loaded as part of the universe&lt;/param&gt;</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Option&quot;/&gt; security, containing a &lt;see cref=&quot;Future&quot;/&gt; as its underlying.&lt;/returns&gt;</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="comment">        /// &lt;exception cref=&quot;ArgumentException&quot;&gt;The symbol provided is not canonical.&lt;/exception&gt;</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02213"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3759799dd86beb97cfa337b052d14a08"> 2213</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3759799dd86beb97cfa337b052d14a08" title="Creates and adds a new Future Option contract to the algorithm.">AddFutureOption</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol, Func&lt;OptionFilterUniverse, OptionFilterUniverse&gt; optionFilter = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        {</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;            <span class="keywordflow">if</span> (!symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a1f3c25223fd9a7b753a4f84ece6469ab" title="Method returns true, if symbol is a derivative canonical symbol">IsCanonical</a>())</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;            {</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Symbol provided must be canonical (i.e. the Symbol returned from AddFuture(), not AddFutureContract().&quot;</span>);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;            }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac8766651d133584cee7f03ba6d53bb86" title="Creates a new universe selection model and adds it to the algorithm. This universe selection model wi...">AddUniverseOptions</a>(symbol, optionFilter);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;        }</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="comment">        /// Adds a future option contract to the algorithm.</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;Option contract Symbol&lt;/param&gt;</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the option contract, i.e. the granularity of the data&lt;/param&gt;</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, this will fill in missing data points with the previous data point&lt;/param&gt;</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The leverage to apply to the option contract&lt;/param&gt;</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">        /// &lt;param name=&quot;extendedMarketHours&quot;&gt;Use extended market hours data&lt;/param&gt;</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">        /// &lt;returns&gt;Option security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">        /// &lt;exception cref=&quot;ArgumentException&quot;&gt;Symbol is canonical (i.e. a generic Symbol returned from &lt;see cref=&quot;AddFuture&quot;/&gt; or &lt;see cref=&quot;AddOption(string, Resolution?, string, bool, decimal)&quot;/&gt;)&lt;/exception&gt;</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02234"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ada6451c3b45f03209b586c6bc661ccb0"> 2234</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ada6451c3b45f03209b586c6bc661ccb0" title="Adds a future option contract to the algorithm.">AddFutureOptionContract</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>,</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>, <span class="keywordtype">bool</span> extendedMarketHours = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        {</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            <span class="keywordflow">if</span> (symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a1f3c25223fd9a7b753a4f84ece6469ab" title="Method returns true, if symbol is a derivative canonical symbol">IsCanonical</a>())</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Expected non-canonical Symbol (i.e. a Symbol representing a specific Future contract&quot;</span>);</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            }</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0f7ec3a574e47b4ac26448590c4ef685" title="Creates and adds a new single Option contract to the algorithm">AddOptionContract</a>(symbol, resolution, fillForward, leverage, extendedMarketHours);</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        }</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment">        /// Creates and adds index options to the algorithm.</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The ticker of the Index Option&lt;/param&gt;</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the index option contracts, i.e. the granularity of the data&lt;/param&gt;</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;Market of the index option. If no market is provided, we default to &lt;see cref=&quot;Market.USA&quot;/&gt; &lt;/param&gt;</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, this will fill in missing data points with the previous data point&lt;/param&gt;</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="comment">        /// &lt;returns&gt;Canonical Option security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02254"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad2967cee8adcfa412214339d810b30e3"> 2254</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad2967cee8adcfa412214339d810b30e3" title="Creates and adds index options to the algorithm.">AddIndexOption</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <a class="code" href="classQuantConnect_1_1Market.html" title="Markets Collection: Soon to be expanded to a collection of items specifying the market hour,...">Market</a>.<a class="code" href="classQuantConnect_1_1Market.html#ab62a170b2945e72bfb67cb582a3d3fec" title="USA Market">USA</a>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>)</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad2967cee8adcfa412214339d810b30e3" title="Creates and adds index options to the algorithm.">AddIndexOption</a>(</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#a350b9a625cf7bad95da82894be3cd0a8" title="Provides a convenience method for creating a Symbol for most security types. This method currently do...">Create</a>(ticker, <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Index, market),</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                resolution,</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                fillForward);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;        }</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="comment">        /// Creates and adds index options to the algorithm.</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The Symbol of the &lt;see cref=&quot;Security&quot;/&gt; returned from &lt;see cref=&quot;AddIndex&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the index option contracts, i.e. the granularity of the data&lt;/param&gt;</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, this will fill in missing data points with the previous data point&lt;/param&gt;</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="comment">        /// &lt;returns&gt;Canonical Option security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02270"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aef281264e7aa3d4f71541c48983d288b"> 2270</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aef281264e7aa3d4f71541c48983d288b" title="Creates and adds index options to the algorithm.">AddIndexOption</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>)</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        {</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad2967cee8adcfa412214339d810b30e3" title="Creates and adds index options to the algorithm.">AddIndexOption</a>(symbol, <span class="keyword">null</span>, resolution, fillForward);</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        }</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="comment">        /// Creates and adds index options to the algorithm.</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The Symbol of the &lt;see cref=&quot;Security&quot;/&gt; returned from &lt;see cref=&quot;AddIndex&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;<span class="comment">        /// &lt;param name=&quot;targetOption&quot;&gt;The target option ticker. This is useful when the option ticker does not match the underlying, e.g. SPX index and the SPXW weekly option. If null is provided will use underlying&lt;/param&gt;</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the index option contracts, i.e. the granularity of the data&lt;/param&gt;</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, this will fill in missing data points with the previous data point&lt;/param&gt;</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="comment">        /// &lt;returns&gt;Canonical Option security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02284"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a45dc3d7da81bcaaa83ebd149538ae887"> 2284</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a45dc3d7da81bcaaa83ebd149538ae887" title="Creates and adds index options to the algorithm.">AddIndexOption</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol, <span class="keywordtype">string</span> targetOption, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>)</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        {</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;            <span class="keywordflow">if</span> (symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a4b811550395ad9af00dacee29bde4125" title="Gets the security type of the symbol">SecurityType</a> != <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Index)</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            {</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Symbol provided must be of type SecurityType.Index&quot;</span>);</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;            }</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160; </div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aed2d974226aa0e08da9abc1da610c45b" title="Creates and adds a new equity Option security to the algorithm">AddOption</a>(symbol, targetOption, resolution, symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a4a251183dd32355cc0c30a9f94aeedd1" title="Gets the security identifier for this symbol">ID</a>.<a class="code" href="classQuantConnect_1_1SecurityIdentifier.html#a315b1be5234c0cff05939cd9db40e998" title="Gets the market component of this security identifier. If located in the internal mappings,...">Market</a>, fillForward);</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="comment">        /// Adds an index option contract to the algorithm.</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;Symbol of the index option contract&lt;/param&gt;</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the index option contract, i.e. the granularity of the data&lt;/param&gt;</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, this will fill in missing data points with the previous data point&lt;/param&gt;</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="comment">        /// &lt;returns&gt;Index Option Contract&lt;/returns&gt;</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="comment">        /// &lt;exception cref=&quot;ArgumentException&quot;&gt;The provided Symbol is not an Index Option&lt;/exception&gt;</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02303"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adf45c7f21fae0d09e37a423c2e6e3cce"> 2303</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adf45c7f21fae0d09e37a423c2e6e3cce" title="Adds an index option contract to the algorithm.">AddIndexOptionContract</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>)</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        {</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            <span class="keywordflow">if</span> (symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a4b811550395ad9af00dacee29bde4125" title="Gets the security type of the symbol">SecurityType</a> != <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.IndexOption)</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;            {</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Symbol provided must be of type SecurityType.IndexOption&quot;</span>);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            }</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160; </div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0f7ec3a574e47b4ac26448590c4ef685" title="Creates and adds a new single Option contract to the algorithm">AddOptionContract</a>(symbol, resolution, fillForward);</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        }</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment">        /// Creates and adds a new single &lt;see cref=&quot;Option&quot;/&gt; contract to the algorithm</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The option contract symbol&lt;/param&gt;</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for this equity. Default is set by &lt;see cref=&quot;SecurityInitializer&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="comment">        /// &lt;param name=&quot;extendedMarketHours&quot;&gt;Use extended market hours data&lt;/param&gt;</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Option&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02323"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0f7ec3a574e47b4ac26448590c4ef685"> 2323</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0f7ec3a574e47b4ac26448590c4ef685" title="Creates and adds a new single Option contract to the algorithm">AddOptionContract</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>,</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;            decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>, <span class="keywordtype">bool</span> extendedMarketHours = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;            <span class="keywordflow">if</span> (symbol == <span class="keyword">null</span> || !symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a4b811550395ad9af00dacee29bde4125" title="Gets the security type of the symbol">SecurityType</a>.IsOption() || symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#ad7a9ba4ed860939fad35b99f748e399c" title="Gets the security underlying symbol, if any">Underlying</a> == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;            {</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException($<span class="stringliteral">&quot;Unexpected option symbol {symbol}. &quot;</span> +</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                    $<span class="stringliteral">&quot;Please provide a valid option contract with it&#39;s underlying symbol set.&quot;</span>);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;            }</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;            <span class="comment">// add underlying if not present</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            var underlying = symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#ad7a9ba4ed860939fad35b99f748e399c" title="Gets the security underlying symbol, if any">Underlying</a>;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;            <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> underlyingSecurity;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;            List&lt;SubscriptionDataConfig&gt; underlyingConfigs;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html#af3ad97e370ceec706ac1afe70f7fbb42" title="Try and get this security object with matching symbol and return true on success.">TryGetValue</a>(underlying, out underlyingSecurity) ||</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;                <span class="comment">// The underlying might have been removed, let&#39;s see if there&#39;s already a subscription for it</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                (!underlyingSecurity.IsTradable &amp;&amp; <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a99db80445552627b0fecfab52d5b0106" title="Instance that implements ISubscriptionDataConfigService">SubscriptionDataConfigService</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ISubscriptionDataConfigProvider.html#a29826b931901dd4e4b64515663a2073b" title="Gets a list of all registered SubscriptionDataConfig for a given Symbol if any else will return the w...">GetSubscriptionDataConfigs</a>(underlying).Count == 0))</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;            {</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                underlyingSecurity = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a101da8582e6819d82780f37a3b3162e0" title="Add specified data to our data subscriptions. QuantConnect will funnel this data to the handle data r...">AddSecurity</a>(underlying, resolution, fillForward, leverage, extendedMarketHours);</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;                underlyingConfigs = <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a99db80445552627b0fecfab52d5b0106" title="Instance that implements ISubscriptionDataConfigService">SubscriptionDataConfigService</a></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                    .<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ISubscriptionDataConfigProvider.html#a29826b931901dd4e4b64515663a2073b" title="Gets a list of all registered SubscriptionDataConfig for a given Symbol if any else will return the w...">GetSubscriptionDataConfigs</a>(underlying);</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;            }</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (underlyingSecurity != <span class="keyword">null</span> &amp;&amp; underlyingSecurity.IsDelisted)</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;            {</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException($<span class="stringliteral">&quot;The underlying {underlying.SecurityType} asset ({underlying.Value}) is delisted &quot;</span> +</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                    $<span class="stringliteral">&quot;(current time is {Time})&quot;</span>);</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;            }</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;            {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;                underlyingConfigs = <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a99db80445552627b0fecfab52d5b0106" title="Instance that implements ISubscriptionDataConfigService">SubscriptionDataConfigService</a></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                    .<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ISubscriptionDataConfigProvider.html#a29826b931901dd4e4b64515663a2073b" title="Gets a list of all registered SubscriptionDataConfig for a given Symbol if any else will return the w...">GetSubscriptionDataConfigs</a>(underlying);</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;                var dataNormalizationMode = underlyingConfigs.DataNormalizationMode();</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                <span class="keywordflow">if</span> (dataNormalizationMode != <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>.Raw &amp;&amp; _locked)</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                    <span class="comment">// We check the &quot;locked&quot; flag here because during initialization we need to load existing open orders and holdings from brokerages.</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                    <span class="comment">// There is no data streaming yet, so it is safe to change the data normalization mode to Raw.</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException($<span class="stringliteral">&quot;The underlying {underlying.SecurityType} asset ({underlying.Value}) is set to &quot;</span> +</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                        $<span class="stringliteral">&quot;{dataNormalizationMode}, please change this to DataNormalizationMode.Raw with the &quot;</span> +</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                        <span class="stringliteral">&quot;SetDataNormalization() method&quot;</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                    );</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                }</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            }</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160; </div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;            var configs = <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a99db80445552627b0fecfab52d5b0106" title="Instance that implements ISubscriptionDataConfigService">SubscriptionDataConfigService</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ISubscriptionDataConfigService.html#a37d844a8ee78541da26b4732ed6a0a14" title="Creates and adds a list of SubscriptionDataConfig for a given symbol and configuration....">Add</a>(symbol, resolution, fillForward, extendedMarketHours,</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                dataNormalizationMode: <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>.Raw);</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;            var option = (<a class="code" href="classQuantConnect_1_1Securities_1_1Option_1_1Option.html" title="Option Security Object Implementation for Option Assets">Option</a>)<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html#a0aa9a5d066fcba5dfcc7ae10ac22b550" title="Creates a new security">CreateSecurity</a>(symbol, configs, leverage, underlying: underlyingSecurity);</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160; </div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            underlyingConfigs.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a6e220313d3ba00347b727bae4944eca8" title="Sets the data normalization mode to be used by this security">SetDataNormalizationMode</a>(<a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>.Raw);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;            <span class="comment">// For backward compatibility we need to refresh the security DataNormalizationMode Property</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;            underlyingSecurity.RefreshDataNormalizationModeProperty();</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html#a5511dc98ccb9ce95207c5173f8afe1be" title="Add a new security with this symbol to the collection.">Add</a>(option);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160; </div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;            <span class="comment">// get or create the universe</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;            var universeSymbol = <a class="code" href="classQuantConnect_1_1Algorithm_1_1Selection_1_1OptionContractUniverse.html" title="This universe will hold single option contracts and their underlying, managing removals and additions">OptionContractUniverse</a>.<a class="code" href="classQuantConnect_1_1Algorithm_1_1Selection_1_1OptionContractUniverse.html#a2eb2e862dec61e38139b90211b87b5a7" title="Creates a user defined universe symbol">CreateSymbol</a>(symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a4a251183dd32355cc0c30a9f94aeedd1" title="Gets the security identifier for this symbol">ID</a>.<a class="code" href="classQuantConnect_1_1SecurityIdentifier.html#a315b1be5234c0cff05939cd9db40e998" title="Gets the market component of this security identifier. If located in the internal mappings,...">Market</a>, symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#ad7a9ba4ed860939fad35b99f748e399c" title="Gets the security underlying symbol, if any">Underlying</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#a4b811550395ad9af00dacee29bde4125" title="Gets the security type of the symbol">SecurityType</a>);</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;            <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1Universe.html" title="Provides a base class for all universes to derive from.">Universe</a> universe;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html" title="Manages the algorithm&#39;s collection of universes">UniverseManager</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html#af60ce15a9fe3719dcca8f1cf5d346a2a" title="Gets the value associated with the specified key.">TryGetValue</a>(universeSymbol, out universe))</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            {</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                var settings = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afd9e30918bab39cac5a9a8ee79423cd7" title="Gets the universe settings to be used when adding securities via universe selection">UniverseSettings</a>(<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a>)</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                {</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                    <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a> = <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>.Raw,</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;                    <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a> = underlyingConfigs.GetHighestResolution(),</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                    ExtendedMarketHours = extendedMarketHours</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                };</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                universe = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aeac560d821c1d05c6af8864ec7075a72" title="Creates a new universe and adds it to the algorithm. This is for coarse fundamental US Equity data an...">AddUniverse</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Selection_1_1OptionContractUniverse.html" title="This universe will hold single option contracts and their underlying, managing removals and additions">OptionContractUniverse</a>(<span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionDataConfig.html" title="Subscription data required including the type of data.">SubscriptionDataConfig</a>(configs.First(), symbol: universeSymbol), settings));</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;            }</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160; </div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;            <span class="comment">// update the universe</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            var optionUniverse = universe as <a class="code" href="classQuantConnect_1_1Algorithm_1_1Selection_1_1OptionContractUniverse.html" title="This universe will hold single option contracts and their underlying, managing removals and additions">OptionContractUniverse</a>;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;            <span class="keywordflow">if</span> (optionUniverse != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                <span class="keywordflow">foreach</span> (var subscriptionDataConfig <span class="keywordflow">in</span> configs.Concat(underlyingConfigs))</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                {</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                    optionUniverse.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UserDefinedUniverse.html#af1f5f13dab0caee897b2c82bd51910d7" title="Adds the specified Symbol to this universe">Add</a>(subscriptionDataConfig);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                }</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;            }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160; </div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;            <span class="keywordflow">return</span> option;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        }</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;Forex&quot;/&gt; security to the algorithm</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The currency pair&lt;/param&gt;</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The foreign exchange trading market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default value is null and looked up using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for this equity. Default is set by &lt;see cref=&quot;SecurityInitializer&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Forex&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02413"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9b5be26ab34b242b334782f328f759d0"> 2413</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Forex_1_1Forex.html" title="FOREX Security Object Implementation for FOREX Assets">Forex</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9b5be26ab34b242b334782f328f759d0" title="Creates and adds a new Forex security to the algorithm">AddForex</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>)</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;        {</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;            <span class="keywordflow">return</span> AddSecurity&lt;Forex&gt;(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Forex, ticker, resolution, market, fillForward, leverage, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        }</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;Cfd&quot;/&gt; security to the algorithm</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The currency pair&lt;/param&gt;</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The cfd trading market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default value is null and looked up using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for this equity. Default is set by &lt;see cref=&quot;SecurityInitializer&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Cfd&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02428"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ab76d65f9127879059d9742908bf7a0cf"> 2428</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Cfd_1_1Cfd.html" title="CFD Security Object Implementation for CFD Assets">Cfd</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ab76d65f9127879059d9742908bf7a0cf" title="Creates and adds a new Cfd security to the algorithm">AddCfd</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>)</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;        {</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;            <span class="keywordflow">return</span> AddSecurity&lt;Cfd&gt;(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Cfd, ticker, resolution, market, fillForward, leverage, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        }</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160; </div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;Index&quot;/&gt; security to the algorithm</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The currency pair&lt;/param&gt;</span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The index trading market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default value is null and looked up using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Index&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02443"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa8ce9c6216eb415122a462f29c5a0932"> 2443</a></span>&#160;        <span class="keyword">public</span> Index <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa8ce9c6216eb415122a462f29c5a0932" title="Creates and adds a new Index security to the algorithm">AddIndex</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>)</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        {</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            var index = AddSecurity&lt;Index&gt;(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Index, ticker, resolution, market, fillForward, 1, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;            <span class="keywordflow">return</span> index;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        }</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;Crypto&quot;/&gt; security to the algorithm</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The currency pair&lt;/param&gt;</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The cfd trading market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default value is null and looked up using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for this equity. Default is set by &lt;see cref=&quot;SecurityInitializer&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Crypto&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02459"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ab6f08d8d94735557d1ef66b40757ffbc"> 2459</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Crypto_1_1Crypto.html" title="Crypto Security Object Implementation for Crypto Assets">Crypto</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ab6f08d8d94735557d1ef66b40757ffbc" title="Creates and adds a new Crypto security to the algorithm">AddCrypto</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>)</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        {</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;            <span class="keywordflow">return</span> AddSecurity&lt;Crypto&gt;(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Crypto, ticker, resolution, market, fillForward, leverage, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        }</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;CryptoFuture&quot;/&gt; security to the algorithm</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The currency pair&lt;/param&gt;</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;The &lt;see cref=&quot;Resolution&quot;/&gt; of market data, Tick, Second, Minute, Hour, or Daily. Default is &lt;see cref=&quot;Resolution.Minute&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;<span class="comment">        /// &lt;param name=&quot;market&quot;&gt;The cfd trading market, &lt;seealso cref=&quot;Market&quot;/&gt;. Default value is null and looked up using BrokerageModel.DefaultMarkets in &lt;see cref=&quot;AddSecurity{T}&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;If true, returns the last available data even if none in that timeslice. Default is &lt;value&gt;true&lt;/value&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;The requested leverage for this equity. Default is set by &lt;see cref=&quot;SecurityInitializer&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;CryptoFuture&quot;/&gt; security&lt;/returns&gt;</span></div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02474"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af53d65ed6f71c8247d83a3d1e265a164"> 2474</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1CryptoFuture_1_1CryptoFuture.html" title="Crypto Future Security Object Implementation for Crypto Future Assets">CryptoFuture</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#af53d65ed6f71c8247d83a3d1e265a164" title="Creates and adds a new CryptoFuture security to the algorithm">AddCryptoFuture</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">string</span> market = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">true</span>, decimal leverage = <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1Security.html#a4b2755a1cb83916ff3c9d52d06a29dbb" title="A null security leverage value">NullLeverage</a>)</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        {</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;            <span class="keywordflow">return</span> AddSecurity&lt;CryptoFuture&gt;(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.CryptoFuture, ticker, resolution, market, fillForward, leverage, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        }</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;<span class="comment">        /// Removes the security with the specified symbol. This will cancel all</span></div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="comment">        /// open orders and then liquidate any existing holdings</span></div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The symbol of the security to be removed&lt;/param&gt;</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="comment">        /// &lt;remarks&gt;Sugar syntax for &lt;see cref=&quot;AddOptionContract&quot;/&gt;&lt;/remarks&gt;</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02486"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaa03fad6a4f4df5db3a0273d94df6436"> 2486</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aaa03fad6a4f4df5db3a0273d94df6436" title="Removes the security with the specified symbol. This will cancel all open orders and then liquidate a...">RemoveOptionContract</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6ece1896dff33aafccfb1707a83a77c3" title="Removes the security with the specified symbol. This will cancel all open orders and then liquidate a...">RemoveSecurity</a>(symbol);</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        }</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;<span class="comment">        /// Removes the security with the specified symbol. This will cancel all</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="comment">        /// open orders and then liquidate any existing holdings</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The symbol of the security to be removed&lt;/param&gt;</span></div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02497"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6ece1896dff33aafccfb1707a83a77c3"> 2497</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6ece1896dff33aafccfb1707a83a77c3" title="Removes the security with the specified symbol. This will cancel all open orders and then liquidate a...">RemoveSecurity</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        {</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;            <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> security;</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html#af3ad97e370ceec706ac1afe70f7fbb42" title="Try and get this security object with matching symbol and return true on success.">TryGetValue</a>(symbol, out security))</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;            {</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;            }</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a9ae19647e6057693ee2a7702fd337e66" title="Gets whether or not this algorithm is still warming up">IsWarmingUp</a>)</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;            {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;                <span class="comment">// cancel open orders</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abd31d323023526ca3e7cae0dfd620134" title="Transaction Manager - Process transaction fills and order management.">Transactions</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityTransactionManager.html#ad21f183822521891147c190aed4fc5e2" title="Cancels all open orders for all symbols">CancelOpenOrders</a>(security.Symbol);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;            }</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160; </div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;            <span class="comment">// liquidate if invested</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;            <span class="keywordflow">if</span> (security.Invested)</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;            {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a508fd4e5eb28d4280af51f647994d6ee" title="Liquidate all holdings and cancel open orders. Called at the end of day for tick-strategies.">Liquidate</a>(security.Symbol);</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;            }</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160; </div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            <span class="comment">// Clear cache</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            security.Cache.Reset();</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160; </div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;            <span class="comment">// Mark security as not tradable</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;            security.IsTradable = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;            <span class="keywordflow">if</span> (symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a1f3c25223fd9a7b753a4f84ece6469ab" title="Method returns true, if symbol is a derivative canonical symbol">IsCanonical</a>())</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;            {</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                <span class="comment">// remove underlying equity data if it&#39;s marked as internal</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                <span class="keywordflow">foreach</span> (var kvp <span class="keywordflow">in</span> <a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html" title="Manages the algorithm&#39;s collection of universes">UniverseManager</a>.Where(x =&gt; x.Value.Configuration.Symbol == symbol</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                    || x.<a class="code" href="classQuantConnect_1_1Symbol.html#ad77256b8d686f7e2699e040e8e703b94" title="Gets the current symbol for this ticker">Value</a>.Configuration.Symbol == <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1ContinuousContractUniverse.html" title="Continuous contract universe selection that based on the requested mapping mode will select each symb...">ContinuousContractUniverse</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1ContinuousContractUniverse.html#a8936fedb0ce5c206ac4bb0751c449552" title="Creates a continuous universe symbol">CreateSymbol</a>(symbol)))</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                {</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;                    var universe = kvp.Value;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                    <span class="comment">// remove underlying if not used by other universes</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;                    var otherUniverses = <a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html" title="Manages the algorithm&#39;s collection of universes">UniverseManager</a>.Select(ukvp =&gt; ukvp.Value).Where(u =&gt; !ReferenceEquals(u, universe)).ToList();</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                    <span class="keywordflow">if</span> (symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#a253a2079b45060c54a99ad999cb27592" title="Gets whether or not this Symbol is a derivative, that is, it has a valid Underlying property">HasUnderlying</a>)</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;                    {</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;                        var underlying = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>[symbol.<a class="code" href="classQuantConnect_1_1Symbol.html#ad7a9ba4ed860939fad35b99f748e399c" title="Gets the security underlying symbol, if any">Underlying</a>];</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;                        <span class="keywordflow">if</span> (!otherUniverses.Any(u =&gt; u.Members.ContainsKey(underlying.Symbol)))</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                        {</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6ece1896dff33aafccfb1707a83a77c3" title="Removes the security with the specified symbol. This will cancel all open orders and then liquidate a...">RemoveSecurity</a>(underlying.Symbol);</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                        }</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                    }</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160; </div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                    <span class="comment">// remove child securities (option contracts for option chain universes) if not used in other universes</span></div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                    <span class="comment">// we order the securities so that the removal is deterministic, it will liquidate any holdings</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                    <span class="keywordflow">foreach</span> (var child <span class="keywordflow">in</span> universe.Members.Values.OrderBy(security1 =&gt; security1.Symbol))</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;                    {</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                        <span class="keywordflow">if</span> (!otherUniverses.Any(u =&gt; u.Members.ContainsKey(child.Symbol)) &amp;&amp; !child.Symbol.IsCanonical())</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;                        {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6ece1896dff33aafccfb1707a83a77c3" title="Removes the security with the specified symbol. This will cancel all open orders and then liquidate a...">RemoveSecurity</a>(child.Symbol);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                        }</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                    }</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160; </div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                    <span class="comment">// finally, dispose and remove the canonical security from the universe manager</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                    <a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html" title="Manages the algorithm&#39;s collection of universes">UniverseManager</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html#a836a9f06d5e6539c66b3dd9712045996" title="Removes the first occurrence of a specific object from the T:System.Collections.Generic....">Remove</a>(kvp.Key);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                    _universeSelectionUniverses.Remove(security.Symbol);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;            }</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            {</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                lock (_pendingUniverseAdditionsLock)</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                {</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                    <span class="comment">// we need to handle existing universes and pending to be added universes, that will be pushed</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                    <span class="comment">// at the end of this time step see OnEndOfTimeStep()</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                    <span class="keywordflow">foreach</span> (var universe <span class="keywordflow">in</span> <a class="code" href="classQuantConnect_1_1Securities_1_1UniverseManager.html" title="Manages the algorithm&#39;s collection of universes">UniverseManager</a>.Select(x =&gt; x.Value).OfType&lt;<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UserDefinedUniverse.html" title="Represents the universe defined by the user&#39;s algorithm. This is the default universe where manually ...">UserDefinedUniverse</a>&gt;())</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;                    {</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;                        universe.Remove(symbol);</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                    }</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                    <span class="comment">// for existing universes we need to purge pending additions too, also handled at OnEndOfTimeStep()</span></div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;                    _pendingUserDefinedUniverseSecurityAdditions.RemoveAll(addition =&gt; addition.Security.Symbol == symbol);</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                }</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            }</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160; </div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;        }</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;<span class="comment">        /// AddData&lt;typeparam name=&quot;T&quot;/&gt; a new user defined data source, requiring only the minimum config options.</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;<span class="comment">        /// The data is added with a default time zone of NewYork (Eastern Daylight Savings Time)</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;Key/Ticker for data&lt;/param&gt;</span></div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the data&lt;/param&gt;</span></div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Security&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="comment">        /// &lt;remarks&gt;Generic type T must implement base data&lt;/remarks&gt;</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02582"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152"> 2582</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;            where <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a> : <a class="code" href="interfaceQuantConnect_1_1Data_1_1IBaseData.html" title="Base Data Class: Type, Timestamp, Key  Base Features.">IBaseData</a>, new()</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        {</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;            <span class="comment">//Add this new generic data as a tradeable security:</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;            <span class="comment">// Defaults:extended market hours&quot;      = true because we want events 24 hours,</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;            <span class="comment">//          fillforward                 = false because only want to trigger when there&#39;s new custom data.</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;            <span class="comment">//          leverage                    = 1 because no leverage on nonmarket data?</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(ticker, resolution, fillForward: <span class="keyword">false</span>, leverage: 1m);</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        }</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;<span class="comment">        /// AddData&lt;typeparam name=&quot;T&quot;/&gt; a new user defined data source, requiring only the minimum config options.</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;<span class="comment">        /// The data is added with a default time zone of NewYork (Eastern Daylight Savings Time)</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;<span class="comment">        /// &lt;param name=&quot;underlying&quot;&gt;The underlying symbol for the custom data&lt;/param&gt;</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the data&lt;/param&gt;</span></div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Security&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;<span class="comment">        /// &lt;remarks&gt;Generic type T must implement base data&lt;/remarks&gt;</span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02601"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aebfe71e21eadd3c1cc1a3783b1c76629"> 2601</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> underlying, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;            where <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a> : <a class="code" href="interfaceQuantConnect_1_1Data_1_1IBaseData.html" title="Base Data Class: Type, Timestamp, Key  Base Features.">IBaseData</a>, new()</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;        {</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;            <span class="comment">//Add this new generic data as a tradeable security:</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;            <span class="comment">// Defaults:extended market hours&quot;      = true because we want events 24 hours,</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;            <span class="comment">//          fillforward                 = false because only want to trigger when there&#39;s new custom data.</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;            <span class="comment">//          leverage                    = 1 because no leverage on nonmarket data?</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(underlying, resolution, fillForward: <span class="keyword">false</span>, leverage: 1m);</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        }</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160; </div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="comment">        /// AddData&lt;typeparam name=&quot;T&quot;/&gt; a new user defined data source, requiring only the minimum config options.</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="comment">        /// The data is added with a default time zone of NewYork (Eastern Daylight Savings Time)</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;Key/Ticker for data&lt;/param&gt;</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the Data Required&lt;/param&gt;</span></div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;When no data available on a tradebar, return the last data that was generated&lt;/param&gt;</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;Custom leverage per security&lt;/param&gt;</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Security&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment">        /// &lt;remarks&gt;Generic type T must implement base data&lt;/remarks&gt;</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02623"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a046229e887d8ac0cdf02361e10e6f6dc"> 2623</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution, <span class="keywordtype">bool</span> fillForward, decimal leverage = 1.0m)</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;            where <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a> : <a class="code" href="interfaceQuantConnect_1_1Data_1_1IBaseData.html" title="Base Data Class: Type, Timestamp, Key  Base Features.">IBaseData</a>, <span class="keyword">new</span>()</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        {</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(ticker, resolution, <span class="keyword">null</span>, fillForward, leverage);</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        }</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;<span class="comment">        /// AddData&lt;typeparam name=&quot;T&quot;/&gt; a new user defined data source, requiring only the minimum config options.</span></div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="comment">        /// The data is added with a default time zone of NewYork (Eastern Daylight Savings Time)</span></div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;<span class="comment">        /// &lt;param name=&quot;underlying&quot;&gt;The underlying symbol for the custom data&lt;/param&gt;</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the Data Required&lt;/param&gt;</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;When no data available on a tradebar, return the last data that was generated&lt;/param&gt;</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;Custom leverage per security&lt;/param&gt;</span></div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Security&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;<span class="comment">        /// &lt;remarks&gt;Generic type T must implement base data&lt;/remarks&gt;</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02640"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa5a70bce4f3ea218db285ef766bcc8f3"> 2640</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> underlying, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution, <span class="keywordtype">bool</span> fillForward, decimal leverage = 1.0m)</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;            where <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a> : <a class="code" href="interfaceQuantConnect_1_1Data_1_1IBaseData.html" title="Base Data Class: Type, Timestamp, Key  Base Features.">IBaseData</a>, <span class="keyword">new</span>()</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;        {</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(underlying, resolution, <span class="keyword">null</span>, fillForward, leverage);</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        }</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;<span class="comment">        /// AddData&lt;typeparam name=&quot;T&quot;/&gt; a new user defined data source, requiring only the minimum config options.</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;Key/Ticker for data&lt;/param&gt;</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the Data Required&lt;/param&gt;</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;<span class="comment">        /// &lt;param name=&quot;timeZone&quot;&gt;Specifies the time zone of the raw data&lt;/param&gt;</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;When no data available on a tradebar, return the last data that was generated&lt;/param&gt;</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;Custom leverage per security&lt;/param&gt;</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Security&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;<span class="comment">        /// &lt;remarks&gt;Generic type T must implement base data&lt;/remarks&gt;</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02657"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa9bab563784cab73139d60c5b7d5b41c"> 2657</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution, DateTimeZone timeZone, <span class="keywordtype">bool</span> fillForward = <span class="keyword">false</span>, decimal leverage = 1.0m)</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;            where <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a> : <a class="code" href="interfaceQuantConnect_1_1Data_1_1IBaseData.html" title="Base Data Class: Type, Timestamp, Key  Base Features.">IBaseData</a>, <span class="keyword">new</span>()</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        {</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8f307e6b81e88cf3bc5ba788a74fbf17" title="AddData a new user defined data source, requiring only the minimum config options....">AddData</a>(typeof(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a>), ticker, resolution, timeZone, fillForward, leverage);</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;        }</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;<span class="comment">        /// AddData&lt;typeparam name=&quot;T&quot;/&gt; a new user defined data source, requiring only the minimum config options.</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;<span class="comment">        /// &lt;param name=&quot;underlying&quot;&gt;The underlying symbol for the custom data&lt;/param&gt;</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the Data Required&lt;/param&gt;</span></div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="comment">        /// &lt;param name=&quot;timeZone&quot;&gt;Specifies the time zone of the raw data&lt;/param&gt;</span></div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;When no data available on a tradebar, return the last data that was generated&lt;/param&gt;</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;Custom leverage per security&lt;/param&gt;</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Security&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="comment">        /// &lt;remarks&gt;Generic type T must implement base data&lt;/remarks&gt;</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02674"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a72d2d8d93b1b4bf88d98d291b8ac7916"> 2674</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> underlying, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution, DateTimeZone timeZone, <span class="keywordtype">bool</span> fillForward = <span class="keyword">false</span>, decimal leverage = 1.0m)</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            where <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a> : <a class="code" href="interfaceQuantConnect_1_1Data_1_1IBaseData.html" title="Base Data Class: Type, Timestamp, Key  Base Features.">IBaseData</a>, <span class="keyword">new</span>()</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        {</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8f307e6b81e88cf3bc5ba788a74fbf17" title="AddData a new user defined data source, requiring only the minimum config options....">AddData</a>(typeof(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a>), underlying, resolution, timeZone, fillForward, leverage);</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        }</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;<span class="comment">        /// AddData&lt;typeparam name=&quot;T&quot;/&gt; a new user defined data source including symbol properties and exchange hours,</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;<span class="comment">        /// all other vars are not required and will use defaults.</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;Key/Ticker for data&lt;/param&gt;</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="comment">        /// &lt;param name=&quot;properties&quot;&gt;The properties of this new custom data&lt;/param&gt;</span></div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;<span class="comment">        /// &lt;param name=&quot;exchangeHours&quot;&gt;The Exchange hours of this symbol&lt;/param&gt;</span></div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;<span class="comment">        /// &lt;param name=&quot;resolution&quot;&gt;Resolution of the Data Required&lt;/param&gt;</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;<span class="comment">        /// &lt;param name=&quot;fillForward&quot;&gt;When no data available on a tradebar, return the last data that was generated&lt;/param&gt;</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;<span class="comment">        /// &lt;param name=&quot;leverage&quot;&gt;Custom leverage per security&lt;/param&gt;</span></div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;<span class="comment">        /// &lt;returns&gt;The new &lt;see cref=&quot;Security&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02692"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a64ecd4cc2fb5b2185cb8a1e56a7e2fb8"> 2692</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad6e94b246a8aff3449d82657a34c3152" title="AddDataa new user defined data source, requiring only the minimum config options. The data is added w...">AddData&lt;T&gt;</a>(<span class="keywordtype">string</span> ticker, <a class="code" href="classQuantConnect_1_1Securities_1_1SymbolProperties.html" title="Represents common properties for a specific security, uniquely identified by market,...">SymbolProperties</a> properties, <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityExchangeHours.html" title="Represents the schedule of a security exchange. This includes daily regular and extended market hours...">SecurityExchangeHours</a> exchangeHours, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution = <span class="keyword">null</span>, <span class="keywordtype">bool</span> fillForward = <span class="keyword">false</span>, decimal leverage = 1.0m)</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;            where <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a> : <a class="code" href="interfaceQuantConnect_1_1Data_1_1IBaseData.html" title="Base Data Class: Type, Timestamp, Key  Base Features.">IBaseData</a>, <span class="keyword">new</span>()</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        {</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;            <span class="comment">// Get the right key for storage of base type symbols</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;            var key = <a class="code" href="classQuantConnect_1_1SecurityIdentifier.html" title="Defines a unique identifier for securities">SecurityIdentifier</a>.<a class="code" href="classQuantConnect_1_1SecurityIdentifier.html#a19e1f9da410608020d74ed9e7d283575" title="Generates the Symbol property for QuantConnect.SecurityType.Base security identifiers">GenerateBaseSymbol</a>(typeof(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a>), ticker);</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160; </div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;            <span class="comment">// Set our database entries for this data type</span></div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;            SetDatabaseEntries(key, properties, exchangeHours);</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160; </div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;            <span class="comment">// Then add the data</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8f307e6b81e88cf3bc5ba788a74fbf17" title="AddData a new user defined data source, requiring only the minimum config options....">AddData</a>(typeof(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a>), ticker, resolution, <span class="keyword">null</span>, fillForward, leverage);</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        }</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;<span class="comment">        /// Send a debug message to the web console:</span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Message to send to debug console&lt;/param&gt;</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(string)&quot;/&gt;</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Error(string)&quot;/&gt;</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02712"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744"> 2712</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>(<span class="keywordtype">string</span> message)</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        {</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;            <span class="keywordflow">if</span> (!_liveMode &amp;&amp; (message == <span class="stringliteral">&quot;&quot;</span> || _previousDebugMessage == message)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;            _debugMessages.Enqueue(message);</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;            _previousDebugMessage = message;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;        }</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;<span class="comment">        /// Send a debug message to the web console:</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Message to send to debug console&lt;/param&gt;</span></div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(int)&quot;/&gt;</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Error(int)&quot;/&gt;</span></div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02726"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa8747255d521eefc7ee25674644ef476"> 2726</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa8747255d521eefc7ee25674644ef476" title="Send a debug message to the web console:">Debug</a>(<span class="keywordtype">int</span> message)</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;        {</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>(message.ToStringInvariant());</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;        }</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;<span class="comment">        /// Send a debug message to the web console:</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Message to send to debug console&lt;/param&gt;</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(double)&quot;/&gt;</span></div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Error(double)&quot;/&gt;</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02738"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3e556f29e3d79333833b93c10355717a"> 2738</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3e556f29e3d79333833b93c10355717a" title="Send a debug message to the web console:">Debug</a>(<span class="keywordtype">double</span> message)</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        {</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>(message.ToStringInvariant());</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;        }</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;<span class="comment">        /// Send a debug message to the web console:</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Message to send to debug console&lt;/param&gt;</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(decimal)&quot;/&gt;</span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Error(decimal)&quot;/&gt;</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02750"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0ba72455d63e307e52fbec84c33816a"> 2750</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac0ba72455d63e307e52fbec84c33816a" title="Send a debug message to the web console:">Debug</a>(decimal message)</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;        {</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>(message.ToStringInvariant());</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;        }</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="comment">        /// Added another method for logging if user guessed.</span></div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;String message to log.&lt;/param&gt;</span></div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(string)&quot;/&gt;</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Error(string)&quot;/&gt;</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02762"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a67b117790972c1715ab8b85742d4bfb7"> 2762</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a67b117790972c1715ab8b85742d4bfb7" title="Added another method for logging if user guessed.">Log</a>(<span class="keywordtype">string</span> message)</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;        {</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;            <span class="keywordflow">if</span> (!_liveMode &amp;&amp; message == <span class="stringliteral">&quot;&quot;</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;            _logMessages.Enqueue(message);</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        }</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;<span class="comment">        /// Added another method for logging if user guessed.</span></div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Int message to log.&lt;/param&gt;</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(int)&quot;/&gt;</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Error(int)&quot;/&gt;</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02775"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4e48e31a8d9bdcabf89b05f535db942f"> 2775</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4e48e31a8d9bdcabf89b05f535db942f" title="Added another method for logging if user guessed.">Log</a>(<span class="keywordtype">int</span> message)</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        {</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a67b117790972c1715ab8b85742d4bfb7" title="Added another method for logging if user guessed.">Log</a>(message.ToStringInvariant());</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;        }</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="comment">        /// Added another method for logging if user guessed.</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Double message to log.&lt;/param&gt;</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(double)&quot;/&gt;</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Error(double)&quot;/&gt;</span></div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02787"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a854dee1e87982f582f6c42b35bd47e22"> 2787</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a854dee1e87982f582f6c42b35bd47e22" title="Added another method for logging if user guessed.">Log</a>(<span class="keywordtype">double</span> message)</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;        {</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a67b117790972c1715ab8b85742d4bfb7" title="Added another method for logging if user guessed.">Log</a>(message.ToStringInvariant());</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;        }</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="comment">        /// Added another method for logging if user guessed.</span></div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Decimal message to log.&lt;/param&gt;</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(decimal)&quot;/&gt;</span></div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Error(decimal)&quot;/&gt;</span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02799"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad3d58a852c2380760aff4f481e824959"> 2799</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad3d58a852c2380760aff4f481e824959" title="Added another method for logging if user guessed.">Log</a>(decimal message)</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;        {</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a67b117790972c1715ab8b85742d4bfb7" title="Added another method for logging if user guessed.">Log</a>(message.ToStringInvariant());</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        }</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="comment">        /// Send a string error message to the Console.</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Message to display in errors grid&lt;/param&gt;</span></div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(string)&quot;/&gt;</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(string)&quot;/&gt;</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02811"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7bdcfe7bf87e4688620dfc0cbac212aa"> 2811</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7bdcfe7bf87e4688620dfc0cbac212aa" title="Send a string error message to the Console.">Error</a>(<span class="keywordtype">string</span> message)</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        {</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;            <span class="keywordflow">if</span> (!_liveMode &amp;&amp; (message == <span class="stringliteral">&quot;&quot;</span> || _previousErrorMessage == message)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;            _errorMessages.Enqueue(message);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;            _previousErrorMessage = message;</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;        }</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;<span class="comment">        /// Send a int error message to the Console.</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Message to display in errors grid&lt;/param&gt;</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(int)&quot;/&gt;</span></div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(int)&quot;/&gt;</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02825"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a41037a3b1f52a374cb94b51bc8f4dac0"> 2825</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a41037a3b1f52a374cb94b51bc8f4dac0" title="Send a int error message to the Console.">Error</a>(<span class="keywordtype">int</span> message)</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        {</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7bdcfe7bf87e4688620dfc0cbac212aa" title="Send a string error message to the Console.">Error</a>(message.ToStringInvariant());</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        }</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<span class="comment">        /// Send a double error message to the Console.</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Message to display in errors grid&lt;/param&gt;</span></div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(double)&quot;/&gt;</span></div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(double)&quot;/&gt;</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02837"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3d05a2ce51dba0069d862d231d414948"> 2837</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3d05a2ce51dba0069d862d231d414948" title="Send a double error message to the Console.">Error</a>(<span class="keywordtype">double</span> message)</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        {</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7bdcfe7bf87e4688620dfc0cbac212aa" title="Send a string error message to the Console.">Error</a>(message.ToStringInvariant());</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;        }</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;<span class="comment">        /// Send a decimal error message to the Console.</span></div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Message to display in errors grid&lt;/param&gt;</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(decimal)&quot;/&gt;</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(decimal)&quot;/&gt;</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02849"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abe1c6e629ba0da023b498a2a2e8cc797"> 2849</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abe1c6e629ba0da023b498a2a2e8cc797" title="Send a decimal error message to the Console.">Error</a>(decimal message)</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;        {</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7bdcfe7bf87e4688620dfc0cbac212aa" title="Send a string error message to the Console.">Error</a>(message.ToStringInvariant());</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        }</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;<span class="comment">        /// Send a string error message to the Console.</span></div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;<span class="comment">        /// &lt;param name=&quot;error&quot;&gt;Exception object captured from a try catch loop&lt;/param&gt;</span></div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Debug(string)&quot;/&gt;</span></div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Log(string)&quot;/&gt;</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02861"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abacee9f35be09b43316b244688be8d68"> 2861</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abacee9f35be09b43316b244688be8d68" title="Send a string error message to the Console.">Error</a>(Exception error)</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;        {</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;            var message = error.Message;</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;            <span class="keywordflow">if</span> (!_liveMode &amp;&amp; (message == <span class="stringliteral">&quot;&quot;</span> || _previousErrorMessage == message)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;            _errorMessages.Enqueue(message);</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;            _previousErrorMessage = message;</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;        }</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;<span class="comment">        /// Terminate the algorithm after processing the current event handler.</span></div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;<span class="comment">        /// &lt;param name=&quot;message&quot;&gt;Exit message to display on quitting&lt;/param&gt;</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02874"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac14c8fd87f2a7bfa13916f0b601c20c4"> 2874</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac14c8fd87f2a7bfa13916f0b601c20c4" title="Terminate the algorithm after processing the current event handler.">Quit</a>(<span class="keywordtype">string</span> message = <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        {</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a16bd52d937ab647c889e8d5f6577f744" title="Send a debug message to the web console:">Debug</a>(<span class="stringliteral">&quot;Quit(): &quot;</span> + message);</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2312f56a1d08945600f36b323738102b" title="Gets or sets the current status of the algorithm">Status</a> = <a class="code" href="namespaceQuantConnect.html#abbad02007d97da37e50e4b8cb8b52151" title="States of a live deployment.">AlgorithmStatus</a>.Stopped;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        }</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;<span class="comment">        /// Set the Quit flag property of the algorithm.</span></div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;<span class="comment">        /// &lt;remarks&gt;Intended for internal use by the QuantConnect Lean Engine only.&lt;/remarks&gt;</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;<span class="comment">        /// &lt;param name=&quot;quit&quot;&gt;Boolean quit state&lt;/param&gt;</span></div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;<span class="comment">        /// &lt;seealso cref=&quot;Quit(String)&quot;/&gt;</span></div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(Logging)]</div>
<div class="line"><a name="l02887"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a07cb808b2e496ce90dc35a880c01c531"> 2887</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a07cb808b2e496ce90dc35a880c01c531" title="Set the Quit flag property of the algorithm.">SetQuit</a>(<span class="keywordtype">bool</span> quit)</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;        {</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;            <span class="keywordflow">if</span> (quit)</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;            {</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2312f56a1d08945600f36b323738102b" title="Gets or sets the current status of the algorithm">Status</a> = <a class="code" href="namespaceQuantConnect.html#abbad02007d97da37e50e4b8cb8b52151" title="States of a live deployment.">AlgorithmStatus</a>.Stopped;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;            }</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;        }</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="comment">        /// Converts the string &#39;ticker&#39; symbol into a full &lt;see cref=&quot;Symbol&quot;/&gt; object</span></div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;<span class="comment">        /// This requires that the string &#39;ticker&#39; has been added to the algorithm</span></div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;<span class="comment">        /// &lt;param name=&quot;ticker&quot;&gt;The ticker symbol. This should be the ticker symbol</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;<span class="comment">        /// as it was added to the algorithm&lt;/param&gt;</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="comment">        /// &lt;returns&gt;The symbol object mapped to the specified ticker&lt;/returns&gt;</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l02904"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa13b5a2143a58f5fda30bda0bbc9bff1"> 2904</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa13b5a2143a58f5fda30bda0bbc9bff1" title="Converts the string &#39;ticker&#39; symbol into a full Symbol object This requires that the string &#39;ticker&#39; ...">Symbol</a>(<span class="keywordtype">string</span> ticker)</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;        {</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1SymbolCache.html" title="Provides a string-&gt;Symbol mapping to allow for user defined strings to be lifted into a Symbol This i...">SymbolCache</a>.<a class="code" href="classQuantConnect_1_1SymbolCache.html#a16ba0efea4bf17d7a83e417a86beb1b5" title="Gets the Symbol object that is mapped to the specified string ticker symbol">GetSymbol</a>(ticker);</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;        }</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="comment">        /// For the given symbol will resolve the ticker it used at the current algorithm date</span></div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The symbol to get the ticker for&lt;/param&gt;</span></div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;<span class="comment">        /// &lt;returns&gt;The mapped ticker for a symbol&lt;/returns&gt;</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l02916"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8b7080abef09f15d67c349bde3d5d025"> 2916</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8b7080abef09f15d67c349bde3d5d025" title="For the given symbol will resolve the ticker it used at the current algorithm date">Ticker</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        {</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1SecurityIdentifier.html" title="Defines a unique identifier for securities">SecurityIdentifier</a>.<a class="code" href="classQuantConnect_1_1SecurityIdentifier.html#a62166df04edcb28963083dd34b500b5d" title="For the given symbol will resolve the ticker it used at the requested date">Ticker</a>(symbol, <a class="code" href="classQuantConnect_1_1Time.html" title="Time helper class collection for working with trading dates">Time</a>);</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;        }</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;<span class="comment">        /// Creates and adds a new &lt;see cref=&quot;Security&quot;/&gt; to the algorithm</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        <span class="keyword">private</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a> AddSecurity&lt;T&gt;(<a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a> securityType, <span class="keywordtype">string</span> ticker, <a class="code" href="namespaceQuantConnect.html#a4d4c02d9045faf9f1f98c1bb011273c8" title="Resolution of data requested.">Resolution</a>? resolution, <span class="keywordtype">string</span> market, <span class="keywordtype">bool</span> fillForward, decimal leverage, <span class="keywordtype">bool</span> extendedMarketHours,</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;            <a class="code" href="namespaceQuantConnect.html#ae572e4a81dfe6479f68ccb1a3bf5d693" title="Continuous contracts mapping modes">DataMappingMode</a>? mappingMode = <span class="keyword">null</span>, <a class="code" href="namespaceQuantConnect.html#a6f53e46e29d5c0897c2f2d173912a92b" title="Specifies how data is normalized before being sent into an algorithm">DataNormalizationMode</a>? normalizationMode = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;            where <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a> : <a class="code" href="classQuantConnect_1_1Securities_1_1Security.html" title="A base vehicle properties class for providing a common interface to all assets in QuantConnect.">Security</a></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        {</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;            <span class="keywordflow">if</span> (market == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;            {</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Brokerages_1_1BrokerageModel.html" title="Provides factory method for creating an IBrokerageModel from the BrokerageName enum">BrokerageModel</a>.DefaultMarkets.TryGetValue(securityType, out market))</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;                {</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;No default market set for security type: &quot;</span> + securityType);</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;                }</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;            }</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160; </div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa13b5a2143a58f5fda30bda0bbc9bff1" title="Converts the string &#39;ticker&#39; symbol into a full Symbol object This requires that the string &#39;ticker&#39; ...">Symbol</a> symbol;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;            <span class="keywordflow">if</span> (!SymbolCache.TryGetSymbol(ticker, out symbol) ||</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;                symbol.ID.Market != market ||</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;                symbol.SecurityType != securityType)</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;            {</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;                symbol = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>.<a class="code" href="classQuantConnect_1_1Symbol.html#a350b9a625cf7bad95da82894be3cd0a8" title="Provides a convenience method for creating a Symbol for most security types. This method currently do...">Create</a>(ticker, securityType, market);</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;            }</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160; </div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;            var configs = <a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html" title="Enumerable Subscription Management Class">SubscriptionManager</a>.<a class="code" href="classQuantConnect_1_1Data_1_1SubscriptionManager.html#a99db80445552627b0fecfab52d5b0106" title="Instance that implements ISubscriptionDataConfigService">SubscriptionDataConfigService</a>.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1ISubscriptionDataConfigService.html#a37d844a8ee78541da26b4732ed6a0a14" title="Creates and adds a list of SubscriptionDataConfig for a given symbol and configuration....">Add</a>(symbol, resolution, fillForward, extendedMarketHours,</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;                dataNormalizationMode: normalizationMode ?? <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html#accda0861c2bfad1fcdb4a8621ac70155" title="Defines how universe data is normalized before being send into the algorithm">DataNormalizationMode</a>,</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;                dataMappingMode: mappingMode ?? <a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html" title="Defines settings required when adding a subscription">UniverseSettings</a>.<a class="code" href="classQuantConnect_1_1Data_1_1UniverseSelection_1_1UniverseSettings.html#a6c3f6ebda36e305fb0c2c465749232fb" title="Defines how universe data is mapped together">DataMappingMode</a>);</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;            var security = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityManager.html#a0aa9a5d066fcba5dfcc7ae10ac22b550" title="Creates a new security">CreateSecurity</a>(symbol, configs, leverage);</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160; </div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a900ae9f4fc865c9a8f9fdfa39a0c6a62" title="Creates a new Theta indicator for the symbol The indicator will be automatically updated on the symbo...">T</a>)AddToUserDefinedUniverse(security, configs);</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        }</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="comment">        /// Set the historical data provider</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="comment">        /// &lt;param name=&quot;historyProvider&quot;&gt;Historical data provider&lt;/param&gt;</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="comment"></span>        [DocumentationAttribute(HistoricalData)]</div>
<div class="line"><a name="l02958"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8b7ac61cdd8321522acc861208829128"> 2958</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a8b7ac61cdd8321522acc861208829128" title="Set the historical data provider">SetHistoryProvider</a>(<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IHistoryProvider.html" title="Provides historical data to an algorithm at runtime">IHistoryProvider</a> historyProvider)</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        {</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;            <span class="keywordflow">if</span> (historyProvider == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;            {</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(historyProvider), <span class="stringliteral">&quot;Algorithm.SetHistoryProvider(): Historical data provider cannot be null.&quot;</span>);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;            }</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a09e4deec24cd76fca0ad3fd44ae20cda" title="Gets or sets the history provider for the algorithm">HistoryProvider</a> = historyProvider;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        }</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;<span class="comment">        /// Set the runtime error</span></div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;<span class="comment">        /// &lt;param name=&quot;exception&quot;&gt;Represents error that occur during execution&lt;/param&gt;</span></div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(LiveTrading)]</div>
<div class="line"><a name="l02973"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac7745280bd9b71b56d95e58ba09bfe52"> 2973</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac7745280bd9b71b56d95e58ba09bfe52" title="Set the runtime error">SetRunTimeError</a>(Exception exception)</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;        {</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;            <span class="keywordflow">if</span> (exception == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;            {</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(exception), <span class="stringliteral">&quot;Algorithm.SetRunTimeError(): Algorithm.RunTimeError cannot be set to null.&quot;</span>);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;            }</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160; </div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a1e0d31ef0435a2c591415416dac8f3a2" title="Gets the run time error from the algorithm, or null if none was encountered.">RunTimeError</a> = exception;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        }</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;<span class="comment">        /// Set the state of a live deployment</span></div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;<span class="comment">        /// &lt;param name=&quot;status&quot;&gt;Live deployment status&lt;/param&gt;</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(LiveTrading)]</div>
<div class="line"><a name="l02988"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afca79d748b7df3763d9a5d6d0e3e0bfc"> 2988</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afca79d748b7df3763d9a5d6d0e3e0bfc" title="Set the state of a live deployment">SetStatus</a>(<a class="code" href="namespaceQuantConnect.html#abbad02007d97da37e50e4b8cb8b52151" title="States of a live deployment.">AlgorithmStatus</a> status)</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;        {</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2312f56a1d08945600f36b323738102b" title="Gets or sets the current status of the algorithm">Status</a> = status;</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;        }</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;<span class="comment">        /// Downloads the requested resource as a &lt;see cref=&quot;string&quot;/&gt;.</span></div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;<span class="comment">        /// The resource to download is specified as a &lt;see cref=&quot;string&quot;/&gt; containing the URI.</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;<span class="comment">        /// &lt;param name=&quot;address&quot;&gt;A string containing the URI to download&lt;/param&gt;</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;<span class="comment">        /// &lt;returns&gt;The requested resource as a &lt;see cref=&quot;string&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(MachineLearning)]</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a343e35796ba2c0fa7e0de1cb21a2c176" title="Downloads the requested resource as a string. The resource to download is specified as a string conta...">Download</a>(<span class="keywordtype">string</span> address) =&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a343e35796ba2c0fa7e0de1cb21a2c176" title="Downloads the requested resource as a string. The resource to download is specified as a string conta...">Download</a>(address, Enumerable.Empty&lt;KeyValuePair&lt;string, string&gt;&gt;());</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;<span class="comment">        /// Downloads the requested resource as a &lt;see cref=&quot;string&quot;/&gt;.</span></div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;<span class="comment">        /// The resource to download is specified as a &lt;see cref=&quot;string&quot;/&gt; containing the URI.</span></div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;<span class="comment">        /// &lt;param name=&quot;address&quot;&gt;A string containing the URI to download&lt;/param&gt;</span></div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;<span class="comment">        /// &lt;param name=&quot;headers&quot;&gt;Defines header values to add to the request&lt;/param&gt;</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;<span class="comment">        /// &lt;returns&gt;The requested resource as a &lt;see cref=&quot;string&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(MachineLearning)]</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a343e35796ba2c0fa7e0de1cb21a2c176" title="Downloads the requested resource as a string. The resource to download is specified as a string conta...">Download</a>(<span class="keywordtype">string</span> address, IEnumerable&lt;KeyValuePair&lt;string, string&gt;&gt; headers) =&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a343e35796ba2c0fa7e0de1cb21a2c176" title="Downloads the requested resource as a string. The resource to download is specified as a string conta...">Download</a>(address, headers, <span class="keyword">null</span>, <span class="keyword">null</span>);</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;<span class="comment">        /// Downloads the requested resource as a &lt;see cref=&quot;string&quot;/&gt;.</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;<span class="comment">        /// The resource to download is specified as a &lt;see cref=&quot;string&quot;/&gt; containing the URI.</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;<span class="comment">        /// &lt;param name=&quot;address&quot;&gt;A string containing the URI to download&lt;/param&gt;</span></div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;<span class="comment">        /// &lt;param name=&quot;headers&quot;&gt;Defines header values to add to the request&lt;/param&gt;</span></div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;<span class="comment">        /// &lt;param name=&quot;userName&quot;&gt;The user name associated with the credentials&lt;/param&gt;</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;<span class="comment">        /// &lt;param name=&quot;password&quot;&gt;The password for the user name associated with the credentials&lt;/param&gt;</span></div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;<span class="comment">        /// &lt;returns&gt;The requested resource as a &lt;see cref=&quot;string&quot;/&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AddingData)]</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(MachineLearning)]</div>
<div class="line"><a name="l03025"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4ffb737f7c4a2d9d1b917f24a2e57b68"> 3025</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a4ffb737f7c4a2d9d1b917f24a2e57b68" title="Downloads the requested resource as a string. The resource to download is specified as a string conta...">Download</a>(<span class="keywordtype">string</span> address, IEnumerable&lt;KeyValuePair&lt;string, string&gt;&gt; headers, <span class="keywordtype">string</span> userName, <span class="keywordtype">string</span> password)</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;        {</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;            <span class="keywordflow">return</span> _api.<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IApi.html#a4ae8cf630ff413e93b06c5ac5169314c" title="Local implementation for downloading data to algorithms">Download</a>(address, headers, userName, password);</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;        }</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;<span class="comment">        /// Schedules the provided training code to execute immediately</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;<span class="comment">        /// &lt;param name=&quot;trainingCode&quot;&gt;The training code to be invoked&lt;/param&gt;</span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(MachineLearning)]</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ScheduledEvents)]</div>
<div class="line"><a name="l03036"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae8ad0d70e06e6b42fe8c34814914a9d1"> 3036</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Scheduling_1_1ScheduledEvent.html" title="Real time self scheduling event">ScheduledEvent</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae8ad0d70e06e6b42fe8c34814914a9d1" title="Schedules the provided training code to execute immediately">Train</a>(Action trainingCode)</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        {</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa774ad0258a836858dd2e9f590b692aa" title="Gets schedule manager for adding/removing scheduled events">Schedule</a>.<a class="code" href="classQuantConnect_1_1Scheduling_1_1ScheduleManager.html#a64cc95aea55772170aa37198946a6032" title="Schedules the provided training code to execute immediately">TrainingNow</a>(trainingCode);</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;        }</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;<span class="comment">        /// Schedules the training code to run using the specified date and time rules</span></div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;<span class="comment">        /// &lt;param name=&quot;dateRule&quot;&gt;Specifies what dates the event should run&lt;/param&gt;</span></div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;<span class="comment">        /// &lt;param name=&quot;timeRule&quot;&gt;Specifies the times on those dates the event should run&lt;/param&gt;</span></div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="comment">        /// &lt;param name=&quot;trainingCode&quot;&gt;The training code to be invoked&lt;/param&gt;</span></div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(MachineLearning)]</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(ScheduledEvents)]</div>
<div class="line"><a name="l03049"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aef2696fb52f0f6bcd71e20595d280af2"> 3049</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Scheduling_1_1ScheduledEvent.html" title="Real time self scheduling event">ScheduledEvent</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aef2696fb52f0f6bcd71e20595d280af2" title="Schedules the training code to run using the specified date and time rules">Train</a>(<a class="code" href="interfaceQuantConnect_1_1Scheduling_1_1IDateRule.html" title="Specifies dates that events should be fired, used in conjunction with the ITimeRule">IDateRule</a> dateRule, <a class="code" href="interfaceQuantConnect_1_1Scheduling_1_1ITimeRule.html" title="Specifies times times on dates for events, used in conjunction with IDateRule">ITimeRule</a> timeRule, Action trainingCode)</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;        {</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aa774ad0258a836858dd2e9f590b692aa" title="Gets schedule manager for adding/removing scheduled events">Schedule</a>.<a class="code" href="classQuantConnect_1_1Scheduling_1_1ScheduleManager.html#a17a338a44b9d690a656378c668708828" title="Schedules the training code to run using the specified date and time rules">Training</a>(dateRule, timeRule, trainingCode);</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;        }</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="comment">        /// Event invocator for the &lt;see cref=&quot;InsightsGenerated&quot;/&gt; event</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;<span class="comment">        /// &lt;param name=&quot;insights&quot;&gt;The collection of insights generaed at the current time step&lt;/param&gt;</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;<span class="comment">        /// &lt;param name=&quot;clone&quot;&gt;Will emit a clone of the generated insights&lt;/param&gt;</span></div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(AlgorithmFramework)]</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> OnInsightsGenerated(<a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1Insight.html" title="Defines a alpha prediction for a single symbol generated by the algorithm">Insight</a>[] insights)</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;        {</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;            <span class="comment">// debug printing of generated insights</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aee507793881953a432aef6fd32ed2f7b" title="Enables additional logging of framework models including: All insights, portfolio targets,...">DebugMode</a>)</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;            {</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;                <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a67b117790972c1715ab8b85742d4bfb7" title="Added another method for logging if user guessed.">Log</a>($<span class="stringliteral">&quot;{Time}: ALPHA: {string.Join(&quot;</span> | <span class="stringliteral">&quot;, insights.Select(i =&gt; i.ToString()).OrderBy(i =&gt; i))}&quot;</span>);</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;            }</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160; </div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6b4ca1439d3d03431598e801e2d45514" title="Gets the insight manager">Insights</a>.<a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1InsightCollection.html#aab16b3c31788b564932426ca9bf3b212" title="Adds each item in the specified enumerable of insights to this collection">AddRange</a>(insights);</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160; </div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ae515a97eedc1f50cd7db367b9aeac706" title="Event fired when the algorithm generates insights">InsightsGenerated</a>?.Invoke(<span class="keyword">this</span>, <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1Framework_1_1Alphas_1_1GeneratedInsightsCollection.html" title="Defines a collection of insights that were generated at the same time step">GeneratedInsightsCollection</a>(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6b56996a2ee6921682811ddf293914a3" title="Current date/time in UTC.">UtcTime</a>, insights));</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        }</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;<span class="comment">        /// Sets the current slice</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;<span class="comment">        /// &lt;param name=&quot;slice&quot;&gt;The Slice object&lt;/param&gt;</span></div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;<span class="comment"></span>        [DocumentationAttribute(HandlingData)]</div>
<div class="line"><a name="l03078"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5ed0bab8681444b40d6fe690f7189990"> 3078</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5ed0bab8681444b40d6fe690f7189990" title="Sets the current slice">SetCurrentSlice</a>(<a class="code" href="classQuantConnect_1_1Data_1_1Slice.html" title="Provides a data structure for all of an algorithm&#39;s data at a single time step">Slice</a> slice)</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;        {</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;            <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adae1942237ef0b4a4221024648c80a1b" title="Returns the current Slice object">CurrentSlice</a> = slice;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;        }</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160; </div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;<span class="comment">        /// Provide the API for the algorithm.</span></div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;<span class="comment">        /// &lt;param name=&quot;api&quot;&gt;Initiated API&lt;/param&gt;</span></div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03089"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abed2174943fbfacfda37dc859a66bcd7"> 3089</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abed2174943fbfacfda37dc859a66bcd7" title="Provide the API for the algorithm.">SetApi</a>(<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IApi.html" title="API for QuantConnect.com">IApi</a> api)</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;        {</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;            _api = api;</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        }</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;<span class="comment">        /// Sets the object store</span></div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="comment">        /// &lt;param name=&quot;objectStore&quot;&gt;The object store&lt;/param&gt;</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(MachineLearning)]</div>
<div class="line"><a name="l03100"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adb6f4d45841ad9493a30197a3a503e64"> 3100</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adb6f4d45841ad9493a30197a3a503e64" title="Sets the object store">SetObjectStore</a>(<a class="code" href="interfaceQuantConnect_1_1Interfaces_1_1IObjectStore.html" title="Provides object storage for data persistence.">IObjectStore</a> objectStore)</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        {</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;            <a class="code" href="classQuantConnect_1_1Storage_1_1ObjectStore.html" title="Helper class for easier access to IObjectStore methods">ObjectStore</a> = <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aac77f8136f4f81065027b841e301f921" title="Gets the object store, used for persistence">ObjectStore</a>(objectStore);</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;        }</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;<span class="comment">        /// Determines if the Symbol is shortable at the brokerage</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;Symbol to check if shortable&lt;/param&gt;</span></div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;<span class="comment">        /// &lt;returns&gt;True if shortable&lt;/returns&gt;</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l03111"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#acd4dbf93801d62f0e8918a22811b7027"> 3111</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#acd4dbf93801d62f0e8918a22811b7027" title="Determines if the Symbol is shortable at the brokerage">Shortable</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;        {</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#acd4dbf93801d62f0e8918a22811b7027" title="Determines if the Symbol is shortable at the brokerage">Shortable</a>(symbol, 0);</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;        }</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;<span class="comment">        /// Determines if the Symbol is shortable at the brokerage</span></div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;Symbol to check if shortable&lt;/param&gt;</span></div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;<span class="comment">        /// &lt;param name=&quot;shortQuantity&quot;&gt;Order&#39;s quantity to check if it is currently shortable, taking into account current holdings and open orders&lt;/param&gt;</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;<span class="comment">        /// &lt;param name=&quot;updateOrderId&quot;&gt;Optionally the id of the order being updated. When updating an order</span></div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;<span class="comment">        /// we want to ignore it&#39;s submitted short quantity and use the new provided quantity to determine if we</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;<span class="comment">        /// can perform the update&lt;/param&gt;</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;<span class="comment">        /// &lt;returns&gt;True if the symbol can be shorted by the requested quantity&lt;/returns&gt;</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l03126"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afc2f87e38a8f7df663e70a183fbc962b"> 3126</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#afc2f87e38a8f7df663e70a183fbc962b" title="Determines if the Symbol is shortable at the brokerage">Shortable</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol, decimal shortQuantity, <span class="keywordtype">int</span>? updateOrderId = <span class="keyword">null</span>)</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;        {</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;            var security = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>[symbol];</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;            var shortableQuantity = security.ShortableProvider.ShortableQuantity(symbol, security.LocalTime);</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;            <span class="keywordflow">if</span> (shortableQuantity == <span class="keyword">null</span>)</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;            {</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;            }</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160; </div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;            var openOrderQuantity = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abd31d323023526ca3e7cae0dfd620134" title="Transaction Manager - Process transaction fills and order management.">Transactions</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityTransactionManager.html#a8a14c2ab9bf76272c84499cecb0e1ef7" title="Gets the remaining quantity to be filled from open orders, i.e. order size minus quantity filled">GetOpenOrdersRemainingQuantity</a>(</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                <span class="comment">// if &#39;updateOrderId&#39; was given, ignore that orders quantity</span></div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                order =&gt; order.Symbol == symbol &amp;&amp; (!updateOrderId.HasValue || order.OrderId != updateOrderId.Value));</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160; </div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;            var portfolioQuantity = security.Holdings.Quantity;</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;            <span class="comment">// We check portfolio and open orders beforehand to ensure that orderQuantity == 0 case does not return</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;            <span class="comment">// a true result whenever we have no more shares left to short.</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;            <span class="keywordflow">if</span> (portfolioQuantity + openOrderQuantity &lt;= -shortableQuantity)</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            {</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;            }</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160; </div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;            shortQuantity = -Math.Abs(shortQuantity);</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;            <span class="keywordflow">return</span> portfolioQuantity + shortQuantity + openOrderQuantity &gt;= -shortableQuantity;</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;        }</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;<span class="comment">        /// Gets the quantity shortable for the given asset</span></div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;<span class="comment">        /// &lt;returns&gt;</span></div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;<span class="comment">        /// Quantity shortable for the given asset. Zero if not</span></div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;<span class="comment">        /// shortable, or a number greater than zero if shortable.</span></div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;<span class="comment">        /// &lt;/returns&gt;</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(TradingAndOrders)]</div>
<div class="line"><a name="l03159"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac501e5b1b226ec0a85901860da8482c9"> 3159</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">long</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ac501e5b1b226ec0a85901860da8482c9" title="Gets the quantity shortable for the given asset">ShortableQuantity</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;        {</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;            var security = <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a6567d757b9c20c4b935d3f785676bfe3" title="Security collection is an array of the security objects such as Equities and FOREX....">Securities</a>[symbol];</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;            <span class="keywordflow">return</span> security.ShortableProvider.ShortableQuantity(symbol, security.LocalTime) ?? 0;</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;        }</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;<span class="comment">        /// Converts an ISIN identifier into a &lt;see cref=&quot;Symbol&quot;/&gt;</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;<span class="comment">        /// &lt;param name=&quot;isin&quot;&gt;The International Securities Identification Number (ISIN) of an asset&lt;/param&gt;</span></div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;<span class="comment">        /// &lt;param name=&quot;tradingDate&quot;&gt;</span></div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;<span class="comment">        /// The date that the stock being looked up is/was traded at.</span></div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;<span class="comment">        /// The date is used to create a Symbol with the ticker set to the ticker the asset traded under on the trading date.</span></div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;<span class="comment">        /// &lt;/param&gt;</span></div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;<span class="comment">        /// &lt;returns&gt;Symbol corresponding to the ISIN. If no Symbol with a matching ISIN was found, returns null.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03176"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adb04309916f9e0cc4b632e908efaf439"> 3176</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adb04309916f9e0cc4b632e908efaf439" title="Converts an ISIN identifier into a Symbol">ISIN</a>(<span class="keywordtype">string</span> isin, DateTime? tradingDate = <span class="keyword">null</span>)</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;        {</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#a14168bd1192fadd99f7a06ecb3e31cb5" title="Converts ISIN into a Lean Symbol">ISIN</a>(isin, GetVerifiedTradingDate(tradingDate));</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;        }</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;<span class="comment">        /// Converts a &lt;see cref=&quot;Symbol&quot;/&gt; into an ISIN identifier</span></div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The &lt;see cref=&quot;Symbol&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;<span class="comment">        /// &lt;returns&gt;ISIN corresponding to the Symbol. If no matching ISIN is found, returns null.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03188"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a072fbf8af41659f65314d791860742e4"> 3188</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a072fbf8af41659f65314d791860742e4" title="Converts a Symbol into an ISIN identifier">ISIN</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;        {</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#a14168bd1192fadd99f7a06ecb3e31cb5" title="Converts ISIN into a Lean Symbol">ISIN</a>(symbol);</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;        }</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;<span class="comment">        /// Converts a composite FIGI identifier into a &lt;see cref=&quot;Symbol&quot;/&gt;</span></div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<span class="comment">        /// &lt;param name=&quot;compositeFigi&quot;&gt;The composite Financial Instrument Global Identifier (FIGI) of an asset&lt;/param&gt;</span></div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;<span class="comment">        /// &lt;param name=&quot;tradingDate&quot;&gt;</span></div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;<span class="comment">        /// The date that the stock being looked up is/was traded at.</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;<span class="comment">        /// The date is used to create a Symbol with the ticker set to the ticker the asset traded under on the trading date.</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;<span class="comment">        /// &lt;/param&gt;</span></div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;<span class="comment">        /// &lt;returns&gt;Symbol corresponding to the composite FIGI. If no Symbol with a matching composite FIGI was found, returns null.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;<span class="comment">        /// &lt;remarks&gt;</span></div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;<span class="comment">        /// The composite FIGI differs from an exchange-level FIGI, in that it identifies</span></div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;<span class="comment">        /// an asset across all exchanges in a single country that the asset trades in.</span></div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;<span class="comment">        /// &lt;/remarks&gt;</span></div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03208"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad68099ced5d1a726539f83db1835533e"> 3208</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#ad68099ced5d1a726539f83db1835533e" title="Converts a composite FIGI identifier into a Symbol">CompositeFIGI</a>(<span class="keywordtype">string</span> compositeFigi, DateTime? tradingDate = <span class="keyword">null</span>)</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;        {</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#af7ef699c51a49b420b4a7b2f4214dd65" title="Converts an asset&#39;s composite FIGI into a Lean Symbol">CompositeFIGI</a>(compositeFigi, GetVerifiedTradingDate(tradingDate));</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;        }</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;<span class="comment">        /// Converts a &lt;see cref=&quot;Symbol&quot;/&gt; into a composite FIGI identifier</span></div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The &lt;see cref=&quot;Symbol&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;<span class="comment">        /// &lt;returns&gt;Composite FIGI corresponding to the Symbol. If no matching composite FIGI is found, returns null.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03220"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a242ff69f50df399aa029722de0d6f044"> 3220</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a242ff69f50df399aa029722de0d6f044" title="Converts a Symbol into a composite FIGI identifier">CompositeFIGI</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;        {</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#af7ef699c51a49b420b4a7b2f4214dd65" title="Converts an asset&#39;s composite FIGI into a Lean Symbol">CompositeFIGI</a>(symbol);</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;        }</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;<span class="comment">        /// Converts a CUSIP identifier into a &lt;see cref=&quot;Symbol&quot;/&gt;</span></div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;<span class="comment">        /// &lt;param name=&quot;cusip&quot;&gt;The CUSIP number of an asset&lt;/param&gt;</span></div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;<span class="comment">        /// &lt;param name=&quot;tradingDate&quot;&gt;</span></div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;<span class="comment">        /// The date that the stock being looked up is/was traded at.</span></div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;<span class="comment">        /// The date is used to create a Symbol with the ticker set to the ticker the asset traded under on the trading date.</span></div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;<span class="comment">        /// &lt;/param&gt;</span></div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;<span class="comment">        /// &lt;returns&gt;Symbol corresponding to the CUSIP. If no Symbol with a matching CUSIP was found, returns null.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03236"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a52a57674bfb837e77780f54a741ba768"> 3236</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a52a57674bfb837e77780f54a741ba768" title="Converts a CUSIP identifier into a Symbol">CUSIP</a>(<span class="keywordtype">string</span> cusip, DateTime? tradingDate = <span class="keyword">null</span>)</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;        {</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#af6416c7e7f346c3d386360c9c74ccba4" title="Converts CUSIP into a Lean Symbol">CUSIP</a>(cusip, GetVerifiedTradingDate(tradingDate));</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;        }</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;<span class="comment">        /// Converts a &lt;see cref=&quot;Symbol&quot;/&gt; into a CUSIP identifier</span></div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The &lt;see cref=&quot;Symbol&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;<span class="comment">        /// &lt;returns&gt;CUSIP corresponding to the Symbol. If no matching CUSIP is found, returns null.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03248"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adb26a8abb775639cda6637b5c87b242a"> 3248</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#adb26a8abb775639cda6637b5c87b242a" title="Converts a Symbol into a CUSIP identifier">CUSIP</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;        {</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#af6416c7e7f346c3d386360c9c74ccba4" title="Converts CUSIP into a Lean Symbol">CUSIP</a>(symbol);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        }</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;<span class="comment">        /// Converts a SEDOL identifier into a &lt;see cref=&quot;Symbol&quot;/&gt;</span></div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;<span class="comment">        /// &lt;param name=&quot;sedol&quot;&gt;The SEDOL identifier of an asset&lt;/param&gt;</span></div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;<span class="comment">        /// &lt;param name=&quot;tradingDate&quot;&gt;</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;<span class="comment">        /// The date that the stock being looked up is/was traded at.</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;<span class="comment">        /// The date is used to create a Symbol with the ticker set to the ticker the asset traded under on the trading date.</span></div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;<span class="comment">        /// &lt;/param&gt;</span></div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;<span class="comment">        /// &lt;returns&gt;Symbol corresponding to the SEDOL. If no Symbol with a matching SEDOL was found, returns null.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03264"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aea8f2328e04e0ae6f20795ea9330bc9e"> 3264</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aea8f2328e04e0ae6f20795ea9330bc9e" title="Converts a SEDOL identifier into a Symbol">SEDOL</a>(<span class="keywordtype">string</span> sedol, DateTime? tradingDate = <span class="keyword">null</span>)</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;        {</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#a1bc14cfdd0578a6ba85f2093cee60c20" title="Converts SEDOL into a Lean Symbol">SEDOL</a>(sedol, GetVerifiedTradingDate(tradingDate));</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;        }</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;<span class="comment">        /// Converts a &lt;see cref=&quot;Symbol&quot;/&gt; into a SEDOL identifier</span></div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The &lt;see cref=&quot;Symbol&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<span class="comment">        /// &lt;returns&gt;SEDOL corresponding to the Symbol. If no matching SEDOL is found, returns null.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03276"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3ae5ff98940f300ab851fb2f90a5d5de"> 3276</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a3ae5ff98940f300ab851fb2f90a5d5de" title="Converts a Symbol into a SEDOL identifier">SEDOL</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;        {</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#a1bc14cfdd0578a6ba85f2093cee60c20" title="Converts SEDOL into a Lean Symbol">SEDOL</a>(symbol);</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;        }</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;<span class="comment">        /// Converts a CIK identifier into &lt;see cref=&quot;Symbol&quot;/&gt; array</span></div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;<span class="comment">        /// &lt;param name=&quot;cik&quot;&gt;The CIK identifier of an asset&lt;/param&gt;</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;<span class="comment">        /// &lt;param name=&quot;tradingDate&quot;&gt;</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;<span class="comment">        /// The date that the stock being looked up is/was traded at.</span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;<span class="comment">        /// The date is used to create a Symbol with the ticker set to the ticker the asset traded under on the trading date.</span></div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;<span class="comment">        /// &lt;/param&gt;</span></div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;<span class="comment">        /// &lt;returns&gt;Symbols corresponding to the CIK. If no Symbol with a matching CIK was found, returns empty array.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03292"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abecbd35719edd5c13c4f75f1b5a0f195"> 3292</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a>[] <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#abecbd35719edd5c13c4f75f1b5a0f195" title="Converts a CIK identifier into Symbol array">CIK</a>(<span class="keywordtype">int</span> cik, DateTime? tradingDate = <span class="keyword">null</span>)</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        {</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#a14b2795d91b0adf4f4ca08e95091c818" title="Get&#39;s the CIK value associated with the given Symbol">CIK</a>(cik, GetVerifiedTradingDate(tradingDate));</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;        }</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;<span class="comment">        /// Converts a &lt;see cref=&quot;Symbol&quot;/&gt; into a CIK identifier</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The &lt;see cref=&quot;Symbol&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;<span class="comment">        /// &lt;returns&gt;CIK corresponding to the Symbol. If no matching CIK is found, returns null.&lt;/returns&gt;</span></div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03304"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2757e7a4e160190c4d60e0571d9e5600"> 3304</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span>? <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a2757e7a4e160190c4d60e0571d9e5600" title="Converts a Symbol into a CIK identifier">CIK</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;        {</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;            <span class="keywordflow">return</span> _securityDefinitionSymbolResolver.<a class="code" href="classQuantConnect_1_1Securities_1_1SecurityDefinitionSymbolResolver.html#a14b2795d91b0adf4f4ca08e95091c818" title="Get&#39;s the CIK value associated with the given Symbol">CIK</a>(symbol);</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;        }</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;<span class="comment">        /// Get the fundamental data for the requested symbol at the current time</span></div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbol&quot;&gt;The &lt;see cref=&quot;Symbol&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;<span class="comment">        /// &lt;returns&gt;The fundamental data for the Symbol&lt;/returns&gt;</span></div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03316"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7e3b92b7345e5dcc8b2b207a1f037043"> 3316</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classQuantConnect_1_1Data_1_1Fundamental_1_1Fundamental.html" title="Lean fundamental data class">Fundamental</a> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7e3b92b7345e5dcc8b2b207a1f037043" title="Get the fundamental data for the requested symbol at the current time">Fundamentals</a>(<a class="code" href="classQuantConnect_1_1Symbol.html" title="Represents a unique security identifier. This is made of two components, the unique SID and the Value...">Symbol</a> symbol)</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;        {</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classQuantConnect_1_1Data_1_1Fundamental_1_1Fundamental.html" title="Lean fundamental data class">Fundamental</a>(<a class="code" href="classQuantConnect_1_1Time.html" title="Time helper class collection for working with trading dates">Time</a>, symbol) { EndTime = <a class="code" href="classQuantConnect_1_1Time.html" title="Time helper class collection for working with trading dates">Time</a> };</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;        }</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;<span class="comment">        /// Get the fundamental data for the requested symbols at the current time</span></div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;<span class="comment">        /// &lt;param name=&quot;symbols&quot;&gt;The &lt;see cref=&quot;Symbol&quot;/&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;<span class="comment">        /// &lt;returns&gt;The fundamental data for the symbols&lt;/returns&gt;</span></div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;<span class="comment"></span>        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(HandlingData)]</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;        [<a class="code" href="classQuantConnect_1_1DocumentationAttribute.html" title="Custom attribute used for documentation">DocumentationAttribute</a>(SecuritiesAndPortfolio)]</div>
<div class="line"><a name="l03328"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aebbc43e30cd6d5a559c1e05a41d6ef44"> 3328</a></span>&#160;        <span class="keyword">public</span> List&lt;Fundamental&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aebbc43e30cd6d5a559c1e05a41d6ef44" title="Get the fundamental data for the requested symbols at the current time">Fundamentals</a>(List&lt;Symbol&gt; symbols)</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;        {</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;            <span class="keywordflow">return</span> symbols.Select(symbol =&gt; <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a7e3b92b7345e5dcc8b2b207a1f037043" title="Get the fundamental data for the requested symbol at the current time">Fundamentals</a>(symbol)).ToList();</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;        }</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;<span class="comment">        /// Set the properties and exchange hours for a given key into our databases</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;<span class="comment">        /// &lt;param name=&quot;key&quot;&gt;Key for database storage&lt;/param&gt;</span></div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;<span class="comment">        /// &lt;param name=&quot;properties&quot;&gt;Properties to store&lt;/param&gt;</span></div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;<span class="comment">        /// &lt;param name=&quot;exchangeHours&quot;&gt;Exchange hours to store&lt;/param&gt;</span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> <span class="keywordtype">void</span> SetDatabaseEntries(<span class="keywordtype">string</span> key, <a class="code" href="classQuantConnect_1_1Securities_1_1SymbolProperties.html" title="Represents common properties for a specific security, uniquely identified by market,...">SymbolProperties</a> properties, <a class="code" href="classQuantConnect_1_1Securities_1_1SecurityExchangeHours.html" title="Represents the schedule of a security exchange. This includes daily regular and extended market hours...">SecurityExchangeHours</a> exchangeHours)</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        {</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;            <span class="comment">// Add entries to our Symbol Properties DB and MarketHours DB</span></div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;            <a class="code" href="classQuantConnect_1_1Securities_1_1SymbolPropertiesDatabase.html" title="Provides access to specific properties for various symbols">SymbolPropertiesDatabase</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1SymbolPropertiesDatabase.html#a586c202f4134e878b243963d38c579a9" title="Set SymbolProperties entry for a particular market, symbol and security type.">SetEntry</a>(<a class="code" href="classQuantConnect_1_1Market.html" title="Markets Collection: Soon to be expanded to a collection of items specifying the market hour,...">Market</a>.<a class="code" href="classQuantConnect_1_1Market.html#ab62a170b2945e72bfb67cb582a3d3fec" title="USA Market">USA</a>, key, <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Base, properties);</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;            <a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html" title="Provides access to exchange hours and raw data times zones in various markets">MarketHoursDatabase</a>.<a class="code" href="classQuantConnect_1_1Securities_1_1MarketHoursDatabase.html#a2425acdf83abbd16218a008643c7edbe" title="Sets the entry for the specified market/symbol/security-type. This is intended to be used by custom d...">SetEntry</a>(<a class="code" href="classQuantConnect_1_1Market.html" title="Markets Collection: Soon to be expanded to a collection of items specifying the market hour,...">Market</a>.<a class="code" href="classQuantConnect_1_1Market.html#ab62a170b2945e72bfb67cb582a3d3fec" title="USA Market">USA</a>, key, <a class="code" href="namespaceQuantConnect.html#a5b278afcdcc479a49e001f7ea24b1eb2" title="Type of tradable security / underlying asset">SecurityType</a>.Base, exchangeHours);</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;        }</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;<span class="comment">        /// Takes a date, and verifies that it is point-in-time. If null</span></div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;<span class="comment">        /// time is provided, algorithm time is returned instead.</span></div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;<span class="comment">        /// &lt;param name=&quot;tradingDate&quot;&gt;</span></div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;<span class="comment">        /// The trading date to verify that it is a point-in-time</span></div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;<span class="comment">        /// date, or before, relative to the algorithm&#39;s current trading date.</span></div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;<span class="comment">        /// &lt;/param&gt;</span></div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;<span class="comment">        /// &lt;returns&gt;The date provided if not null, otherwise the algorithm&#39;s current trading date&lt;/returns&gt;</span></div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;<span class="comment">        /// &lt;exception cref=&quot;ArgumentException&quot;&gt;</span></div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;<span class="comment">        /// The trading date provided is not null and it is after the algorithm&#39;s current trading date</span></div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;<span class="comment">        /// &lt;/exception&gt;</span></div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> DateTime GetVerifiedTradingDate(DateTime? tradingDate)</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;        {</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;            tradingDate ??= <a class="code" href="classQuantConnect_1_1Time.html" title="Time helper class collection for working with trading dates">Time</a>.Date;</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;            <span class="keywordflow">if</span> (tradingDate &gt; <a class="code" href="classQuantConnect_1_1Time.html" title="Time helper class collection for working with trading dates">Time</a>.Date)</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;            {</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException($<span class="stringliteral">&quot;The trading date provided: \&quot;{tradingDate:yyyy-MM-dd}\&quot; is after the current algorithm&#39;s trading date: \&quot;{Time:yyyy-MM-dd}\&quot;&quot;</span>);</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;            }</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160; </div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;            <span class="keywordflow">return</span> tradingDate.Value;</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;        }</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;<span class="comment">        /// Helper method to set the start date during live trading</span></div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> <span class="keywordtype">void</span> SetLiveModeStartDate()</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        {</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a5589ce6040feaa092de0d8a8da8e6ee5" title="Boolean property indicating the algorithm is currently running in live mode.">LiveMode</a>)</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;            {</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;SetLiveModeStartDate should only be called during live trading!&quot;</span>);</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;            }</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;            _start = DateTime.UtcNow.ConvertFromUtc(<a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#aba2b261b2d90641cc15aa6717d659030" title="Gets the time zone used for the Time property. The default value is TimeZones.NewYork">TimeZone</a>);</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;            <span class="comment">// startDate is set relative to the algorithm&#39;s timezone.</span></div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;            _startDate = _start.Date;</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;            _endDate = <a class="code" href="namespaceQuantConnect.html">QuantConnect</a>.<a class="code" href="classQuantConnect_1_1Time.html" title="Time helper class collection for working with trading dates">Time</a>.<a class="code" href="classQuantConnect_1_1Time.html#aa3f181748d9ab09fd560d90072465a1b" title="Provides a value far enough in the future the current computer hardware will have decayed :)">EndOfTime</a>;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;        }</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;<span class="comment">        /// Sets the statistics service instance to be used by the algorithm</span></div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;<span class="comment">        /// &lt;param name=&quot;statisticsService&quot;&gt;The statistics service instance&lt;/param&gt;</span></div>
<div class="line"><a name="l03388"></a><span class="lineno"><a class="line" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0c0d7e3ea9afbd621e13395c0724fbb1"> 3388</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classQuantConnect_1_1Algorithm_1_1QCAlgorithm.html#a0c0d7e3ea9afbd621e13395c0724fbb1" title="Sets the statistics service instance to be used by the algorithm">SetStatisticsService</a>(<a class="code" href="interfaceQuantConnect_1_1Statistics_1_1IStatisticsService.html" title="This interface exposes methods for accessing algorithm statistics results at runtime.">IStatisticsService</a> statisticsService)</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;        {</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;            <span class="keywordflow">if</span> (_statisticsService == <span class="keyword">null</span>)</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;            {</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                _statisticsService = statisticsService;</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;            }</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;        }</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    }</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8ba487e25de5ee77e05e9dce7582cb98.html">Algorithm</a></li><li class="navelem"><b>QCAlgorithm.cs</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
